<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"novav.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Simon Shi的小站">
<meta property="og:url" content="https://novav.github.io/page/5/index.html">
<meta property="og:site_name" content="Simon Shi的小站">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Simon Shi">
<meta property="article:tag" content="AI,Machine Learning, Deep Learning">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://novav.github.io/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Simon Shi的小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Simon Shi的小站</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">人工智能，机器学习， 强化学习，大模型，自动驾驶</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/25/AI_ROBOT/RaspBerryPi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/25/AI_ROBOT/RaspBerryPi/" class="post-title-link" itemprop="url">树莓派安装系统-Camrea+ROS+rplidar A1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-25 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-25T12:00:00+00:00">2024-07-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>系统安装</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44223509/article/details/120753053">超详细树莓派4B安装Ubuntu Server无屏幕_ubuntu server for raspberry 4b-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/zerotier/ZeroTierOne">GitHub - zerotier&#x2F;ZeroTierOne: A Smart Ethernet Switch for Earth</a></p>
<p>ROS 安装</p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/news/1335468">ROS——ubuntu 20.04 &#x2F; 18.04安装 ROS - 腾讯云开发者社区-腾讯云</a></p>
<p>SLAM Relate</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lzy6041/article/details/86702318">2D SLAM_Cartographer（1）_Google Cartographer安装与测试（demo）_not yet implemented for 2d-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/CloudFlame/p/16443723.html">【cartogarpher_ros】二： 官方Demo的介绍与演示 - CloudFlame - 博客园</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2024/07/25/AI_ROBOT/RaspBerryPi/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/24/AI_ROBOT/ROS_MOVEIT/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/24/AI_ROBOT/ROS_MOVEIT/" class="post-title-link" itemprop="url">ROS 之 机器臂MoveIt</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-24 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-24T12:00:00+00:00">2024-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ROS/" itemprop="url" rel="index"><span itemprop="name">ROS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="10-2-MoveIt架构"><a href="#10-2-MoveIt架构" class="headerlink" title="10.2 MoveIt架构"></a>10.2 MoveIt架构</h2><h3 id="10-1-1-运动组（move-group）"><a href="#10-1-1-运动组（move-group）" class="headerlink" title="10.1.1 运动组（move_group）"></a>10.1.1 运动组（move_group）</h3><p>move_group是MoveIt！ 的核心节点， 可以综合其他独立的功能组件为用户提供ROS中的动作指令和服务， 如图10-2所示。</p>
<p><img src="/2024/07/24/AI_ROBOT/ROS_MOVEIT/2024-07-24-14-49-44-image.png"></p>
<p>1)用户接口</p>
<p>MoveIt！ 提供三种可供调用的接口：  </p>
<ul>
<li><p>C++： 使用move_group_interface包提供的API。  </p>
</li>
<li><p>Python： 使用moveit_commander包提供的API。  </p>
</li>
<li><p>GUI： 使用MoveIt！ 的rviz插件。</p>
</li>
</ul>
<p>2） ROS参数服务器<br>ROS的参数服务器需要为move_group提供三种信息：  </p>
<ul>
<li><p>URDF： 从ROS参数服务器中查找robot_description参数， 获取机器人模型的描述信息。  </p>
</li>
<li><p>SRDF： 从ROS参数服务器中查找robot_description_semantic参数，<br>获取机器人模型的一些配置信息， 这些配置信息通过配置工具MoveIt！<br>Setup Assistant生成。  </p>
</li>
<li><p>Config： 机器人的其他配置信息， 例如关节限位、 运动学插件、 运<br>动规划插件等</p>
</li>
</ul>
<p>（3） 机器人<br>move_group和机器人之间通过Topic和Action通信。 机器人传感器和机器人状态发布者将机器人的关节信息和坐标变换关系发送给move_group。</p>
<p>如果需要加入机器人外部感知能力， 还需要通过机器人3D传感器发布点云数据。 </p>
<p>另外还有一个很重要的模块——机器人控制器， 通过Action的形式接收move_group的规划结果， 并且将执行情况反馈给move_group。</p>
<p><img src="/2024/07/24/AI_ROBOT/ROS_MOVEIT/2024-07-24-14-54-20-image.png"></p>
<h3 id="10-1-2-运动规划器（motion-planner）"><a href="#10-1-2-运动规划器（motion-planner）" class="headerlink" title="10.1.2 运动规划器（motion_planner）"></a>10.1.2 运动规划器（motion_planner）</h3><h2 id="10-2-如何使用MoveIt！"><a href="#10-2-如何使用MoveIt！" class="headerlink" title="10.2 如何使用MoveIt！"></a>10.2 如何使用MoveIt！</h2><p>1） 组装： 创建机器人URDF模型。<br>2） 配置： 使用MoveIt！ Setup Assistant工具生成配置文件。<br>3） 驱动： 添加机器人控制器（真实机器人） 或控制器插件（仿真 机器人） 。<br>4） 控制： 使用MoveIt！ 控制机器人运动（算法仿真、 物理仿真） 。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/24/CV_Face/SD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/24/CV_Face/SD/" class="post-title-link" itemprop="url">Stable Diffusion</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-24 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-24T12:00:00+00:00">2024-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SD/" itemprop="url" rel="index"><span itemprop="name">SD</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui">GitHub - AUTOMATIC1111&#x2F;stable-diffusion-webui: Stable Diffusion web UI</a></p>
<h3 id="REF"><a href="#REF" class="headerlink" title="REF"></a>REF</h3><p><a target="_blank" rel="noopener" href="https://aistudio.baidu.com/projectdetail/4704437?ad-from=6645">一个项目体验stable-diffusion、waifu、NovelAI三大模型 - 飞桨AI Studio星河社区</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/676946663"># 免费使用！本地部署！一款集成 GPT 和 Midjourney 开源前端工具</a></p>
<ul>
<li><p>集成 GPT 问答、Midjourney 绘画等一站式服务的系统，主要特点包括：</p>
</li>
<li><p>体验网站： <a target="_blank" rel="noopener" href="https://hub.zhishuyun.com/chat/conversation">https://hub.zhishuyun.com/chat/conversation</a></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/tardis/bd/art/666092254?source_id=1001">万字干货!超全面的Stable Diffusion学习指南:插件一键安装，零基础转行学习，免费分享</a></p>
<ul>
<li><p>Stable Diffusion超实用插件</p>
</li>
<li><p>Sd-webui-controlnet | 精准绘图</p>
</li>
<li><p>Sd-webui-inpaint-anything | 精准抠图</p>
</li>
<li><p>Sd-webui-segment-anything | 自由换装</p>
</li>
<li><p>Stable-diffusion-webui-localization-zh_Hans |设置中文界面</p>
</li>
<li><p>Stable-diffusion-webui-wd14-tagger | 反推关键字</p>
</li>
<li><p>Tagcomplete |tag自动补全</p>
</li>
<li><p>Deforum | 图片转视频</p>
</li>
<li><p>Civitai Helper | C站模型下载</p>
</li>
<li><p>Style Selector for SDXL 1.0 | SDXL 1.0 风格选择器</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/24/NLP/ChatGLM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/24/NLP/ChatGLM/" class="post-title-link" itemprop="url">LLM 之 ChatGLM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-24 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-24T12:00:00+00:00">2024-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:39" itemprop="dateModified" datetime="2025-08-06T08:16:39+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LLM/" itemprop="url" rel="index"><span itemprop="name">LLM</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://aistudio.baidu.com/projectdetail/5741753?ad-from=11889">ChatGLM:本地化搭建大模型实例 - 飞桨AI Studio星河社区</a></p>
<p>[# 本地部署 ChatGLM3-6b 教程](# 本地部署 ChatGLM3-6b 教程)</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42878111/article/details/134017313">https://blog.csdn.net/weixin_42878111/article/details/134017313</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/22/AI_ROBOT/Gazebo_Navi_multi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/22/AI_ROBOT/Gazebo_Navi_multi/" class="post-title-link" itemprop="url">Gazebo 多机器导航</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-22 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-22T12:00:00+00:00">2024-07-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Navigation/" itemprop="url" rel="index"><span itemprop="name">Navigation</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="基于ROS的多机器人导航-编队仿真"><a href="#基于ROS的多机器人导航-编队仿真" class="headerlink" title="基于ROS的多机器人导航+编队仿真"></a>基于ROS的多机器人导航+编队仿真</h2><p>前几篇文章中分别讲了如何在gazebo中加载多机器人，在gazebo中多机器人的编队以及如何在rviz中实现多机器人仿真。这一篇文章的主要内容是将前几篇文章所讲内容做一个集合，实现在ROS环境下的多机器人导航加编队的仿真。</p>
<h2 id="1-自主导航-编队框架"><a href="#1-自主导航-编队框架" class="headerlink" title="1.自主导航+编队框架"></a>1.自主导航+编队框架</h2><p>前两篇文章已经分别介绍了移动机器人自主导航以及多移动机器人编队的软件框架。这一节介绍如何将其二者结合，思路为将领航者作为自主导航的机器人，跟随者在保持队形的同时进行避障，以避免发生事故。这样结合的好处是仅领航者需要自主导航，编队中其余机器人只需要保持编队和避障即可，使系统的整体工作量减少，系统实现难度减小。图1-1为导航+编队程序框架图。<a target="_blank" rel="noopener" href="https://59.110.158.57/Uploads/old-md/uploads/20200626_57854.png"><img src="https://59.110.158.57/Uploads/old-md/uploads/20200626_57854.png"></a>图1-2是仿真中运行移动机器人自主导航以及编队时的节点关系图。图中ares1作为领航者，ares2作为跟随者。ares1接收move_base规划路径的运动指令， ares2接收领航者与自己的位置偏差，在slave节点中作出控制指令并发布，从而实现编队。<a target="_blank" rel="noopener" href="https://59.110.158.57/Uploads/old-md/uploads/20200626_62030.jpg"><img src="https://59.110.158.57/Uploads/old-md/uploads/20200626_62030.jpg"></a></p>
<h2 id="2-效果展示"><a href="#2-效果展示" class="headerlink" title="2.效果展示"></a>2.效果展示</h2><p>运行指令： </p>
<p>启动仿真环境：<code>roslaunch ares_gazebo ares_cloister_gazebo.launch</code> </p>
<p>打开rviz,进行领航者导航：<code>roslaunch ares_navigation navigation_demo.launch</code> </p>
<p>启动编队程序：<code>roslaunch stage_first OnYourMarkGetSetGo.launch</code> </p>
<p>效果展示：<a target="_blank" rel="noopener" href="https://59.110.158.57/Uploads/old-md/uploads/20200626_68271.gif"><img src="https://59.110.158.57/Uploads/old-md/uploads/20200626_68271.gif"></a></p>
<h2 id="3-实现步骤"><a href="#3-实现步骤" class="headerlink" title="3.实现步骤"></a>3.实现步骤</h2><p>1）在gazebo中实现多机器人仿真，各个机器人运动可独立控制。 具体实现步骤：<a target="_blank" rel="noopener" href="https://www.guyuehome.com/4889" title="《如何在gazebo中实现多机器人仿真》">《如何在gazebo中实现多机器人仿真》</a>。 </p>
<p>2）在gazebo多机器人仿真条件下，在rviz中实现其中任何一机器人的自主导航。 具体实现步骤：<a target="_blank" rel="noopener" href="https://www.guyuehome.com/?p=8907" title="《如何在RVIZ中实现多机器人导航仿真》">《如何在RVIZ中实现多机器人导航仿真》</a>。 </p>
<p>3）将实现自主导航的小车指定为领航者，其余机器人小车指定为跟随者，从而实现在指定环境中的自主导航加仿真。 编队原理及具体实现步骤：<a target="_blank" rel="noopener" href="https://www.guyuehome.com/?p=8907" title="《基于ROS的多机器人编队仿真》">《基于ROS的多机器人编队仿真》</a></p>
<h2 id="4-总结与展望"><a href="#4-总结与展望" class="headerlink" title="4.总结与展望"></a>4.总结与展望</h2><p>前前后后也写了四篇文章，从最基础的在gazebo中加载多个机器人，到一步步实现导航即编队功能，最后将其结合，这期间走过不少弯路，不过也是跌跌撞撞地做出了简单的效果。对于整个项目，我认为还有以下可以改进的地方，希望以后可以升级完善： 1) 编队队形较简易单一，编队控制为最基础的开环控制，之后可以将论文中的控制理论在此系统中验证； 2) 由于项目需要，多机器人的导航中只指定编队中领航者小车实现自主导航。理论上是可以同时实现多车导航的，有兴趣的小伙伴也可以参考项目进行配置； 3) 有关多机器人协作方面，项目中只实现了简单的编队及编队导航效果。系统搭建好后多机器人还可以进行多方面的协作，比如多机器人共同建图等。 当下多机器人协作方向在机器人研究领域越来越火，在此方向的论文理论也层出不穷；ROS作为机器人系统的应用也越来越普遍，众多实践也证明了ROS的优越性。综其二者，多机器人协作在ROS上的运用看来也会是大势所趋。而在学习过程中，ROS1对于多机器人仿真实验的众多不方便也逐渐体现了出来，具体在前文中都有所提及，在ROS2中应该也会相应的得到改进。 “怕什么真理无穷，进一寸有一寸的欢喜。”学习工作及文章多有不足疏漏之处，希望大家来一起学习探讨！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/16/CV_Face/StoryDiffusion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/16/CV_Face/StoryDiffusion/" class="post-title-link" itemprop="url">AIGC--StoryDiffusion</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-16 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-16T12:00:00+00:00">2024-07-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SD/" itemprop="url" rel="index"><span itemprop="name">SD</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>StoryDiffusion</p>
<p>Codel: <a target="_blank" rel="noopener" href="https://github.com/HVision-NKU/StoryDiffusion">GitHub - HVision-NKU&#x2F;StoryDiffusion: Create Magic Story!</a></p>
<p>Demo: <a target="_blank" rel="noopener" href="https://huggingface.co/spaces/YupengZhou/StoryDiffusion">StoryDiffusion - a Hugging Face Space by YupengZhou</a></p>
<p>Demo: <a target="_blank" rel="noopener" href="https://colab.research.google.com/github/HVision-NKU/StoryDiffusion/blob/main/Comic_Generation.ipynb">Comic_generation –google Colab</a></p>
<p><a target="_blank" rel="noopener" href="https://replicate.com/cjwbw/StoryDiffusion">https://replicate.com/cjwbw/StoryDiffusion</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/16/NLP/inference/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/16/NLP/inference/" class="post-title-link" itemprop="url">LLM 部署</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-16 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-16T12:00:00+00:00">2024-07-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LLM/" itemprop="url" rel="index"><span itemprop="name">LLM</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/676770191">Qanything-本地知识库问答系统（LLM+RAG）</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/12/NLP/Audios/TTS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/12/NLP/Audios/TTS/" class="post-title-link" itemprop="url">TTS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-12 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-12T12:00:00+00:00">2024-07-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:39" itemprop="dateModified" datetime="2025-08-06T08:16:39+00:00">2025-08-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>讯飞</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/07/10/Sub_Language/PythonDoc/web_dev/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/07/10/Sub_Language/PythonDoc/web_dev/" class="post-title-link" itemprop="url">Python Web 开发</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-07-10 12:00:00" itemprop="dateCreated datePublished" datetime="2024-07-10T12:00:00+00:00">2024-07-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dev/" itemprop="url" rel="index"><span itemprop="name">dev</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dev/web/" itemprop="url" rel="index"><span itemprop="name">web</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Python 可视化 web 神器：</p>
<ul>
<li><p>streamlit、</p>
</li>
<li><p>Gradio、</p>
</li>
<li><p>dash、</p>
</li>
<li><p>nicegui；</p>
</li>
</ul>
<p>低代码 Python Web 框架：</p>
<ul>
<li>PyWebIO</li>
</ul>
<p>在机器学习领域，针对已经训练好的模型创建一个快速的 Demo 通常是必要的，下面是快速创建<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%BA%94%E7%94%A8&spm=1001.2101.3001.7020">机器学习应用</a>的几个框架：<a target="_blank" rel="noopener" href="https://gradio.app/" title="gradio">gradio</a>、<a target="_blank" rel="noopener" href="https://streamlit.io/" title="streamit">streamit</a> 和 <a target="_blank" rel="noopener" href="https://dash.plotly.com/" title="dash">dash</a> 进行简单的对比。</p>
<table>
<thead>
<tr>
<th></th>
<th>gradio</th>
<th>streamit</th>
<th>dash</th>
</tr>
</thead>
<tbody><tr>
<td>主要使用场景</td>
<td>可交互小 Demo</td>
<td>工作流、DashBoard</td>
<td>DashBoard、生产环境的复杂演示应用</td>
</tr>
<tr>
<td>上手难度</td>
<td>简单</td>
<td>简单</td>
<td>中</td>
</tr>
<tr>
<td>组件丰富度</td>
<td>低</td>
<td>高</td>
<td>高</td>
</tr>
<tr>
<td>综合扩展性</td>
<td>低</td>
<td>中</td>
<td>高</td>
</tr>
<tr>
<td>Jupyter Notebook 内支持</td>
<td>是</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>是否完全开源</td>
<td>是</td>
<td>是</td>
<td>部分企业级功能未开源</td>
</tr>
<tr>
<td>github stars</td>
<td>13.4k</td>
<td>23.1k</td>
<td>18.2k</td>
</tr>
</tbody></table>
<h3 id="Gradio"><a href="#Gradio" class="headerlink" title="Gradio"></a>Gradio</h3><p>Gradio 是一个用于快速构建和分享机器学习模型、数据科学项目和 Python 函数交互式用户界面的开源 Python 库。它简化了从模型到应用的过程，使开发者能够轻松地创建一个美观且用户友好的 Web 界面，而无需深入了解复杂的前端开发。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/06/27/AI_ROBOT/ROS_dev/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/27/AI_ROBOT/ROS_dev/" class="post-title-link" itemprop="url">ROS Robot实战（gazebo）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-06-27 00:00:00" itemprop="dateCreated datePublished" datetime="2024-06-27T00:00:00+00:00">2024-06-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Robot/" itemprop="url" rel="index"><span itemprop="name">Robot</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Robot/ROS/" itemprop="url" rel="index"><span itemprop="name">ROS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ROS: 机器人操作系统（Robot Operating  System， ROS）机器人软件框架。</p>
<p>开源社区内的ROS功能包呈指  数级增长， 涉及的应用领域包括轮式机器人、 人形机器人、 工业机器 人、 农业机器人等。</p>
<p>ROS中的功能模块都封装于独立的功能包（Package） 或元功能包（Meta Package）</p>
<p>实验室或者研究机构共同协作来开发机器人软件 。 例如一个拥有室内地图建模领域专家的实验室可能会开发并发布一个先进的地图建模系统； 一个拥有导航方面专家的组织可以使用建模完成的地图进行机器人导航； 另一个专注于机器人视觉的组织可能开发出了一种物体识别的有效方法。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c &#x27;. /etc/lsb-release &amp;&amp; echo \</span><br><span class="line"> &quot;deb http://mirrors.ustc.edu.cn/ros/ubuntu/ $DISTRIB_CODENAME main&quot; \</span><br><span class="line"> /etc/apt/sources.list.d/ros-latest.list&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="2-架构"><a href="#2-架构" class="headerlink" title="2-架构"></a>2-架构</h3><p>架构分层：</p>
<ul>
<li><p>OS层：基于Linux系统的OS层； </p>
</li>
<li><p>中间层：实现ROS核心通信机制以及众多机器人开发库； </p>
</li>
<li><p>应用层：在ROS Master的管理下保证功能节点的正常运行。</p>
</li>
</ul>
<p>ROS的三种通信机制： </p>
<ul>
<li><p>基于发布&#x2F;订阅的话题通信、 </p>
</li>
<li><p>基于客户端&#x2F;服务器的服务通信</p>
</li>
<li><p>基于RPC的参数服务器</p>
</li>
</ul>
<p>系统实现角度，ROS划分三个层次：计算图、 文件系统和 开源社区。其中涵盖了ROS中的关键概念， 如节点、 消息、 话题、 服务、 功能包、 元功能包等。</p>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-27-11-59-14-image.png" title alt width="330">

<p>通信层：</p>
<p>除了TCPROS&#x2F;UDPROS的通信机制外， ROS还提供一种进程内的通信方法——Nodelet， 可以为多进程通信提供一种更优化的数据传输方式， 适合对数据传输实时性方面有较高要求的应用。</p>
<p>在通信机制之上， ROS提供了大量机器人开发相关的库， 如数据类型定义、 坐标变换、 运动控制等， 可以提供给应用层使用。</p>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-27-12-01-48-image.png" title alt width="351">

<h4 id="计算图"><a href="#计算图" class="headerlink" title="计算图"></a>计算图</h4><ul>
<li><p>节点：执行运算任务的进程</p>
</li>
<li><p>消息：支持标准数据类型（整型、 浮点型、 布尔型等） ， 也支持嵌套结构和数组（类似于C语言的结构体struct） ， 还可以根据需求由开发者自主定义。</p>
</li>
<li><p>话题：消息以一种发布&#x2F;订阅（Publish&#x2F;Subscribe） 的方式传递。 </p>
<ul>
<li><p>一个节点可以针对一个给定的话题（Topic） 发布消息（称为发布者&#x2F;Talker） ， </p>
</li>
<li><p>也可以关注某个话题并订阅特定类型的数据（称为订阅者&#x2F;Listener） 。</p>
</li>
<li><p>多对多模式：可以多个Talker，多个Listener</p>
</li>
<li><p>不适合双向的同步传输模式</p>
</li>
</ul>
</li>
<li><p>服务：基于客户端&#x2F;服务器（Client&#x2F;Server） 模型， 包含两个部分的通信数据类型： 一个用于请求， 另一个用于应答， 类似于Web服务器。 </p>
<ul>
<li>与话题不同的是， ROS中只允许有一个节点提供指定命名的服务。</li>
</ul>
</li>
<li><p>ROS Master ：节点管理器</p>
</li>
</ul>
<h4 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h4><ul>
<li><p>Package： 功能包，包含节点，库，配置文件</p>
</li>
<li><p>Package Manifest： package.xml 记录功能包基本信息，作者，许可，依赖，编译标志</p>
</li>
<li><p>Meta Package：组织多个用于同一目地的功能包，例如ROS导航功能包，包含建模，定位，导航等多个功能包</p>
</li>
</ul>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-27-12-10-38-image.png" title alt width="344">

<p>功能包：</p>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-27-12-11-18-image.png" title alt width="311">

<p>1） config： 放置功能包中的配置文件， 由用户创建， 文件名可以不同。<br>2） include： 放置功能包中需要用到的头文件。<br>3） scripts： 放置可以直接运行的Python脚本。<br>4） src： 放置需要编译的C++代码。<br>5） launch： 放置功能包中的所有启动文件。<br>6） msg： 放置功能包自定义的消息类型。<br>7） srv： 放置功能包自定义的服务类型。<br>8） action： 放置功能包自定义的动作指令。<br>9） CMakeLists.txt： 编译器编译功能包的规则。<br>10） package.xml： 功能包清单， 图2-7是一个典型的功能包清单示例。</p>
<h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>catkin_create_pkg</td>
<td>创建功能包</td>
</tr>
<tr>
<td>rospack</td>
<td>获取功能包的信息</td>
</tr>
<tr>
<td>catkin_make</td>
<td>编译工作空间中的功能包</td>
</tr>
<tr>
<td>rosdep</td>
<td>自动安装功能包依赖的其他包</td>
</tr>
<tr>
<td>roscd</td>
<td>功能包目录跳转</td>
</tr>
<tr>
<td>roscp</td>
<td>拷贝功能包中的文件</td>
</tr>
<tr>
<td>rosed</td>
<td>编辑功能包中的文件</td>
</tr>
<tr>
<td>rosrun</td>
<td>运行功能包中的可执行文件</td>
</tr>
<tr>
<td>roslaunch</td>
<td>运行启动文件</td>
</tr>
</tbody></table>
<h4 id="Meta-Package"><a href="#Meta-Package" class="headerlink" title="Meta Package"></a>Meta Package</h4><p>package.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>catkin<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>amcl<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>carrot_planner<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">run_depend</span>&gt;</span>dwa_local_planner<span class="tag">&lt;/<span class="name">run_depend</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">metapackage</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roscd navigation</span><br><span class="line">vim package.xml</span><br></pre></td></tr></table></figure>

<h4 id="社区"><a href="#社区" class="headerlink" title="社区"></a>社区</h4><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-27-14-10-22-image.png" title alt width="321">

<h4 id="通信机制"><a href="#通信机制" class="headerlink" title="通信机制"></a>通信机制</h4><ul>
<li><p>话题通信机制</p>
<ul>
<li>节点建立连接后， 可以关掉ROS Master， 节点之间的数据传输并不<br>会受到影响， 但是其他节点也无法加入这两个节点之间的网络。</li>
</ul>
</li>
<li><p>服务通信机制</p>
</li>
<li><p>参数管理机制RPC</p>
<ul>
<li>不涉及TCP&#x2F;UDP的通信</li>
</ul>
</li>
</ul>
<h4 id="话题服务"><a href="#话题服务" class="headerlink" title="话题服务"></a>话题服务</h4><img title src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-27-14-25-47-image.png" alt width="391">

<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-27-14-26-12-image.png" title alt width="393">

<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-27-14-26-26-image.png" title alt width="392">

<h3 id="3-基础"><a href="#3-基础" class="headerlink" title="3-基础"></a>3-基础</h3><p>1） src： 代码空间（Source Space） ， 开发过程中最常用的文件夹，用来存储所有ROS功能包的源码文件。<br>2） build： 编译空间（Build Space） ， 用来存储工作空间编译过程 中产生的缓存信息和中间文件。<br>3） devel： 开发空间（Development Space） ， 用来放置编译生成的可执行文件。<br>4） install： 安装空间（Install Space） ， 编译成功后， 可以使用make install命令将可执行文件安装到该空间中， 运行该空间中的环境变量脚本， 即可在终端中运行这些可执行文件。 安装空间并不是必需的，很多工作空间中可能并没有该文件夹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> -p ~/catkin_ws/src</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/catkin_ws/src</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">catkin_init_workspace</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/catkin_ws/</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">catkin_make</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">source devel/setup.bash</span><br></pre></td></tr></table></figure>

<p>创建新包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">catkin_create_pkg &lt;package_name&gt; [depend1] [depend2] [depend3]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/catkin_ws/src</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">catkin_create_pkg learning_communication std_msgs rospy roscpp</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建完成后， 代码空间src中会生成一个learning_communication功能</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">包， 其中已经包含package.xml和CMakeLists.txt文件。</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/catkin_ws</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">catkin_make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> ~/catkin_ws/devel/setup.bash</span></span><br></pre></td></tr></table></figure>

<h4 id="小乌龟仿真"><a href="#小乌龟仿真" class="headerlink" title="小乌龟仿真"></a>小乌龟仿真</h4><p>键盘控制一只小乌龟在界面中移动，而且会接触到第一个ROS功能包——turtlesim。 </p>
<p>该功能包的核心是turtlesim_node节点， 提供一个可视化的乌龟仿真器， 可以实现很多ROS基础功能的测试。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装依赖</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install ros-kinetic-turtlesim</span></span><br><span class="line">sudo apt-get install ros-noetic-turtlesim</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">master</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roscore</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">rosrun (可视化仿真器界面)</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun turtlesim turtlesim_node</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">rosrun 新终端， 运行键盘控制的节点</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun turtlesim turtle_teleop_key</span></span><br></pre></td></tr></table></figure>

<h4 id="Publisher-Subscriber"><a href="#Publisher-Subscriber" class="headerlink" title="Publisher&#x2F;Subscriber"></a>Publisher&#x2F;Subscriber</h4><h4 id="Server-Client"><a href="#Server-Client" class="headerlink" title="Server&#x2F;Client"></a>Server&#x2F;Client</h4><h4 id="多机器通信"><a href="#多机器通信" class="headerlink" title="多机器通信"></a>多机器通信</h4><p>master_URI&#x3D;ip:11311</p>
<h3 id="4-组件"><a href="#4-组件" class="headerlink" title="4-组件"></a>4-组件</h3><ul>
<li><p>launch文件</p>
</li>
<li><p>TF坐标转换</p>
</li>
<li><p>Qt工具箱</p>
</li>
<li><p>rviz三维可视化平台</p>
</li>
<li><p>gazebo仿真环境</p>
</li>
<li><p>rosbag数据记录与回放</p>
</li>
</ul>
<h4 id="launch启动文件"><a href="#launch启动文件" class="headerlink" title="launch启动文件"></a>launch启动文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;package-name&quot;</span> <span class="attr">type</span>=<span class="string">&quot;executable-name&quot;</span> <span class="attr">name</span>=<span class="string">&quot;node-name&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;output_frame&quot;</span> <span class="attr">value</span>=<span class="string">&quot;odom&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">file</span>=<span class="string">&quot;$(find 2dnav_pr2)/config/costmap_common_params.yaml&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">command</span>=<span class="string">&quot;load&quot;</span> <span class="attr">ns</span>=<span class="string">&quot;local_cos&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;arg-name&quot;</span> <span class="attr">default</span>= <span class="string">&quot;arg-value&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;foo&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg arg-name)&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;node&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;package&quot;</span> <span class="attr">type</span>=<span class="string">&quot;type &quot;</span> <span class="attr">args</span>=<span class="string">&quot;$(arg arg-name)&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--# 重映射机制--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;turtlebot/cmd_wel&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/cmd_wel&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>嵌套使用</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(dirname)/other.launch&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="TF工具"><a href="#TF工具" class="headerlink" title="TF工具"></a>TF工具</h4><p>tf_monitor</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">tf_monitor</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">tf_monitor  &lt;source_target&gt;    &lt;target_target&gt;</span></span><br></pre></td></tr></table></figure>

<p>tf_echo: 查看指定坐标系之间的变换关系</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">tf_echo  &lt;source_frame&gt;   &lt;target_frame&gt;</span></span><br></pre></td></tr></table></figure>

<p>static_transform_publisher</p>
<ul>
<li>发布两个坐标系之间的静态左边变换</li>
</ul>
<p>view_frames</p>
<ul>
<li><p>可视化调试工具，生成pdf</p>
</li>
<li><pre><code class="language-shell">$rosrun tf view_frames

# 查看TF树信息
$evince frames.pdf
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### QT工具</span><br><span class="line"></span><br><span class="line">#### Rviz可视化</span><br><span class="line"></span><br><span class="line">#### Gazebo仿真环境</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line"># Install</span><br><span class="line">sudo apt-get install ros-kinetic-gazebo-ros-pkgs  \</span><br><span class="line">    ros-kinetic-gazebo-ros-control</span><br><span class="line"></span><br><span class="line"># start ros gazebo</span><br><span class="line">roscore</span><br><span class="line">rosrun gazebo_ros gazebo</span><br><span class="line"></span><br><span class="line">rostopic list # 查看gazebo的topic</span><br><span class="line"></span><br><span class="line">rosservice list # 查看gazebo的服务</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p>模型的加载需要连接国外网站， 为了保证模型顺利加载， 可以提前将模型文件下载并放置到本地路径~&#x2F;.gazebo&#x2F;models下， 模型文件的下载地址： </p>
<p><a target="_blank" rel="noopener" href="https://github.com/osrf/gazebo_models">GitHub - osrf&#x2F;gazebo_models: Gazebo database of SDF models. This is a predecessor to https://app.gazebosim.org</a></p>
<h4 id="rosbag数据记录和回放"><a href="#rosbag数据记录和回放" class="headerlink" title="rosbag数据记录和回放"></a>rosbag数据记录和回放</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">首先启动键盘控制乌龟例程所需的所有节点：</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">roscore</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosrun turtlesim turtlesim_node</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosrun turtlesim turtle_teleop_key</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">移动操作一会</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rostopic list -v</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">抓取日志</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> ~/bagfiles</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> ~/bagfiles</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosbag record -a</span></span><br><span class="line"></span><br><span class="line">回放数据</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosbag info &lt;your bagfile&gt;</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosbag play &lt;your bagfile&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-ROBOT平台搭建"><a href="#5-ROBOT平台搭建" class="headerlink" title="5-ROBOT平台搭建"></a>5-ROBOT平台搭建</h3><p>什么是机器人？ 一个完整的机器人系统包含哪些部分？</p>
<p>如何构建一个真实的机器人系统？ 学习完本章内容后， 你就会有答案了</p>
<ul>
<li><p>如何驱动USB摄像头和RGB-D摄像头，</p>
</li>
<li><p>通过ROS提供的工具将这些图像数据显示出来。</p>
</li>
</ul>
<p>控制系统</p>
<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-28-09-44-52-image.png"></p>
<p>嵌入式系统的选择有很多， 比如常用的Raspberry Pi、 TK1、RK3288、 Odroid、 Arduino等</p>
<h4 id="Raspberry-PI控制系统"><a href="#Raspberry-PI控制系统" class="headerlink" title="Raspberry PI控制系统"></a>Raspberry PI控制系统</h4><p><a target="_blank" rel="noopener" href="https://cdimage.ubuntu.com/releases/20.04.5/release/">Ubuntu 20.04.5 LTS (Focal Fossa)</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/dajianli/mrobot">GitHub - dajianli&#x2F;mrobot: mrobot ros package</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>安装ROS</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-kinetic-ros-base</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装rosdep工具。</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> rosdep init</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosdep update</span></span><br><span class="line"></span><br><span class="line">echo &quot;source /opt/ros/noetic/setup.bash&quot; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">QT 图像显示工具--订阅图像topic</span></span><br><span class="line">rqt_image_view</span><br></pre></td></tr></table></figure>

<p>mrobot_teleop</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roscore (PC)</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_bringup mrobot.launch (Raspberry Pi)</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun mrobot_teleop mrobot_teleop.py (PC)</span></span><br></pre></td></tr></table></figure>

<p>5.6 摄像头</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install ros-kinetic-usb-cam</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">驱动摄像头</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch usb_cam usb_cam-test.launch</span></span><br></pre></td></tr></table></figure>

<h3 id="6-ROBOT建模，仿真"><a href="#6-ROBOT建模，仿真" class="headerlink" title="6-ROBOT建模，仿真"></a>6-ROBOT建模，仿真</h3><p>大纲：</p>
<ul>
<li><p>URDF</p>
</li>
<li><p>xacro优化模型</p>
</li>
<li><p><code>&lt;gazebo&gt;</code> 标签，传感器，转动结构等仿真</p>
</li>
<li><p>rviz + ArbotiX 仿真环境，机器人控制等仿真</p>
</li>
<li><p>ros_control 在Gazebo物理仿真创建世界，仿真</p>
</li>
</ul>
<h4 id="6-1-URDF语法"><a href="#6-1-URDF语法" class="headerlink" title="6.1 URDF语法"></a>6.1 URDF语法</h4><p>（Unified Robot Description Format， 统一机器人描述格式）</p>
<p><strong>link（刚体）</strong></p>
<p><code>&lt;link&gt;</code>标签用于描述机器人某个刚体部分的外观和物理属性，<br>包括尺寸（size） 、 颜色（color） 、 形状（shape） 、 惯性矩阵（inertial  matrix） 、 碰撞参数（collision properties）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">inertial</span>&gt;</span>惯性<span class="tag">&lt;/<span class="name">inertail</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">visual</span>&gt;</span><span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collision</span>&gt;</span>碰撞属性<span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>joint（关节）</strong></p>
<p>描述机器人关节的运动学和动力学属性， 包括关节运动的位置和速度限制。</p>
<table>
<thead>
<tr>
<th>关节类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>continuous</td>
<td>旋转关节，可以围绕单轴无限旋转</td>
</tr>
<tr>
<td>revolute</td>
<td>旋转关节，类似于continuous,但是有旋转的角度极限</td>
</tr>
<tr>
<td>prismatic</td>
<td>滑动关节，沿某一轴线移动的关节，带有位置极限</td>
</tr>
<tr>
<td>planar</td>
<td>平面关节，允许在平面正交方向上平移或者旋转</td>
</tr>
<tr>
<td>floating</td>
<td>浮动关节，允许进行平移、旋转运动</td>
</tr>
<tr>
<td>fixed</td>
<td>固定关节，不允许运动的特殊关节</td>
</tr>
</tbody></table>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-28-11-19-59-image.png" title alt width="424">

<p>与人的关节一样， 机器人关节的主要作用是连接两个刚体link， 这两个link分别称为parent link和child link，</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;&lt;name of the joint&gt;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;parent_link&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;child_link&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">calibration</span> <span class="attr">....</span> /&gt;</span>  位置</span><br><span class="line">    <span class="tag">&lt;<span class="name">dynamics</span> <span class="attr">damping</span> <span class="attr">....</span>/&gt;</span>  物理属性</span><br><span class="line">    <span class="tag">&lt;<span class="name">limit</span> <span class="attr">effort</span> <span class="attr">....</span> /&gt;</span> 极限值</span><br><span class="line">    ....</span><br><span class="line"><span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其中必须指定joint的parent link和child link， 还可以设置关节的其他属性。<br>·<calibration>： 关节的参考位置， 用来校准关节的绝对位置。<br>·<dynamics>： 用于描述关节的物理属性， 例如阻尼值、 物理静摩擦力等， 经常在动力学仿真中用到。<br>·<limit>： 用于描述运动的一些极限值， 包括关节运动的上下限位置、 速度限制、 力矩限制等。<br>·<mimic>： 用于描述该关节与已有关节的关系。<br>·<safety_controller>： 用于描述安全控制器参数。</safety_controller></mimic></limit></dynamics></calibration></p>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-06-28-11-23-04-image.png" title alt width="310">

<p><strong>robot</strong></p>
<p>最顶层标签， <link>和<joint>标签都必须包含在<robot>标签内。</robot></joint></p>
<p><strong>gazebo</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;link_1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Black<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-2-创建URDF模型"><a href="#6-2-创建URDF模型" class="headerlink" title="6.2 创建URDF模型"></a>6.2 创建URDF模型</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">catkin_create_pkg  mrobot_description urdf xacro</span></span><br></pre></td></tr></table></figure>

<p>mrobot_description功能包含urdf，meshes，launch和config文件夹</p>
<ul>
<li><p>urdf:  存放URDF或 xacro文件</p>
</li>
<li><p>meshes： 模型渲染文件</p>
</li>
<li><p>launch： 启动文件</p>
</li>
<li><p>config： rviz配置文件</p>
</li>
</ul>
<p>MRobot底盘模型有7个link和6个joint。7个link包含1个底盘，2个电机，2个驱动轮，2个万向轮‘；6个joint负责连接各个组件到底盘上；</p>
<p>模型文件mrobot_description&#x2F;urdf&#x2F;mrobot_chassis.urdf</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;mrobot_chassis&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_link&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">origin</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Left motor --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;left_motor&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Left wheel --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- right motor --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>检查URDF模型整体结构(生成pdf文件)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">apt install liburdfdom-tools</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">check_urdf mrobot_chassis.urdf</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">urdf_to_graphiz mrobot_chassis.urdf</span></span><br></pre></td></tr></table></figure>

<p>模型解析</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- motor wheel joint  (type=?)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;left_wheel_joint&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0.0485 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;0 0 0&quot;</span> /&gt;</span> <span class="comment">&lt;!--起点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;left_motor&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;left_wheel_link&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;0 1 0&quot;</span> /&gt;</span>   <span class="comment">&lt;!--只围绕y轴旋转--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>viza显示模型</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">textfile</span>=<span class="string">&quot;$(find mrobot_description)/urdf/mrobot_chassis.urdf&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 设置GUI参数，显示关节控制插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;use_gui&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 运行joint_state_publisher node, 发布robot的关节状态 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;joint_state_publisher&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;joint_state_publisher&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 运行joint_state_publisher node, 发布TF --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;robot_state_publisher&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>= <span class="string">&quot;robot_state_publisher&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 运行rviz可视化界面--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">type</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">args</span>=<span class="string">&quot;-d $(find </span></span></span><br><span class="line"><span class="string"><span class="tag">              mrobot_description/config/morobot_urdf.rviz&quot;</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">required</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>img </p>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-01-10-38-36-image.png" title alt width="362">

<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-01-15-46-30-image.png" title alt width="364">

<h4 id="6-3-模型xacro优化"><a href="#6-3-模型xacro优化" class="headerlink" title="6.3 模型xacro优化"></a>6.3 模型xacro优化</h4><p>xacro</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将xacro文件转换成URDF文件</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## $rosrun xacro xacro.py mrobot.urdf.xacro &gt; mrobot.urdf (Fail)</span></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun xacro xacro mrobot.urdf.xacro &gt; mrobot.urdf</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span></span><br></pre></td></tr></table></figure>

<p>直接调用xacro文件解析器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;model&quot;</span> <span class="attr">default</span>=<span class="string">&quot;$(find xacro)/xacro --inorder </span></span></span><br><span class="line"><span class="string"><span class="tag">          &#x27;$(find mrobot_description)/urdf/mrobot.&#x27;&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&#x27;robot_description&#x27;</span> <span class="attr">command</span>=<span class="string">&#x27;$(arg model)&#x27;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-03-19-29-52-image.png" title alt width="453">

<ul>
<li>注意：xacro定义的组件，使用时需要加xacro命名空间（ROS2)</li>
</ul>
<h4 id="6-4-传感器添加"><a href="#6-4-传感器添加" class="headerlink" title="6.4 传感器添加"></a>6.4 传感器添加</h4><ul>
<li>注意：name&#x3D;“ ”不要有空格</li>
</ul>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-03-19-35-43-image.png" title alt width="455">

<p><img title src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-03-20-13-51-image.png" alt width="225"><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-03-20-13-25-image.png" title alt width="204"></p>
<h4 id="6-5-Arbox-rviz"><a href="#6-5-Arbox-rviz" class="headerlink" title="6.5 Arbox+rviz"></a>6.5 Arbox+rviz</h4><p>ArbotiX是一款控制电机、 舵机的控制板， 并提供相应的ROS功能包， 但是这个功能包的功能不仅可以驱动真实的ArbotiX控制板， 它还提供一个差速控制器， 通过接收速度控制指令更新机器人的joint状态，从而帮助我们实现机器人在rviz中的运动。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install ros-noetic-arbotix</span><br><span class="line">apt install ros-noetic-arbotix-*</span><br></pre></td></tr></table></figure>

<p><strong>配置arbotix</strong></p>
<ul>
<li><p>创建launch文件</p>
</li>
<li><p>创建配置文件（控制器）</p>
</li>
<li><p>运行仿真</p>
<ul>
<li><code>roslaunch mrobot_description arbotix_mrobot_with_kinect.launch</code></li>
</ul>
</li>
<li><p>话题cmd_vel （tostopic list）</p>
</li>
<li><p>控制运行（键盘）</p>
<ul>
<li><code>roslaunch mrobot_teleop mrobot_teleop.launch</code></li>
</ul>
</li>
</ul>
<p>此时rviz中设置的“Fixed Frame”是odom， 也就是机器人的里程计坐 标系。 这是一个全局坐标系， 通过里程计记录机器人当前的运动位姿，从而更新rviz中的模型状态。 </p>
<p>rviz+ArbotiX可以构建一个较为简单的运动仿真器， 在本书后续内  容中还会多次使用这个仿真器实现导航等功能。 除此之外， ROS还集成 了更为强大的物理仿真平台——Gazebo， 可以做到类似真实机器人的高度仿真状态， 包括物理属性、 传感器数据、 环境模型等</p>
<p><strong>mrobot_teleop.launch</strong></p>
<ul>
<li>控制模块</li>
</ul>
<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-09-19-59-05-image.png"></p>
<h4 id="6-6-ros-control"><a href="#6-6-ros-control" class="headerlink" title="6.6 ros_control"></a>6.6 ros_control</h4><p>针对不同类型的机器人（移动机器人、 机械臂等），ros_control可以提供多种类型的控制器（controller） ， 但是这些控制器的接口各不相同。 为了提高代码的复用率， ros_control还提供一个硬件抽象层， 负责机器人硬件资源的管理， 而controller从抽象层请求资源即可， 并不直接接触硬件。</p>
<p><strong>1 框架</strong></p>
<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-04-11-28-06-image.png"></p>
<p>（1） 控制器管理器（Controller Manager）</p>
<p>        提供一种通用的接口来管理不同的控制器。 控制器管理器的输入就是ROS上层应用功能包的输出。</p>
<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-04-11-30-21-image.png"></p>
<p>（2） 控制器（Controller）</p>
<p>控制器可以完成每个joint的控制， 读取硬件资源接口中的状态， 再发布控制命令， 并且提供PID控制器。</p>
<p>（3） 硬件资源（Hardware Resource）<br>            为上下两层提供硬件资源的接口。  </p>
<p>（4） 机器人硬件抽象（RobotHW）</p>
<p>            机器人硬件抽象和硬件资源直接打交道， 通过write和read方法完成硬件操作， 这一层也包含关节约束、 力矩转换、 状态转换等功能。</p>
<p>（5） 真实机器人（Real Robot）  </p>
<p>        真实机器人上也需要有自己的嵌入式控制器， 将接收到的命令反映到执行器上， 比如接收到旋转90度的命令后， 就需要让执行器快速、 稳定地旋转90度。</p>
<p><strong>2 控制器</strong></p>
<p>目前ROS中的ros_controllers功能包提供了以下控制器（见图6-19） 。  </p>
<ul>
<li><p>effort_controllers  </p>
</li>
<li><p>joint_effort_controller  </p>
</li>
<li><p>joint_position_controller  </p>
</li>
<li><p>joint_velocity_controller  </p>
</li>
<li><p>joint_state_controller  </p>
</li>
<li><p>joint_state_controller  </p>
</li>
<li><p>position_controllers  </p>
</li>
<li><p>joint_position_controller  </p>
</li>
<li><p>velocity_controllers  </p>
</li>
<li><p>joint_velocity_controller</p>
</li>
</ul>
<p>当然， 我们也可以根据自己的需求创建需要的控制器， 然后通过控  制器管理器来管理自己创建的控制器。 创建控制器的具体方法可以参考 wiki：<a target="_blank" rel="noopener" href="https://github.com/ros-controls/ros_control/wiki/controller_interface">controller_interface</a></p>
<p><strong>3 硬件接口</strong></p>
<p>硬件接口是控制器和RobotHW沟通的接口， 基本与控制器的种类相互对应（见图6-20） ， 同样可以自己创建需要的接口， 具体实现方法可以参考wiki： <a target="_blank" rel="noopener" href="https://github.com/roscontrols/ros_control/wiki/hardware_interface">wiki-hardware_interface</a></p>
<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-04-17-26-04-image.png"></p>
<p><strong>4 传动系统</strong></p>
<p>传动系统（Transmission） 可以将机器人的关节指令转换成执行器的控制信号。 机器人每个需要运动的关节都需要配置相应的传动系统。可以在机器人的URDF模型文件中按照以下方法配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transmission</span> <span class="attr">name</span>=<span class="string">&quot;simple_trans&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>transmission_interface/SimpleTransmission<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;foo_joint&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">hardwareInterface</span>&gt;</span>EffortJointInterface<span class="tag">&lt;/<span class="name">hardwareInterface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">actuator</span> <span class="attr">name</span>=<span class="string">&quot;foo_motor&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mechanicalReduction</span>&gt;</span>50<span class="tag">&lt;/<span class="name">mechanicalReduction</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hardwareInterface</span>&gt;</span>EffortJointInterface<span class="tag">&lt;/<span class="name">hardwareInterface</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">actuator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transmission</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>5 关节约束</strong></p>
<p>关节约束（Joint Limits） 是硬件抽象层中的一部分， 维护一个关节约束的数据结构， </p>
<ul>
<li><p>这些约束数据可以从机器人的URDF文件中加载， </p>
</li>
<li><p>也可以在ROS的参数服务器上加载（需要先用YAML配置文件导入ROS参数服务器） ， </p>
</li>
<li><p>不仅包含关节速度、 位置、 加速度、 加加速度、 力矩等方面的约束， </p>
</li>
<li><p>还包含起安全作用的位置软限位、 速度边界（k_v） 和位置边界（k_p） 等</p>
</li>
</ul>
<p>URDF</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;$foo_joint&quot;</span> <span class="attr">type</span>=<span class="string">&quot;revolute&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- other joint description elements --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Joint limits --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">limit</span> <span class="attr">lower</span>=<span class="string">&quot;0.0&quot;</span> <span class="attr">upper</span>=<span class="string">&quot;1.0&quot;</span> <span class="attr">effort</span>=<span class="string">&quot;10.0&quot;</span> <span class="attr">xxx</span>=<span class="string">&quot;5.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Soft limits --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">safety_controller</span> <span class="attr">k_position</span>=<span class="string">&quot;100&quot;</span> <span class="attr">k_velocity</span>=<span class="string">&quot;10&quot;</span> </span></span><br><span class="line"><span class="tag">                       <span class="attr">soft_lower_limit</span>=<span class="string">&quot;0.1&quot;</span> <span class="attr">soft_upper_limit</span>=<span class="string">&quot;0.9&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>YAML参数服务器</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">joint_limits:</span></span><br><span class="line">  <span class="attr">foo_joint:</span></span><br><span class="line">    <span class="attr">has_position_limits:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">min_position:</span> <span class="number">0.0</span></span><br><span class="line">    <span class="attr">max_position:</span> <span class="number">1.0</span></span><br><span class="line">    <span class="attr">has_velocity_limits:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">max_velocity:</span> <span class="number">2.0</span></span><br><span class="line">    <span class="attr">has_acceleration_limits:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">max_acceleration:</span> <span class="number">5.0</span></span><br><span class="line">    <span class="attr">has_jerk_limits:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">max_jerk:</span> <span class="number">100.0</span></span><br><span class="line">    <span class="attr">has_effort_limits: truemax_effort:</span> <span class="number">5.0</span></span><br><span class="line">  <span class="attr">bar_joint:</span></span><br><span class="line">    <span class="attr">has_position_limits:</span> <span class="literal">false</span> <span class="comment"># Continuous joint</span></span><br><span class="line">    <span class="attr">has_velocity_limits:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">max_velocity:</span> <span class="number">4.0</span></span><br></pre></td></tr></table></figure>

<p><strong>6 控制器管理器</strong></p>
<p>controller_manager提供了一种多控制器控制的机制， 可以实现控制器的加载、 开始运行、 停止运行、 卸载等多种操作。</p>
<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-04-20-14-03-image.png"></p>
<p>6.1 命令行工具</p>
<p>管理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun controller_manager controller_manager &lt;<span class="built_in">command</span>&gt; &lt;controller_name&gt;</span></span><br><span class="line">支持的&lt;command&gt;如下：</span><br><span class="line">·load： 加载一个控制器。·unload： 卸载一个控制器。</span><br><span class="line">·start： 启动控制器。</span><br><span class="line">·stop： 停止控制器。</span><br><span class="line">·spawn： 加载并启动一个控制器。</span><br><span class="line">·kill： 停止并卸载一个控制器</span><br></pre></td></tr></table></figure>

<p>查看命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun controller_manager controller_manager &lt;<span class="built_in">command</span>&gt;</span></span><br><span class="line">支持的&lt;command&gt;如下：</span><br><span class="line">·list： 根据执行顺序列出所有控制器， 并显示每个控制器的状态。</span><br><span class="line">·list-types： 显示所有控制器的类型。</span><br><span class="line">·reload-libraries： 以插件的形式重载所有控制器的库， 不需要重新启动， 方便对控制器的开发和测试。</span><br><span class="line">·reload-libraries--restore： 以插件的形式重载所有控制器的库， 并恢复到初始状态。</span><br></pre></td></tr></table></figure>

<p>spawner命令一次控制多个控制器：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun controller_manager spawner [--stopped] name1 name2 name3</span></span><br><span class="line"></span><br><span class="line">上面的命令可以自动加载、 启动控制器， 如果加上--stopped参数，那么控制器则只会被加载， </span><br><span class="line">但是并不会开始运行。</span><br><span class="line"></span><br><span class="line">如果想要停止一系列控制器， 但是不需要卸载， 可以使用如下命令：</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun controller_manager unspawner name1 name2 name3</span></span><br></pre></td></tr></table></figure>

<p>6.2 launch工具</p>
<p>在launch文件中， 同样可以通过运行controller_manager命令， 加载 和启动一系列控制器：  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;controller_manager&quot;</span> <span class="attr">type</span>=<span class="string">&quot;spawner&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">args</span>=<span class="string">&quot;controller_name1 controller_name2&quot;</span> /&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<p>以上launch文件会加载并启动controller， 如果只需加载不必启动，可以使用以下配置：  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;controller_manager&quot;</span> <span class="attr">type</span>=<span class="string">&quot;spawner&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">args</span>=<span class="string">&quot;--stopped controller_name1 controller_name&quot;</span>  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>6.3.可视化工具rqt_controller_manager</p>
<p>controller_manager还提供了可视化工具rqt_controller_manager， 安装成功后， 直接使用以下命令即可打开界面：  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun rqt_controller_manager rqt_controller_manager</span></span><br></pre></td></tr></table></figure>

<h4 id="6-7-Gazebo仿真"><a href="#6-7-Gazebo仿真" class="headerlink" title="6.7 Gazebo仿真"></a>6.7 Gazebo仿真</h4><h5 id="6-7-1-添加Gazebo属性"><a href="#6-7-1-添加Gazebo属性" class="headerlink" title="6.7.1 添加Gazebo属性"></a>6.7.1 添加Gazebo属性</h5><p><strong>link ADD <gazebo></gazebo></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">gazebo</span> <span class="attr">reference</span>=<span class="string">&quot;wheel_$&#123;lr&#125;_link&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">material</span>&gt;</span>Gazebo/Black<span class="tag">&lt;/<span class="name">material</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>传动装置添加</strong></p>
<p>为了使用ROS控制器驱动机器人， 需要在模型中加入<transmission> 元素， 将传动装置与joint绑定：</transmission></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transmission</span> <span class="attr">name</span>=<span class="string">&quot;wheel_$&#123;lr&#125;_joint_trans&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>transmission_interface/SimpleTransmission<span class="tag">&lt;/<span class="name">type</span>&gt;</span> <span class="comment">&lt;!--传动装置类型--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;base_to_wheel_$&#123;lr&#125;_joint&quot;</span> /&gt;</span> <span class="comment">&lt;!--要绑定驱动器的joint--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">actuator</span> <span class="attr">name</span>=<span class="string">&quot;wheel_$&#123;lr&#125;_joint_motor&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 硬件接口的类型， 这里使用的是速度控制接口 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hardwareInterface</span>&gt;</span>VelocityJointInterface<span class="tag">&lt;/<span class="name">hardwareInterface</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mechanicalReduction</span>&gt;</span>1<span class="tag">&lt;/<span class="name">mechanicalReduction</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">actuator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transmission</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>控制器插件-（使静态模型，动起来）</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- （ 1） 为&lt;robot&gt;元素添加插件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">gazebo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">&quot;unique_name&quot;</span> <span class="attr">filename</span>=<span class="string">&quot;plugin_name.so&quot;</span>&gt;</span></span><br><span class="line">    ... plugin parameters ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--至于Gazebo目前支持的插件种类， 可以查看ROS默认安装路径下的</span></span><br><span class="line"><span class="comment">/opt/ros/kinetic/lib文件夹， 所有插件都是以libgazeboXXX.so的形式命名的。--&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用xacro设计的机器人URDF模型已经描述了机器人的外观特征和物理特性， 虽然已经具备在Gazebo中仿真的基本条件， 但是， 由于没有 在模型中加入Gazebo的相关属性， 还是无法让模型在Gazebo仿真环境中动起来。 那么如何开始仿真呢？  </p>
<p>首先我们需要确保每个link的<inertia>元素已经进行了合理的设置， 然后要为每个必要的<link>、 <joint>、 <robot>设置<gazebo>标签。 <gazebo>标签是URDF模型中描述gazebo仿真时所需要的扩展属性。</gazebo></gazebo></robot></joint></inertia></p>
<h5 id="6-7-2-在Gazebo中显示机器人模型"><a href="#6-7-2-在Gazebo中显示机器人模型" class="headerlink" title="6.7.2 在Gazebo中显示机器人模型"></a>6.7.2 在Gazebo中显示机器人模型</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置launch文件的参数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;world_name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(find mrobot_gazebo)/worlds/playground.world&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;paused&quot;</span> <span class="attr">default</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;use_sim_time&quot;</span> <span class="attr">default</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;gui&quot;</span> <span class="attr">default</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;headless&quot;</span> <span class="attr">default</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;debug&quot;</span> <span class="attr">default</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 运行Gazebo仿真环境 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;world_name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg world_name)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;debug&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg debug)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;gui&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg gui)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;paused&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg paused)&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;use_sim_time&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg use_sim_time)&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;headless&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg headless)&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 加载机器人模型描述参数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">command</span>=<span class="string">&quot;$(find xacro)/xacro --inorder </span></span></span><br><span class="line"><span class="string"><span class="tag">            &#x27;$(find mrobot_gazebo) &quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 运行joint_state_publisher节点， 发布机器人的关节状态 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;joint_state_publisher&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;joint_state_publisher&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;joint_state_publisher&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 运行robot_state_publisher节点， 发布TF --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;robot_state_publisher&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;robot_state_publisher&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;robot_state_publisher&quot;</span> /&gt;</span>&quot;</span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;publish_frequency&quot;</span> <span class="attr">type</span>=<span class="string">&quot;double&quot;</span> <span class="attr">value</span>=<span class="string">&quot;50.0&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在gazebo中加载机器人模型--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;urdf_spawner&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;gazebo_ros&quot;</span> <span class="attr">type</span>=<span class="string">&quot;spawn_model&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">respawn</span>= <span class="string">&quot;false&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">args</span>=<span class="string">&quot;-urdf -model mrobot -param robot_description&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>launch文件的2个作用：</p>
<p>1） 启动机器人的状态发布节点， 同时加载带有Gazebo属性的机器人URDF模型。<br>2） 启动Gazebo， 并且将机器人模型加载到Gazebo仿真环境中。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cd src</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">catkin_create_pkg robot_package roscpp rospy std_msgs sensor_msgs</span> </span><br><span class="line">                    gazebo_ros gazebo_plugins gazebo_ros_control</span><br><span class="line"></span><br><span class="line">cd ../</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">catkin_make</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo view_mrobot_gazebo.launch</span></span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-08-16-02-23-image.png"></p>
<h5 id="6-7-3-control-Gazebo"><a href="#6-7-3-control-Gazebo" class="headerlink" title="6.7.3 control Gazebo"></a><strong>6.7.3 control Gazebo</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">catkin_create_pkg mrobot_teleop geometry_msgs  roscpp  rospy</span></span><br><span class="line">cd ../</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">catkin_make</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_teleop mrobot_teleop.launch</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ERR: /usr/bin/env: ‘python’: No such file or directory</span><br><span class="line"></span><br><span class="line">1. 安装依赖</span><br><span class="line">apt install python3-rosinstall</span><br><span class="line">apt install python-setuptools</span><br><span class="line">2. ln软连接 </span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-09-15-49-32-image.png"></p>
<h5 id="6-7-4-摄像头仿真"><a href="#6-7-4-摄像头仿真" class="headerlink" title="6.7.4  摄像头仿真"></a>6.7.4  摄像头仿真</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo view_mrobot_with_camera_gazebo.launch</span></span><br><span class="line"></span><br><span class="line">sudo apt-get install ros-noetic-rqt-image-view</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rqt_image_view</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">仿真摄像头发布的图像话题/camera/image_raw</span></span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-15-21-53-26-image.png"><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-15-21-52-57-image.png" title alt width="331"></p>
<h5 id="6-7-5-Kinect-方法"><a href="#6-7-5-Kinect-方法" class="headerlink" title="6.7.5 Kinect 方法"></a>6.7.5 Kinect 方法</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo view_mrobot_with_kinect_gazebo.launch</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun rviz rviz</span></span><br></pre></td></tr></table></figure>

<p><img title src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-15-17-28-52-image.png" alt width="268"><img title src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-15-17-29-43-image.png" alt width="318"></p>
<h5 id="6-7-6-激光雷达仿真"><a href="#6-7-6-激光雷达仿真" class="headerlink" title="6.7.6 激光雷达仿真"></a>6.7.6 激光雷达仿真</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo view_mrobot_with_laser_gazebo.launch</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun rviz rviz</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在rviz中设置“Fixed Frame”为“base_footprint”， 然后添加一个</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">LaserScan类型的插件， 修改插件订阅的话题为“/scan”， 就可以看到界面</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">中的激光数据了（见图6-33）</span></span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-15-17-37-38-image.png" title alt width="297"><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-15-17-37-07-image.png" title alt width="269"></p>
<h4 id="6-8-小结"><a href="#6-8-小结" class="headerlink" title="6.8 小结"></a>6.8 小结</h4><ul>
<li><p>URDF文件创建机器人模型</p>
</li>
<li><p>xacro优化模型</p>
</li>
<li><p>riviz+arbotiX或Gazebo仿真环境</p>
</li>
</ul>
<h3 id="7-机器视觉"><a href="#7-机器视觉" class="headerlink" title="7-机器视觉"></a>7-机器视觉</h3><p>ROS中的功能包实现以下常用的机器视觉应用。</p>
<ul>
<li><p><input disabled type="checkbox"> 
摄像机标定：camera_calibrationg功能包实现单目和双目摄像头标定。</p>
</li>
<li><p><input disabled type="checkbox"> 
基于opencv的人脸识别和物体跟踪：ROS的cv_bridge功能包为两者提供了接口，赋予ROS应用强大的图形处理能力</p>
</li>
<li><p><input disabled type="checkbox"> 
二维码识别：ar_track_alvar功能包允许我们创建许多二维码标签，可以使用摄像头或kinect实现二维码的识别与定位。</p>
</li>
<li><p><input disabled type="checkbox"> 
物体识别 ORK是ROS的物体识别框架，提供了多种物体识别的方法， 需要将已知的物体模型进行训练，通过模式匹配的方式识别三维物体的位置</p>
</li>
</ul>
<h4 id="7-1-图像数据"><a href="#7-1-图像数据" class="headerlink" title="7.1 图像数据"></a>7.1 图像数据</h4><ul>
<li><p>二维图像数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch usb_cam usb_camera-test.launch</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rostopic info /usb_cam/image_raw</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosmsg shwo sensor_msgs/Image</span></span><br><span class="line">- header</span><br><span class="line">- height</span><br><span class="line">- width</span><br><span class="line">- encoding</span><br><span class="line">- is_bigendian</span><br><span class="line">- step 一行图像数据的字节数量， 作为数据的步长参数， 这里使</span><br><span class="line">        用的摄像头为width×3=1280×3=3840字节。</span><br><span class="line">- data 存储图像数据的数组， 大小为step×height字节， </span><br><span class="line">        根据该公式可以算出这里使用的摄像头产生一帧图像的数据大小是：</span><br><span class="line">        3840×720=2764800字节， 即2.7648MB</span><br><span class="line"></span><br><span class="line">一帧720×1280分辨率的图像数据量就是2.76MB， 如果按照30帧/秒的帧率计算，</span><br><span class="line"> 那么一秒钟摄像头产生的数据量就高达82.944MB</span><br></pre></td></tr></table></figure>

<p>压缩后的数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ROS也设计了压缩图像的消息类型——sensor_msgs/CompressedImage</span><br><span class="line">- header</span><br><span class="line">- data</span><br><span class="line">- format</span><br></pre></td></tr></table></figure>
</li>
<li><p>三维点云数据</p>
<ul>
<li><p>kinect数据显示中，rviz订阅camera&#x2F;depth_registered&#x2F;points话题后，显示的三维点云数据，查看命令：</p>
</li>
<li><pre><code class="language-shell">$rostopic info /camera/depth_registered/points

$rosmsg show sensor_msgs/PointClound2
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  - &lt;img src=&quot;ROS_dev/2024-07-15-19-24-48-image.png&quot; title=&quot;&quot; alt=&quot;&quot; width=&quot;209&quot;&gt;</span><br><span class="line"></span><br><span class="line">### 7.2 摄像机标定</span><br><span class="line"></span><br><span class="line">ROS官方提供了用于双目和 单目摄像头标定的功能包——camera_calibration。</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">apt install ros-xxx-camera-calibration</span><br><span class="line"></span><br><span class="line"># 标定靶 robot_vision/doc/checkerboard.pdf</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-15-19-26-29-image.png" title alt width="333">

<p>2.2 启动标定程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">usb摄像头启动</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision usb_cam.launch</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动标定程序</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun camera_calibration cameracalibrator.py --size 8x6 --square 0.024</span> </span><br><span class="line">   iamge:/usb_camera</span><br></pre></td></tr></table></figure>

<p>2.3 标定Camera</p>
<p>不断在视野中移动标定靶， 直到“CALIBRATE”按钮变色， 表示标定程序的参数采集完成。 点击“CALIBRATE”按钮， 标定程序开始自动计算摄像头的标定参数， </p>
<p>这个过程需要等待一段时间， 界面可能会变成灰色无响应状态， 注意千万不要关闭。</p>
<ul>
<li><p>点击界面中的“SAVE”按钮， 标定参数将被保存到默认的文件夹下， 并在终端中看到该路径，</p>
</li>
<li><p>commit 按钮：提交数据并退出程序。 然后打开&#x2F;tmp文件 夹， 就可以看到标定结果的压缩文件calibrationdata.tar.gz； 解压该文件  后的内容如图7-10所示， 从中可以找到ost.yaml命名的标定结果文件，  将该文件复制出来， 重新命名就可以使用了</p>
</li>
</ul>
<p>2.4 标定Kinect</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision freenect.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun camera_calibration cameracalibrator.py image:/camera/rgb/image_raw</span> </span><br><span class="line">        camera:=/camera/rgb</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun camera_calibration cameracalibrator.py image:=/camera/ir/image_raw</span> </span><br><span class="line">        camera:=/camera/ir</span><br></pre></td></tr></table></figure>

<p>2.5 加载标定参数配置文件</p>
<p>标定摄像头生成的配置文件是YAML格式的， 可以在启动摄像头的 launch文件中进行加载， 例如加载摄像头标定文件的robot_vision&#x2F;launch&#x2F;usb_cam_with_calibration.launch：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;usb_cam&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;usb_cam&quot;</span> <span class="attr">type</span>=<span class="string">&quot;usb_cam_node&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;video_device&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/dev/video0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;iamge_width&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1280&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;iamge_height&quot;</span> <span class="attr">value</span>=<span class="string">&quot;720&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;pixel_format&quot;</span> <span class="attr">value</span>=<span class="string">&quot;yuyv&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;camera_frame_id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;usb_cam&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;io_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;mmap&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;camera_info_url&quot;</span> <span class="attr">type</span>=<span class="string">&quot;string&quot;</span> <span class="attr">value</span>=</span></span><br><span class="line"><span class="tag">                <span class="string">&quot;file://$(find robot_vision)/camera_calibration.yaml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Kinect标定文件的加载方法相同， 分别设置RGB摄像头和红外深度  摄像头的标定文件即可， 详见<br>robot_vision&#x2F;launch&#x2F;freenect_with_calibration.launch：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Launch the freenect driver --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(find freenect_launch)/launch/freenect.launch&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;publish_tf&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- use device registration --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;depth_registration&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;rgb_processing&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;ir_processing&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;depth_processing&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;depth_registered_processing&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;disparity_processing&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;disparity_registered_processing&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;sw_registered_processing&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;hw_registered_processing&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;rgb_camera_info_url&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">&quot;file://$(find robot_vision)/kinect_rgb_calibration.yaml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;depth_camera_info_url&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">&quot;file://$(find robot_vision)/kinect_depth_calibration.yaml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span>lse&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>比如运行的警告，分别将两个标定文件中的camera_name参数修改  为“rgb_A70774707163327A”、 “depth_A70774707163327A”即可。</p>
<h3 id="7-3-opencv库"><a href="#7-3-opencv库" class="headerlink" title="7.3 opencv库"></a>7.3 opencv库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-kinetic-vision-opencv libopencv-dev python-opencv</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision usb_cam.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun robot_vision cv_bridge_test.py</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rqt_image_view</span></span><br></pre></td></tr></table></figure>

<h3 id="7-4-人脸识别"><a href="#7-4-人脸识别" class="headerlink" title="7.4 人脸识别"></a>7.4 人脸识别</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision usb_cam.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision face_detector.launch</span></span><br></pre></td></tr></table></figure>

<h3 id="7-5-物体跟踪"><a href="#7-5-物体跟踪" class="headerlink" title="7.5 物体跟踪"></a>7.5 物体跟踪</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision usb_cam.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision motion_detector.launch</span></span><br></pre></td></tr></table></figure>

<h3 id="7-6-二维码识别"><a href="#7-6-二维码识别" class="headerlink" title="7.6 二维码识别"></a>7.6 二维码识别</h3><p>在ROS Noetic中安装<code>ar_track_alvar</code>包并不是像其他一些ROS版本那样直接通过包管理器简单安装，因为Noetic版本中并没有预编译好的<code>ar_track_alvar</code>包。但是，你仍然可以通过从源代码编译的方式来安装它。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install ros-kinetic-ar-track-alvar</span></span><br><span class="line"></span><br><span class="line">cd ~/catkin_ws/src</span><br><span class="line">git clone https://github.com/machinekoder/ar_track_alvar.git -b noetic-devel</span><br><span class="line">cd ../</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">catkin_make</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">create</span> </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun ar_track_alvar createMarker AR_ID</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun ar_track_alvar createMarker 0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">roscd robot_vision/config</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosrun ar_track_alvar createMarker -s 5 0</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosrun ar_track_alvar createMarker -s 5 1</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosrun ar_track_alvar createMarker -s 5 2</span></span><br></pre></td></tr></table></figure>

<p>识别</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision usb_cam_with_calibration.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision ar_track_camera.launch</span></span><br></pre></td></tr></table></figure>

<h4 id="7-7-物体识别-ORK"><a href="#7-7-物体识别-ORK" class="headerlink" title="7.7 物体识别 ORK"></a>7.7 物体识别 ORK</h4><p>ROS中集成了一个强大的物体识别框架——Object Recognition Kitchen（ORK） ， 其中包含了多种三维物体识别的方法。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash"><span class="built_in">sudo</span> apt-get install ros-indigo-object-recognition-kitchen-*</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install meshlab</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install libosmesa6-dev</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install python-pyside.qtcore</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install python-pyside.qtgui</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> ork_ws &amp;&amp; <span class="built_in">cd</span> ork_ws</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wstool init src https://raw.github.com/wg-perception/object_recognition_core/master/doc/source/</span></span><br><span class="line">然后下载所有需要的功能包源码：</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> src &amp;&amp; wstool update -j8</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> .. &amp;&amp; rosdep install --from-paths src -i –y</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;export ~/ork_ws/devel/setup.bash&quot;</span> &gt;&gt; ~/.bashrc</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> ~/.bashrc</span></span><br></pre></td></tr></table></figure>

<h4 id="7-8-小节"><a href="#7-8-小节" class="headerlink" title="7.8 小节"></a>7.8 小节</h4><h3 id="8-机器语音"><a href="#8-机器语音" class="headerlink" title="8-机器语音"></a>8-机器语音</h3><p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-17-11-51-39-image.png"></p>
<ul>
<li><p>英文语音识别： 基于创建的语音库， ROS中的pocketsphinx功能包可以实现机器人的语音识别功能。</p>
</li>
<li><p>英文语音播放： ROS中的元功能包audio-common提供了文本转语音的功能包sound_play， 可以实现机器人的英文语音播放功能。</p>
</li>
<li><p>智能语音应答： 结合人工智能标记语言AIML， 机器人可以从语料库中智能匹配交流的输出语句， 从而实现智能化交流应用。</p>
</li>
<li><p>中文语音的识别与合成： 在ROS中集成科大讯飞的语音处理SDK， 让机器人更懂中文</p>
</li>
</ul>
<h5 id="8-1-1-pocketsphinx-功能包"><a href="#8-1-1-pocketsphinx-功能包" class="headerlink" title="8.1.1 pocketsphinx 功能包"></a>8.1.1 pocketsphinx 功能包</h5><h3 id="9-SLAM与自主导航"><a href="#9-SLAM与自主导航" class="headerlink" title="9 SLAM与自主导航"></a>9 SLAM与自主导航</h3><p>使用ROS实现机器人的SLAM和自主导航等功能是非常方便的， 因为有较多现成的功能包可供开发者使用， 如gmapping、 hector_slam、  cartographer、 rgbdslam、 ORB_SLAM、 move_base、 amcl等。</p>
<h4 id="9-2-准备工作"><a href="#9-2-准备工作" class="headerlink" title="9.2 准备工作"></a>9.2 准备工作</h4><p>1） 导航功能包对差分、 轮式机器人的效果好， 并且假设机器人可直接使用速度指令进行控制， 速度指令的定义如图9-5所示。  </p>
<ul>
<li><p>linear： 机器人在xyz三轴方向上的线速度， 单位是m&#x2F;s。  </p>
</li>
<li><p>angular： 机器人在xyz三轴方向上的角速度， 单位是rad&#x2F;s。</p>
</li>
</ul>
<p>2） 导航功能包要求机器人必须安装激光雷达等测距设备， 可以获取环境深度信息。<br>3） 导航功能包以正方形和圆形的机器人为模板进行开发， 对于其他外形的机器人， 虽然可以正常使用， 但是效果可能不佳。</p>
<h5 id="9-2-1-传感器信息，"><a href="#9-2-1-传感器信息，" class="headerlink" title="9.2.1 传感器信息，"></a>9.2.1 传感器信息，</h5><p>1 深度信息</p>
<p>ROS在sensor_msgs包中定义了专用数据结构—— </p>
<p><strong>LaserScan， 用于存储激光消息。</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@cdce9f3334ed:/data/mrobot_ws# rosmsg show sensor_msgs/LaserScan</span><br><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">float32 angle_min</span><br><span class="line">float32 angle_max</span><br><span class="line">float32 angle_increment</span><br><span class="line">float32 time_increment</span><br><span class="line">float32 scan_time</span><br><span class="line">float32 range_min</span><br><span class="line">float32 range_max</span><br><span class="line">float32[] ranges</span><br><span class="line">float32[] intensities</span><br></pre></td></tr></table></figure>

<p>Kinect等RGB-D摄像头，(三维点云数据)</p>
<p>那么将三维数据降维到二维数据  的方法也很简单， 即把大量数据拦腰斩断， 只抽取其中的一行数据， 重新封装为LaserScan消息， 就可以获取到需要的二维激光雷达信息。 这么做虽然损失了大量有效数据， 但是刚好可以满足2D SLAM的需求。</p>
<p>ROS中也提供了相应的功能包——<br>depthimage_to_laserscan， 可以在launch文件中使用如下方法调用：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 运行depthimage_to_laserscan节点， 将点云深度数据转换成激光数据 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;depthimage_to_laserscan&quot;</span> <span class="attr">type</span>=<span class="string">&quot;depthimage_to_laserscan&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">name</span>=<span class="string">&quot;depthimage_to_laserscan&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;image&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/camera/depth/image_raw&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;camera_info&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/camera/depth/camera_info&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;scan&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/scan&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;output_frame_id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/camera_link&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>里程计信息</li>
</ol>
<p>导航功能包要求机器人能够发布里程计nav_msgs&#x2F;Odometry消息。包含机器人在自由空间中的位置和速度估算值。</p>
<ul>
<li><p>pose： 机器人当前位置坐标， 包括机器人的x、 y、 z三轴位置与方向参数， 以及用于校正误差的协方差矩阵。  </p>
</li>
<li><p>twist： 机器人当前的运动状态， 包括x、 y、 z三轴的线速度与角速度， 以及用于校正误差的协方差矩阵</p>
</li>
</ul>
<p>上述数据结构中， 除速度与位置的关键信息外， 还包含用于滤波算法的协方差矩阵。 在精度要求不高的机器人系统中， 可以使用默认的协 方差矩阵； 而在精度要求较高的系统中， 需要先对机器人精确建模后， 再通过仿真、 实验等方法确定该矩阵的具体数值。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">root@cdce9f3334ed:/data/mrobot_ws# rosmsg show nav_msgs/Odometry</span><br><span class="line">std_msgs/Header header</span><br><span class="line">  uint32 seq</span><br><span class="line">  time stamp</span><br><span class="line">  string frame_id</span><br><span class="line">string child_frame_id</span><br><span class="line">geometry_msgs/PoseWithCovariance pose</span><br><span class="line">  geometry_msgs/Pose pose</span><br><span class="line">    geometry_msgs/Point position</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">    geometry_msgs/Quaternion orientation</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">      float64 w</span><br><span class="line">  float64[36] covariance</span><br><span class="line">geometry_msgs/TwistWithCovariance twist</span><br><span class="line">  geometry_msgs/Twist twist</span><br><span class="line">    geometry_msgs/Vector3 linear</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">    geometry_msgs/Vector3 angular</span><br><span class="line">      float64 x</span><br><span class="line">      float64 y</span><br><span class="line">      float64 z</span><br><span class="line">  float64[36] covariance</span><br></pre></td></tr></table></figure>

<h5 id="9-2-2-仿真平台"><a href="#9-2-2-仿真平台" class="headerlink" title="9.2.2 仿真平台"></a>9.2.2 仿真平台</h5><p>1、创建仿真环境</p>
<ul>
<li><p><input disabled type="checkbox"> 
自定义环境，Fail，todo</p>
</li>
<li><p><input checked disabled type="checkbox"> 
教材资料worlds OK</p>
</li>
</ul>
<p>2、加载机器人</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> rostopic list</span><br><span class="line">/clock</span><br><span class="line">/cmd_vel</span><br><span class="line">/gazebo/link_states</span><br><span class="line">/gazebo/model_states</span><br><span class="line">/gazebo/parameter_descriptions</span><br><span class="line">/gazebo/parameter_updates</span><br><span class="line">/gazebo/performance_metrics</span><br><span class="line">/gazebo/set_link_state</span><br><span class="line">/gazebo/set_model_state</span><br><span class="line">/joint_states</span><br><span class="line">/odom</span><br><span class="line">/rosout</span><br><span class="line">/rosout_agg</span><br><span class="line">/scan</span><br><span class="line">/tf</span><br><span class="line">/tf_static</span><br><span class="line">/usb_cam/camera_info</span><br><span class="line">/usb_cam/image_raw</span><br></pre></td></tr></table></figure>

<h5 id="9-2-3-真实Robot"><a href="#9-2-3-真实Robot" class="headerlink" title="9.2.3 真实Robot"></a>9.2.3 真实Robot</h5><p> todo</p>
<h4 id="9-3-gamapping"><a href="#9-3-gamapping" class="headerlink" title="9.3 gamapping"></a>9.3 gamapping</h4><p>gmapping功能包集成了Rao-Blackwellized粒子滤波算法， 为开发者隐去了复杂的内部实现。 图9-14所示的是gmapping功能包的总体框架。</p>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-17-17-15-00-image.png" title alt width="448">

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">$ <span class="built_in">sudo</span> apt-get install ros-kinetic-gmapping</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install ros-noetic-gmapping</span></span><br></pre></td></tr></table></figure>

<h5 id="发布的话题"><a href="#发布的话题" class="headerlink" title="发布的话题"></a>发布的话题</h5><ol>
<li><p><strong><code>/map</code></strong>：<br>这个话题发布的是地图消息，类型为<code>nav_msgs/OccupancyGrid</code>。它包含了环境的地图信息，包括栅格的大小、分辨率、位置、方向以及每个栅格的占用概率。</p>
</li>
<li><p><strong><code>/map_metadata</code></strong>（在早期版本中）：<br>有时<code>gmapping</code>会单独发布地图元数据，如地图的原点和分辨率，但这些信息现在通常包含在<code>/map</code>消息中。</p>
</li>
<li><p><strong><code>/map_update</code></strong>：<br>当地图发生更新时，<code>gmapping</code>会发布<code>nav_msgs/OccupancyGrid</code>类型的消息到<code>/map_update</code>话题，只包含地图改变的部分，而不是整个地图。</p>
</li>
<li><p><strong><code>/pose</code></strong>：<br>发布机器人在地图中的估计位置，类型为<code>geometry_msgs/PoseWithCovarianceStamped</code>。</p>
</li>
<li><p><strong><code>/initialpose</code></strong>：<br>这个话题虽然不是由<code>gmapping</code>发布，但通常与<code>gmapping</code>配合使用。它允许用户手动设置机器人在地图中的初始位置和姿态，类型为<code>geometry_msgs/PoseWithCovarianceStamped</code>。</p>
</li>
</ol>
<h5 id="订阅的话题"><a href="#订阅的话题" class="headerlink" title="订阅的话题"></a>订阅的话题</h5><ol>
<li><p><strong><code>/scan</code></strong>： <code>gmapping</code>订阅激光雷达传感器的扫描数据，类型为<code>sensor_msgs/LaserScan</code>，用于构建和更新地图。</p>
</li>
<li><p><strong><code>/odom</code></strong>：<br>订阅来自里程计或者其他定位系统的位姿数据，类型为<code>nav_msgs/Odometry</code>，用于辅助定位和地图构建。</p>
</li>
<li><p><strong><code>/tf</code></strong>：<br>订阅TF（Transform）树，类型为<code>tf/tfMessage</code>，用于处理坐标系变换，尤其是在多机器人或多传感器系统中。</p>
</li>
</ol>
<h5 id="提供的服务"><a href="#提供的服务" class="headerlink" title="提供的服务"></a>提供的服务</h5><ol>
<li><p><strong><code>/global_map</code></strong>： <code>gmapping</code>提供了一个名为<code>/global_map</code>的服务，类型为<code>nav_msgs/GetMap</code>，用于请求当前的地图信息。客户端可以通过调用此服务获取完整的地图数据。</p>
</li>
<li><p><strong><code>/set_initial_pose</code></strong>：<br>有时候<code>gmapping</code>也提供一个服务来设置初始位姿，尽管这通常通过发布到<code>/initialpose</code>话题来完成。</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">模拟环境</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo mrobot_laser_nav_gazebo.launch</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">建图可视化</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_navigation gmapping_demo.launch</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">动起来</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_teleop mrobot_teleop.launch</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">保存地图</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun map_server map_saver</span></span><br><span class="line">- map.pgm</span><br><span class="line">- map.ymal</span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-17-19-58-29-image.png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo mrobot_kinect_nav_gazebo.launch</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_navigation gmapping_demo.launch</span></span><br></pre></td></tr></table></figure>

<h4 id="9-4-hector-slam"><a href="#9-4-hector-slam" class="headerlink" title="9.4 hector-slam"></a>9.4 hector-slam</h4><p>hector_slam功能包使用高斯牛顿方法， 不需要里程计数据， 只根据 激光信息便可构建地图。 因此， 该功能包可以很好地在空中机器人、 手持构图设备及特种机器人中运行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install ros-noetic-hector-slam</span><br></pre></td></tr></table></figure>

<p>hector_slam的核心节点是hector_mapping， 它订阅“&#x2F;scan”话题以获取SLAM所需的激光数据。 与gmapping相同的是， hector_mapping节点也会发布map话题， 提供构建完成的地图信息； 不同的是，hector_mapping节点还会发布slam_out_pose和poseupdate这两个话题， 提供当前估计的机器人位姿。</p>
<table>
<thead>
<tr>
<th></th>
<th>name</th>
<th>Type</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>订阅</td>
<td>scan</td>
<td>sensor_msgs&#x2F;LaserScan</td>
<td>雷达数据</td>
</tr>
<tr>
<td></td>
<td>syscommand</td>
<td>std_msgs&#x2F;String</td>
<td></td>
</tr>
<tr>
<td>发布</td>
<td>map_metadata</td>
<td>nav_msgs&#x2F;MapMetaData</td>
<td></td>
</tr>
<tr>
<td></td>
<td>map</td>
<td>nav_msgs&#x2F;OccupancyGrid</td>
<td>发布地图栅格数据</td>
</tr>
<tr>
<td></td>
<td>slam_out_pose</td>
<td>geometry_msgs&#x2F;PoseStamped</td>
<td></td>
</tr>
<tr>
<td></td>
<td>poseupdate</td>
<td>geometry_msgs&#x2F;PoseWithCovarianceStamped</td>
<td></td>
</tr>
<tr>
<td>服务</td>
<td>dynamic_map</td>
<td>nav_msgs&#x2F;GetMap</td>
<td></td>
</tr>
</tbody></table>
<p>9.4.2 配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mrobot_navigation/launch/hector.launch</span><br><span class="line"></span><br><span class="line">演示hector_slam的mrobot_navigation/launch/hector_demo.launch文件， </span><br><span class="line"></span><br><span class="line">启动hector_mapping节点和rviz可视化界面</span><br></pre></td></tr></table></figure>

<p>9.4.3 Gazebo仿真SLAM</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo mrobot_laser_nav_gazebo.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_navigation hector_demo.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_teleop mrobot_teleop.launch</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">保存地图</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun map_server map_saver -f hector_map</span></span><br></pre></td></tr></table></figure>

<p>hector_slam建图的效果也非常不错， 但由于要基于深度数据估算里程计信息， 因此对深度传感器的数据精度有较高要求， 建图的稳定性不如gmapping。 如果使用Kinect在该仿真环境中进行 hector_slam建图， 特征点过少， 估算的里程计信息不佳， 建图的效果会大打折扣</p>
<p>9.4.4 真实SLAM</p>
<h4 id="9-5-cartographer-todo"><a href="#9-5-cartographer-todo" class="headerlink" title="9.5 cartographer[todo]"></a>9.5 cartographer[todo]</h4><p>谷歌宣布开放一个名为cartographer的即时定位与地图建模库， 开发人员可以使用该库实现机器人在二维或三维条件下的定位及建图功能。 </p>
<p>cartograhper的设计目的是在计算资源有限的情况下， 实时获取相对较高精度的2D地图。 考虑到基于模拟策略的粒子滤波方法在较大环境下对内存和计算资源的需求较高， cartographer采用基于<em>图网络的优化</em>方法。 </p>
<p>目前cartographer主要基于激光雷达来实现SLAM，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y python3-wstool python3-rosdep ninja-build</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建工作空间</span></span><br><span class="line">mkdir catkin_ws_carto</span><br><span class="line">cd catkin_ws_carto</span><br><span class="line">wstool init src</span><br><span class="line"></span><br><span class="line">wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拉取代码</span></span><br><span class="line">wstool update -t src</span><br><span class="line"></span><br><span class="line">--------------------</span><br><span class="line">root@cdce9f3334ed:/data/carto_ws# cat src/.rosinstall</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">THIS IS AN AUTOGENERATED FILE, LAST GENERATED USING wstool ON 2024-07-18</span></span><br><span class="line">- git:</span><br><span class="line">    local-name: cartographer</span><br><span class="line">    uri: https://github.com/cartographer-project/cartographer.git</span><br><span class="line">    version: master</span><br><span class="line">- git:</span><br><span class="line">    local-name: cartographer_ros</span><br><span class="line">    uri: https://github.com/cartographer-project/cartographer_ros.git</span><br><span class="line">    version: master</span><br><span class="line"></span><br><span class="line">- git: </span><br><span class="line">   local-name: ceres-solver</span><br><span class="line">   uri: https://github.com/ceres-solver/ceres-solver.git</span><br><span class="line">   version: master</span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">更新ROSdep 镜像</span><br><span class="line">https://gitee.com/ncnynl/rosdep/blob/master/README.md</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 安装依赖</span></span><br><span class="line">src/cartographer/scripts/install_proto3.sh</span><br><span class="line">sudo rosdep init</span><br><span class="line">rosdep update</span><br><span class="line">rosdep install --from-paths src --ignore-src --rosdistro=$&#123;ROS_DISTRO&#125; -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">- 注释掉cartographer/package.xml的libabsl-dev</span></span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">安装absl</span> </span><br><span class="line"> ./src/cartographer/scripts/install_abseil.sh</span><br><span class="line"> 修改CmakeFile.txt</span><br><span class="line">    find_package(absl REQUIRED /usr/local/stow/absl)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编译</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">catkin_make_isolated --install --use-ninja</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> install_isolated/setup.bash</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git </span><br><span class="line"># git git-man less liberror-perl</span><br></pre></td></tr></table></figure>

<h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -P ~/Downloads https://storage.googleapis.com/cartographer-public-data/bags/backpack_2d/cartographer_paper_deutsches_museum.bag</span><br><span class="line">https://pan.baidu.com/s/1UmkuHawGL2R3C2OURnqa7g 提取码rwp7</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RUN</span> </span><br><span class="line">roslaunch cartographer_ros demo_backpack_2d.launch bag_filename:=$&#123;HOME&#125;/Downloads/cartographer_paper_deutsches_museum.bag</span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-19-12-37-54-image.png"></p>
<h4 id="9-6-rgbslam"><a href="#9-6-rgbslam" class="headerlink" title="9.6 rgbslam"></a>9.6 rgbslam</h4><p><a target="_blank" rel="noopener" href="https://github.com/felixendres/rgbdslam_v2">https://github.com/felixendres/rgbdslam_v2</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">依赖安装</span></span><br><span class="line">sudo apt-get install libsuitesparse-dev</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装脚本（配置较为复杂，脚本比较方便）</span></span><br><span class="line">https://raw.githubusercontent.com/felixendres/rgbdslam_v2/kinetic/install.sh</span><br><span class="line">bash install.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置环境变量</span></span><br><span class="line">source ~/Code/rgbdslam_catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>

<p>数据包实现(测试)SLAM</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">数据包：</span><br><span class="line">http://vision.in.tum.de/rgbd/dataset/freiburg1/rgbd_dataset_freiburg1_desk.bag</span><br><span class="line"></span><br><span class="line">rgbdslam.launch</span><br><span class="line">&lt;!-- Input data settings --&gt;</span><br><span class="line">&lt;param name=&quot;config/topic_image_mono&quot; value=&quot;/camera/rgb/image_color&quot; /&gt;</span><br><span class="line">&lt;param name=&quot;config/topic_image_depth&quot; value=&quot;/camera/depth/image&quot; /&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch rgbdslam rgbdslam.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosbag play rgbd_dataset_freiburg1_desk.bag</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 建图完成后， 直接在菜单栏中选择保存为点云数据即可。</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看已保存的点云地图</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun pcl_ros pcd_to_pointcloud quicksave.pcd</span></span><br></pre></td></tr></table></figure>

<p>9.6.3 使用Kinect实现SLAM</p>
<p>运行之前修改rgbdslam.launch中的图像话题名， 必须与Kinect发布的话题一致。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ roslaunch robot_vision freenect.launch</span><br><span class="line">$ roslaunch rgbdslam rgbdslam.launch</span><br></pre></td></tr></table></figure>

<h4 id="9-7-ORB-SLAM"><a href="#9-7-ORB-SLAM" class="headerlink" title="9.7 ORB-SLAM"></a>9.7 ORB-SLAM</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> https://github.com/raulmur/ORB_SLAM2.git</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> apt-get install libboost-all-dev libblas-dev liblapack-dev</span></span><br></pre></td></tr></table></figure>

<p>eigen 3.2 安装</p>
<p><a target="_blank" rel="noopener" href="https://eigen.tuxfamily.org/index.php?title=Main_Page">https://eigen.tuxfamily.org/index.php?title=Main_Page</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> make install</span></span><br></pre></td></tr></table></figure>

<p>编译ORB-SLAM2</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> build</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cmake -DCPP11_NO_BOOST=1 ..</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> make install</span></span><br><span class="line"></span><br><span class="line">-----</span><br><span class="line">CMake Error at CMakeLists.txt:35 (message):</span><br><span class="line">  OpenCV &gt; 2.4.3 not found.</span><br><span class="line"></span><br><span class="line">git clone https://github.com/stevenlovegrove/Pangolin.git</span><br><span class="line">cd Pangolin</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line">make -j</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>编译依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./build.sh</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/meng_152634/article/details/127570220">ORB-SLAM2环境配置及运行_orbslam2环境配置-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43579627/article/details/111403011">【SLAM】Jetson Xvier运行ORB_SLAM2 配置、跑数据集、usb_cam实时轨迹_orb-slam2怎么获得真实轨迹-CSDN博客</a></p>
</blockquote>
<p>编译ORB-SLAM2 的ROS功能包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">export</span> ROS_PACKAGE_PATH=<span class="variable">$&#123;ROS_PACKAGE_PATH&#125;</span>:ORB_SLAM_PATH/ORB_SLAM2/Examples/ROS</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">chmod</span> +x build_ros.sh</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./build_ros.sh</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> ORB_SLAM2/Examples/ROS/ORB_SLAM2/build/devel/setup.bash</span></span><br></pre></td></tr></table></figure>

<h5 id="9-7-2-数据包实现单目SLAM"><a href="#9-7-2-数据包实现单目SLAM" class="headerlink" title="9.7.2 数据包实现单目SLAM"></a>9.7.2 数据包实现单目SLAM</h5><p><a target="_blank" rel="noopener" href="http://vision.in.tum.de/rgbd/dataset/freiburg1/rgbd_dataset_freiburg1_desk.bag">http://vision.in.tum.de/rgbd/dataset/freiburg1/rgbd_dataset_freiburg1_desk.bag</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun ORB_SLAM2 Mono Vocabulary/ORBvoc.txt Examples/ROS/ORB_SLAM2/Asus.yaml</span></span><br><span class="line">启动Mono节点时， 还应输入两个必需的参数。</span><br><span class="line">1） PATH_TO_VOCABULARY： 算法参数文件。 在ORB_SLAM2/Vocabulary中， </span><br><span class="line">    将其中的压缩包解压即可。</span><br><span class="line">2） PATH_TO_SETTINGS_FILE： 相机参数设置文件， 需要对camera进行标定， </span><br><span class="line">    或者使用ORB_SLAM2/Examples/ROS/ORB_SLAM2中已有的设置文件Asus.yaml。</span><br></pre></td></tr></table></figure>

<p>启动成功后就可以看到如图9-48所示的界面， 暂时还没有数据产生， 所以界面中没有任何显示。</p>
<p>现在播放数据包： </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosbag play rgbd_dataset_freiburg1_desk.bag \</span></span><br><span class="line"><span class="language-bash">        /camera/rgb/image_color:=/camera/image_raw</span></span><br></pre></td></tr></table></figure>

<p>一会就可以在界面中看到如图9-49所示的SLAM过程</p>
<p>ORB_SLAM2构建的地图是一种三维稀疏点云的形式， 与其他方法构建的地图格式有所不同。 </p>
<p>ORB_SLAM2包中还提供了AR功能，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">roscore</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosrun ORB_SLAM2 MonoAR Vocabulary/ORBvoc.txt Examples/ROS/ORB_SLAM2/Asus.yaml</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rosbag play rgbd_dataset_freiburg1_desk.bag /camera/rgb/image_color:=/camera/image_raw</span></span><br></pre></td></tr></table></figure>

<p>9.7.3 摄像头实现单目SLAM</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision usb_cam_remap.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun ORB_SLAM2 Mono Vocabulary/ORBvoc.txt Examples/ROS/ORB_SLAM2/Asus.yaml</span></span><br></pre></td></tr></table></figure>

<p>AR</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch robot_vision usb_cam_remap.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun ORB_SLAM2 MonoAR Vocabulary/ORBvoc.txt Examples/ROS/ORB_SLAM2/Asus.yaml</span></span><br></pre></td></tr></table></figure>

<h4 id="9-8-导航功能包"><a href="#9-8-导航功能包" class="headerlink" title="9.8 导航功能包"></a>9.8 导航功能包</h4><p>定位+导航</p>
<p>ROS提供两个功能包：</p>
<p>1） move_base： 实现机器人导航中的最优路径规划。<br>2） amcl： 实现二维地图中的机器人定位。</p>
<p>在此基础上，提供一套完整的导航功能框架</p>
<img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-18-19-58-25-image.png" title alt width="425">

<ul>
<li><p>采集传感器信息</p>
</li>
<li><p>robot发布nav_msgs&#x2F;Odometry里程计信息，TF变换</p>
</li>
<li><p>输出geometry_msgs&#x2F;Twist控制指令</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install ros-noetic-navigation</span><br></pre></td></tr></table></figure>

<h5 id="9-8-2-move-base功能包"><a href="#9-8-2-move-base功能包" class="headerlink" title="9.8.2 move_base功能包"></a>9.8.2 move_base功能包</h5><p>move_base是ROS中完成路径规划的功能包， 主要由以下两大规划器组成。  </p>
<ul>
<li><p>全局路径规划（global_planner） 。 全局路径规划是根据给定的目标位置和全局地图进行总体路径的规划。 在导航中， 使用Dijkstra或A*  算法进行全局路径的规划， 计算出机器人到目标位置的最优路线， 作为机器人的全局路线。  </p>
</li>
<li><p>本地实时规划（local_planner） 。 在实际情况中， 机器人往往无法严格按照全局路线行驶， 所以需要针对地图信息和机器人附近随时可能出现的障碍物规划机器人每个周期内应该行驶的路线， 使之尽量符合全局最优路径。 本地实时规划由local_planner模块实现， 使用Dynamic Window Approaches算法搜索躲避和行进的多条路经， 综合各评价标准  （是否会撞击障碍物， 所需要的时间等） 选取最优路径， 并且计算行驶周期内的线速度和角速度， 避免与动态出现的障碍物发生碰撞。</p>
</li>
</ul>
<p>话题&amp;服务</p>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
<th>Type</th>
<th>Info</th>
</tr>
</thead>
<tbody><tr>
<td>Act Sub</td>
<td>move_base&#x2F;goal</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>move_base&#x2F;cancel</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Act Pub</td>
<td>move_base&#x2F;feedback</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>move_base&#x2F;status</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>move_base&#x2F;result</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Topic Reg</td>
<td>move_base_simple&#x2F;goal</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Topic Send</td>
<td>cmd_vel</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Server</td>
<td>~make_plan</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>~clear_unknown_space</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>~clear_costmaps</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>参数</p>
<p>todo</p>
<h5 id="9-8-3-amcl功能包"><a href="#9-8-3-amcl功能包" class="headerlink" title="9.8.3 amcl功能包"></a>9.8.3 amcl功能包</h5><p>自适应（或kld采样） 的蒙特卡罗定位方法（amcl）</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Topic Reg</td>
<td>Scan</td>
<td></td>
<td>激光雷达数据</td>
</tr>
<tr>
<td></td>
<td>Tf</td>
<td></td>
<td>坐标变换信息</td>
</tr>
<tr>
<td></td>
<td>initialpose</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>map</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Topic Send</td>
<td>amcl_pose</td>
<td></td>
<td>机器人在地图中的位姿估计，带协方差信息</td>
</tr>
<tr>
<td></td>
<td>particlecloud</td>
<td></td>
<td>粒子滤波器维护的位姿估计集合</td>
</tr>
<tr>
<td></td>
<td>Tf</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Servers</td>
<td>global_localization</td>
<td></td>
<td>初始化全局定位</td>
</tr>
<tr>
<td></td>
<td>request_nomotion_update</td>
<td></td>
<td>手动执行更新发布更新粒子</td>
</tr>
<tr>
<td>Server call</td>
<td>static_map</td>
<td></td>
<td>amcl调用该服务获取地图数据</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>坐标变换</p>
<ul>
<li><p>里程计 VS amcl  实现机器人定位的区别？</p>
</li>
<li><p>里程计： 只通过里程计的数据处理&#x2F;base和odom之间的TF变换</p>
</li>
<li><p>amcl定位：可以估算robot在地图坐标系的位姿，提供base odom ，map之间的TF变换</p>
</li>
</ul>
<h5 id="9-8-4-代价地图配置"><a href="#9-8-4-代价地图配置" class="headerlink" title="9.8.4 代价地图配置"></a>9.8.4 代价地图配置</h5><ol>
<li><p>通用配置文件(Common Configuration，local_costmap&amp;global_costmap)<br>costmap_common_params.yaml的配置文件， 具体代<br>码如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">obstacle_range:</span> <span class="number">2.5</span>  <span class="comment"># 检测障碍物的最大范围 2.5m</span></span><br><span class="line"><span class="attr">raytrace_range:</span> <span class="number">3.0</span>  <span class="comment"># 检测自由空间的最大范围</span></span><br><span class="line"><span class="comment"># 机器人在二维地图上的占用面积，</span></span><br><span class="line"><span class="comment"># footprint: [[0.165, 0.165], [0.165, -0.165], [-0.165, -0.165], [-0.165, 0.165]]</span></span><br><span class="line"><span class="attr">robot_radius:</span> <span class="number">0.165</span></span><br><span class="line"><span class="attr">inflation_radius:</span> <span class="number">0.1</span> <span class="comment"># 障碍物保持的最小安全距离</span></span><br><span class="line"><span class="comment"># 障碍物的最大高度和最小高度</span></span><br><span class="line"><span class="attr">max_obstacle_height:</span> <span class="number">0.6</span></span><br><span class="line"><span class="attr">min_obstacle_height:</span> <span class="number">0.0</span></span><br><span class="line"><span class="attr">observation_sources:</span> <span class="string">scan</span></span><br><span class="line"><span class="attr">scan:</span> &#123; <span class="attr">data_type:</span> <span class="string">LaserScan</span>, </span><br><span class="line">        <span class="attr">topic:</span> <span class="string">/scan</span>, </span><br><span class="line">        <span class="attr">marking:</span> <span class="literal">true</span>, </span><br><span class="line">        <span class="attr">clearing:</span> <span class="literal">true</span>, </span><br><span class="line">        <span class="attr">expected_update_rate:</span> <span class="number">0</span>&#125;</span><br><span class="line"><span class="comment"># marking和clearing参数用来表示是否需要使用传感器的实时信息来</span></span><br><span class="line"><span class="comment">#        添加或清除代价地图中的障碍物信息。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>全局规划配置文件(Global Configuration， global_costmap)</p>
</li>
</ol>
<p>global_costmap_params.yaml， 代码如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global_costmap:</span></span><br><span class="line">  <span class="attr">global_frame:</span> <span class="string">/map</span></span><br><span class="line">  <span class="attr">robot_base_frame:</span> <span class="string">/base_footprint</span></span><br><span class="line">  <span class="attr">update_frequency:</span> <span class="number">1.0</span></span><br><span class="line">  <span class="attr">publish_frequency:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">static_map:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">rolling_window:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="number">0.01</span></span><br><span class="line">  <span class="attr">transform_tolerance:</span> <span class="number">1.0</span></span><br><span class="line">  <span class="attr">map_type:</span> <span class="string">costmap</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>本地规划配置文件(Local Configuration， local_costmap)</li>
</ol>
<p>local_costmap_params.yaml， 代码如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_costmap:</span></span><br><span class="line">  <span class="attr">global_frame:</span> <span class="string">map</span></span><br><span class="line">  <span class="attr">robot_base_frame:</span> <span class="string">base_footprint</span></span><br><span class="line">  <span class="attr">update_frequency: 3.0publish_frequency:</span> <span class="number">1.0</span></span><br><span class="line">  <span class="attr">static_map:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">rolling_window:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">width:</span> <span class="number">6.0</span></span><br><span class="line">  <span class="attr">height:</span> <span class="number">6.0</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="number">0.01</span></span><br><span class="line">  <span class="attr">transform_tolerance:</span> <span class="number">1.0</span></span><br></pre></td></tr></table></figure>

<h5 id="9-8-5-本地规划器配置"><a href="#9-8-5-本地规划器配置" class="headerlink" title="9.8.5 本地规划器配置"></a>9.8.5 本地规划器配置</h5><p>base_local_planner_params.yaml</p>
<p>本地规划采用Trajectory Rollout算法， 并且设置算法中需要用到的机器人速度、 加速度阈值等参数。</p>
<h4 id="9-9-rviz仿真导航"><a href="#9-9-rviz仿真导航" class="headerlink" title="9.9 rviz仿真导航"></a>9.9 rviz仿真导航</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mrobot_navigation/launch/fake_move_base.launch</span><br><span class="line">mrobot_navigation/launch/fake_nav_demo.launch</span><br><span class="line"></span><br><span class="line">mrobot_bringup/launch/fake_morobot_with_laser.launch</span><br></pre></td></tr></table></figure>

<h5 id="1-开始导航"><a href="#1-开始导航" class="headerlink" title="1. 开始导航"></a>1. 开始导航</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_bringup fake_mrobot_with_laser.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_navigation fake_nav_demo.launch</span></span><br></pre></td></tr></table></figure>

<p>checkfile: </p>
<p>    - mrobot_navigation\rviz\nav.rviz </p>
<p>运行结果:</p>
<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-22-14-57-13-image.png"></p>
<p>用鼠标点击菜单栏中的“2D Nav Goal”按钮， 这个按钮的功能是帮  助我们设置导航的目标点。 将鼠标移动到地图上导航的目标位置， 点击  鼠标左键（注意不要放开） 。 这时， 可以在目标位置看到一个绿色的箭 头， 因为导航目标点不仅包含机器人的位置信息， 还包含机器人的姿态  信息， 通过拖动鼠标可以设置导航目标的姿态</p>
<p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-22-14-59-27-image.png"></p>
<h5 id="2-自动导航（todo）"><a href="#2-自动导航（todo）" class="headerlink" title="2. 自动导航（todo）"></a>2. 自动导航（todo）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_bringup fake_mrobot_with_laser.launch</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_navigation fake_nav_demo.launch</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">自主导航</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun mrobot_navigation random_navigation.py</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">view机器人发布的距离信息、 状态信息、 目标点编号、 成功率和速度等日志</span></span><br><span class="line">rqt_console</span><br></pre></td></tr></table></figure>

<h4 id="9-10-gazebo仿真导航"><a href="#9-10-gazebo仿真导航" class="headerlink" title="9.10 gazebo仿真导航"></a>9.10 gazebo仿真导航</h4><p>首先启动Gazebo仿真环境， 然后启动move_base导航功能节点。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1</span> </span><br><span class="line">mrobot_gazebo/launch/mrobot_laser_nav_gazebo.launch</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2</span></span><br><span class="line">mrobot_navigation/launch/fake_nav_cloister_demo.launch</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Gazebo界面</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo mrobot_laser_nav_gazebo.launch</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Rviz界面</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_navigation fake_nav_cloister_demo.launch</span></span><br></pre></td></tr></table></figure>

<h5 id="1-运行效果"><a href="#1-运行效果" class="headerlink" title="1.运行效果"></a>1.运行效果</h5><p><img src="/2024/06/27/AI_ROBOT/ROS_dev/2024-07-23-18-11-21-image.png"></p>
<h5 id="2-实时避障"><a href="#2-实时避障" class="headerlink" title="2.实时避障"></a>2.实时避障</h5><h4 id="9-11-真实导航"><a href="#9-11-真实导航" class="headerlink" title="9.11 真实导航"></a>9.11 真实导航</h4><h4 id="9-12-自主探索slam"><a href="#9-12-自主探索slam" class="headerlink" title="9.12 自主探索slam"></a>9.12 自主探索slam</h4><p>为什么机器人在SLAM过程中需要远程遥控机器人运动？ </p>
<p>能不能让机器人自主移动并且实现SLAM呢？</p>
<p>将前面学到的SLAM和导航功能结合到一起， 在导航避障过程中建立环境地图。 </p>
<p>下面以gmapping为例（其他SLAM功能包类似） ， 实现机器人自主探索式的SLAM， 不再需要人工 控制。</p>
<h5 id="1-launch"><a href="#1-launch" class="headerlink" title="1 launch"></a>1 launch</h5><p>gmapping_demo.launch文件基础上，添加move_base节点加入到SLAM系统中。</p>
<p>mrobot_navigation&#x2F;launch&#x2F;exploring_slam_demo.launch</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(find mrobot_navigation)/launch/gmapping.launch&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 运行move_base节点 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(find mrobot_navigation)/launch/move_base.launch&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 运行rviz --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">type</span>=<span class="string">&quot;rviz&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rviz&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">args</span>=<span class="string">&quot;-d $(find mrobot_navigation)rviz/nav.rviz&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-rviz设置探索目标"><a href="#2-rviz设置探索目标" class="headerlink" title="2 rviz设置探索目标"></a>2 rviz设置探索目标</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gazebo环境模拟</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_gazebo mrobot_laser_nav_gazebo.launch</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SLAM 自动探索（rviz指定目标位置）</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">roslaunch mrobot_navigation exploring_slam_demo.launch</span></span><br></pre></td></tr></table></figure>

<h5 id="3-实现自主探索"><a href="#3-实现自主探索" class="headerlink" title="3 实现自主探索"></a>3 实现自主探索</h5><p>修改target PT: mrobot_navigation&#x2F;scripts&#x2F;exploring_slam.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">locations[<span class="string">&#x27;1&#x27;</span>] = Pose(Point(<span class="number">4.589</span>, -<span class="number">0.376</span>, <span class="number">0.000</span>), Quaternion(<span class="number">0.000</span>, <span class="number">0.000</span>, -<span class="number">0.447</span>, <span class="number">0.89</span></span><br><span class="line">locations[<span class="string">&#x27;2&#x27;</span>] = Pose(Point(<span class="number">4.231</span>, -<span class="number">6.050</span>, <span class="number">0.000</span>), Quaternion(<span class="number">0.000</span>, <span class="number">0.000</span>, -<span class="number">0.847</span>, <span class="number">0.53</span></span><br><span class="line">locations[<span class="string">&#x27;3&#x27;</span>] = Pose(Point(-<span class="number">0.674</span>, -<span class="number">5.244</span>, <span class="number">0.000</span>), Quaternion(<span class="number">0.000</span>, <span class="number">0.000</span>, <span class="number">0.000</span>, <span class="number">1.000</span></span><br><span class="line">locations[<span class="string">&#x27;4&#x27;</span>] = Pose(Point(-<span class="number">5.543</span>, -<span class="number">4.779</span>, <span class="number">0.000</span>), Quaternion(<span class="number">0.000</span>, <span class="number">0.000</span>, <span class="number">0.645</span>, <span class="number">0.764</span></span><br><span class="line">locations[<span class="string">&#x27;5&#x27;</span>] = Pose(Point(-<span class="number">4.701</span>, -<span class="number">0.590</span>, <span class="number">0.000</span>), Quaternion(<span class="number">0.000</span>, <span class="number">0.000</span>, <span class="number">0.340</span>, <span class="number">0.940</span></span><br><span class="line">locations[<span class="string">&#x27;6&#x27;</span>] = Pose(Point(<span class="number">2.924</span>, <span class="number">0.018</span>, <span class="number">0.000</span>), Quaternion(<span class="number">0.000</span>, <span class="number">0.000</span>, <span class="number">0.000</span>, <span class="number">1.000</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">自主探索</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">rosrun mrobot_navigation exploring_slam.py</span></span><br></pre></td></tr></table></figure>

<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><p><input checked disabled type="checkbox"> 
SLAM建图</p>
</li>
<li><p><input checked disabled type="checkbox"> 
自主导航（框架使用）</p>
</li>
<li><p><input checked disabled type="checkbox"> 
自主探索SLAM （SLAM+自主导航）</p>
</li>
</ul>
<h3 id="10-Movelt机械臂"><a href="#10-Movelt机械臂" class="headerlink" title="10-Movelt机械臂"></a>10-Movelt机械臂</h3><p>MoveIt</p>
<p>创建配置机械臂</p>
<p>启动moveIt</p>
<p>配置文件</p>
<p>ArbotiX 关节配置</p>
<p>pick and place</p>
<p>Gazebo仿真</p>
<p>控制Gazebo机器臂</p>
<h3 id="11-ROS与机器学习"><a href="#11-ROS与机器学习" class="headerlink" title="11-ROS与机器学习"></a>11-ROS与机器学习</h3><p>Alpha GO</p>
<p>TF基础</p>
<p>线性回归</p>
<p>手写数字识别</p>
<p>物体识别</p>
<h3 id="12-ROS进阶"><a href="#12-ROS进阶" class="headerlink" title="12-ROS进阶"></a>12-ROS进阶</h3><p>action</p>
<p>plugin</p>
<p>rviz plugin</p>
<p>动态参数配置</p>
<p>SMACH</p>
<p>ROS-MATLAB</p>
<p>Web GUI</p>
<h3 id="13-ROS机器人实例"><a href="#13-ROS机器人实例" class="headerlink" title="13-ROS机器人实例"></a>13-ROS机器人实例</h3><p>PR2</p>
<p>TurtleBot</p>
<p>Universal Robots</p>
<p>catvehicle</p>
<p>HRMRP</p>
<p>Kungfu Arm</p>
<h3 id="14-ROS2"><a href="#14-ROS2" class="headerlink" title="14-ROS2"></a>14-ROS2</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Simon Shi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">322</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">142</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">269</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Simon Shi</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
