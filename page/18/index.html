<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"novav.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Simon Shi的小站">
<meta property="og:url" content="https://novav.github.io/page/18/index.html">
<meta property="og:site_name" content="Simon Shi的小站">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Simon Shi">
<meta property="article:tag" content="AI,Machine Learning, Deep Learning">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://novav.github.io/page/18/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Simon Shi的小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Simon Shi的小站</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">人工智能，机器学习， 强化学习，大模型，自动驾驶</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/12/Sub_Language/DL_Platform/CplusCallPyModel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/12/Sub_Language/DL_Platform/CplusCallPyModel/" class="post-title-link" itemprop="url">C++ Call Python call Model</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-12 10:09:08" itemprop="dateCreated datePublished" datetime="2022-04-12T10:09:08+00:00">2022-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/deploy/" itemprop="url" rel="index"><span itemprop="name">deploy</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wk785456510/article/details/117248123">深度学习模型部署，c++调用python模块的Tensorflow推理过程</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/12/Sub_Language/DL_Platform/OpenVINO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/12/Sub_Language/DL_Platform/OpenVINO/" class="post-title-link" itemprop="url">OpenVINO基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-12 00:00:00" itemprop="dateCreated datePublished" datetime="2022-04-12T00:00:00+00:00">2022-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/deploy/" itemprop="url" rel="index"><span itemprop="name">deploy</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/deploy/OpenVINO/" itemprop="url" rel="index"><span itemprop="name">OpenVINO</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>OpenVINO是英特尔推出的视觉推理加速工具包。应用在Intel的CPU及其GPU上。OpenCV 3.4.1版本加入了英特尔推理引擎后端（英特尔推理引擎是OpenVINO中的一个组件），为英特尔平台的模型推理进行加速。OpenCV新版本（4.3.0）加入nGraph OpenVINO API(2020.03)。<br>2018 年5月 Intel 发布了 OpenVINO（Open Visual Inferencing and Neural Network Optimization， 开放视觉推理和神经网络优化）工具包，旨在为Intel 计算平台的（基于神经网络的视觉推理任务）提供高性能加速方案，同时支持Intel CPU、 GPU、FPGA 和 Movidius 计算棒等。<br>————————————————</p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39956356/article/details/107103244">https://blog.csdn.net/weixin_39956356/article/details/107103244</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/338414125">u版YOLOv5目标检测openvino实现</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/11/Sub_Language/DL_Train/Pytorch/libtorch_urls/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/11/Sub_Language/DL_Train/Pytorch/libtorch_urls/" class="post-title-link" itemprop="url">Libtorch download urls</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-11 17:00:00" itemprop="dateCreated datePublished" datetime="2022-04-11T17:00:00+00:00">2022-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DNN-platform/" itemprop="url" rel="index"><span itemprop="name">DNN_platform</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DNN-platform/pytorch/" itemprop="url" rel="index"><span itemprop="name">pytorch</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h3 id="libtorch-URLs"><a href="#libtorch-URLs" class="headerlink" title="libtorch_URLs"></a>libtorch_URLs</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br></pre></td><td class="code"><pre><span class="line">libtorch 1.0.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.0.0.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu80/libtorch-shared-with-deps-1.0.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu90/libtorch-shared-with-deps-1.0.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.0.1.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu80/libtorch-shared-with-deps-1.0.1.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu90/libtorch-shared-with-deps-1.0.1.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-shared-with-deps-1.0.1.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.1.0.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu90/libtorch-shared-with-deps-1.1.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-shared-with-deps-1.1.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.2.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.2.0.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-shared-with-deps-1.2.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-shared-with-deps-1.2.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.3.0</span><br><span class="line"></span><br><span class="line">从这个版本开始，官方提供了 Pre-cxx11 ABI 和 cxx11 ABI 两种版本</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.3.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-shared-with-deps-1.3.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-shared-with-deps-1.3.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-shared-with-deps-1.3.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.3.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-cxx11-abi-shared-with-deps-1.3.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-cxx11-abi-shared-with-deps-1.3.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-cxx11-abi-shared-with-deps-1.3.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.3.1</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.3.1%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-shared-with-deps-1.3.1%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-shared-with-deps-1.3.1%2Bcu100.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-shared-with-deps-1.3.1.zip</span></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.3.1%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-cxx11-abi-shared-with-deps-1.3.1%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-cxx11-abi-shared-with-deps-1.3.1%2Bcu100.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-cxx11-abi-shared-with-deps-1.3.1.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.4.0</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.4.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-shared-with-deps-1.4.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-shared-with-deps-1.4.0%2Bcu100.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-shared-with-deps-1.4.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.4.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-cxx11-abi-shared-with-deps-1.4.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu100/libtorch-cxx11-abi-shared-with-deps-1.4.0%2Bcu100.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-cxx11-abi-shared-with-deps-1.4.0.zip</span></span><br><span class="line"></span><br><span class="line">libtorch 1.5.0</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.5.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-shared-with-deps-1.5.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-shared-with-deps-1.5.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-shared-with-deps-1.5.0.zip</span></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.5.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-cxx11-abi-shared-with-deps-1.5.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-cxx11-abi-shared-with-deps-1.5.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.5.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.5.1 </span><br><span class="line">cxx11 ABI</span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.5.1%2Bcpu.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-cxx11-abi-shared-with-deps-1.5.1%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-cxx11-abi-shared-with-deps-1.5.1%2Bcu101.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.5.1.zip</span></span><br><span class="line"></span><br><span class="line">libtorch 1.6.0</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.6.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-shared-with-deps-1.6.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-shared-with-deps-1.6.0%2Bcu101.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-shared-with-deps-1.6.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.6.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-cxx11-abi-shared-with-deps-1.6.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-cxx11-abi-shared-with-deps-1.6.0%2Bcu101.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.6.0.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.7.0</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.7.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-shared-with-deps-1.7.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-shared-with-deps-1.7.0%2Bcu101.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-shared-with-deps-1.7.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu110/libtorch-shared-with-deps-1.7.0%2Bcu110.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.7.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-cxx11-abi-shared-with-deps-1.7.0%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-cxx11-abi-shared-with-deps-1.7.0%2Bcu101.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.7.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu110/libtorch-cxx11-abi-shared-with-deps-1.7.0%2Bcu110.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.7.1</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.7.1%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-shared-with-deps-1.7.1%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-shared-with-deps-1.7.1%2Bcu101.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-shared-with-deps-1.7.1.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu110/libtorch-shared-with-deps-1.7.1%2Bcu110.zip</span></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.7.1%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu92/libtorch-cxx11-abi-shared-with-deps-1.7.1%2Bcu92.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu101/libtorch-cxx11-abi-shared-with-deps-1.7.1%2Bcu101.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.7.1.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu110/libtorch-cxx11-abi-shared-with-deps-1.7.1%2Bcu110.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.8.0</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.8.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-shared-with-deps-1.8.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu111/libtorch-shared-with-deps-1.8.0%2Bcu111.zip</span></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.8.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.8.0.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu111/libtorch-cxx11-abi-shared-with-deps-1.8.0%2Bcu111.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.8.1 (LTS)</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.8.1%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-shared-with-deps-1.8.1%2Bcu102.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu111/libtorch-shared-with-deps-1.8.1%2Bcu111.zip</span></span><br><span class="line"></span><br><span class="line">cxx11 ABI</span><br><span class="line"></span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.8.1%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.8.1%2Bcu102.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu111/libtorch-cxx11-abi-shared-with-deps-1.8.1%2Bcu111.zip</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">libtorch 1.9.0</span><br><span class="line">Pre-cxx11 ABI</span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-shared-with-deps-1.9.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-shared-with-deps-1.9.0%2Bcu102.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu111/libtorch-shared-with-deps-1.9.0%2Bcu111.zip</span></span><br><span class="line">cxx11 ABI</span><br><span class="line"><span class="comment"># cpu</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-1.9.0%2Bcpu.zip</span></span><br><span class="line"><span class="comment"># cuda</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu102/libtorch-cxx11-abi-shared-with-deps-1.9.0%2Bcu102.zip</span></span><br><span class="line"><span class="section">https://download.pytorch.org/libtorch/cu111/libtorch-cxx11-abi-shared-with-deps-1.9.0%2Bcu111.zip</span></span><br></pre></td></tr></table></figure>

<h3 id="Source-Build"><a href="#Source-Build" class="headerlink" title="Source Build"></a>Source Build</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/pytorch/pytorch  <span class="comment"># --recursive表示下载子模块，但有些模块很难下载下来，可以先用 git clone https://github.com.cnpmjs.org/pytorch/pytorch </span></span><br><span class="line"><span class="built_in">cd</span> pytorch</span><br></pre></td></tr></table></figure>

<p>克隆下来的是最新版本，执行<code>git tag</code>查看分支，然后<code>git checkout branch_name</code>切换到想要的分支,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git checkout v1.7.1-rc3</span><br><span class="line"></span><br><span class="line"><span class="comment"># if you are updating an existing checkout</span></span><br><span class="line">git submodule <span class="built_in">sync</span></span><br><span class="line">git submodule update --init --recursive</span><br></pre></td></tr></table></figure>

<p><strong>注意：如果下载比较慢或者报错，可以在pytorch目录下查看<code>.gitmodules</code>文件， 切换分支后先把里面网址替换为github加速插件的地址， 然后再执行git submodule sync 和 后面的命令</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br><span class="line"></span><br><span class="line">git config --local http.proxy 127.0.0.1:11000</span><br><span class="line">git config --local https.proxy 127.0.0.1:11000</span><br><span class="line"></span><br><span class="line">git config --local --unset http.proxy</span><br><span class="line">git config --local --unset https.proxy</span><br><span class="line"></span><br><span class="line">unset https.proxy</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/11/Sub_Language/DL_Platform/ONNX/OnnxRuntime/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/11/Sub_Language/DL_Platform/ONNX/OnnxRuntime/" class="post-title-link" itemprop="url">ONNX Infrence</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-11 12:09:10" itemprop="dateCreated datePublished" datetime="2022-04-11T12:09:10+00:00">2022-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/deploy/" itemprop="url" rel="index"><span itemprop="name">deploy</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/deploy/Onnx/" itemprop="url" rel="index"><span itemprop="name">Onnx</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<p><a target="_blank" rel="noopener" href="https://onnxruntime.ai/">Offical web </a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/microsoft/onnxruntime/">github offical </a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/65379070/how-to-use-onnx-model-in-c-code-on-linux">https://stackoverflow.com/questions/65379070/how-to-use-onnx-model-in-c-code-on-linux</a></p>
<p>pytorch to onnx to tensorRT</p>
<h3 id="mx2onnx"><a href="#mx2onnx" class="headerlink" title="mx2onnx"></a>mx2onnx</h3><p> MXNet model to the ONNX model format</p>
<h3 id="onnx2mx"><a href="#onnx2mx" class="headerlink" title="onnx2mx"></a>onnx2mx</h3><h3 id="pytorch2onnx"><a href="#pytorch2onnx" class="headerlink" title="pytorch2onnx"></a>pytorch2onnx</h3><h3 id="pb2onnx"><a href="#pb2onnx" class="headerlink" title="pb2onnx"></a>pb2onnx</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tf2onnx</span><br><span class="line"><span class="keyword">from</span> tf2onnx <span class="keyword">import</span> tf_loader</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert_ckpt</span>(<span class="params">checkpoint, inputs, outputs, out_path</span>):</span><br><span class="line">    graph_def, inputs, outputs = tf_loader.from_checkpoint(checkpoint, inputs, outputs)</span><br><span class="line">    model_path = checkpoint</span><br><span class="line"></span><br><span class="line">    model_proto, external_tensor_storage = tf2onnx.convert.from_graph_def(graph_def,</span><br><span class="line">                                              input_names=inputs,</span><br><span class="line">                                              output_names=outputs,</span><br><span class="line">                                              output_path=out_path</span><br><span class="line">                                              )</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;---1----&#x27;</span>, model_proto)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;---2----&#x27;</span>, external_tensor_storage)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo1</span>():</span><br><span class="line">    inputs = [<span class="string">&#x27;X_in:0&#x27;</span>]</span><br><span class="line">    outputs = [<span class="string">&#x27;softmax:0&#x27;</span>,<span class="string">&#x27; out_argmax:0&#x27;</span> ,<span class="string">&#x27;out_put_k_indices:0&#x27;</span>]</span><br><span class="line">    ck = <span class="string">r&#x27;model.ckpt-100000.meta&#x27;</span></span><br><span class="line">    out_path = <span class="string">r&#x27;test.onnx&#x27;</span></span><br><span class="line">    convert_ckpt(ck, inputs, outputs, out_path)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/11/Sub_Language/DL_Train/Pytorch/inference_platform/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/11/Sub_Language/DL_Train/Pytorch/inference_platform/" class="post-title-link" itemprop="url">pytorch Model c++ inference in platform</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-11 12:00:00" itemprop="dateCreated datePublished" datetime="2022-04-11T12:00:00+00:00">2022-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DNN-platform/" itemprop="url" rel="index"><span itemprop="name">DNN_platform</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DNN-platform/pytorch/" itemprop="url" rel="index"><span itemprop="name">pytorch</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/DNN-platform/pytorch/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h2 id="C-模型调用"><a href="#C-模型调用" class="headerlink" title="C++模型调用"></a>C++模型调用</h2><p><a target="_blank" rel="noopener" href="https://oldpan.me/archives/talk-about-onnx">模型转换思路</a>通常为:</p>
<ul>
<li>Pytorch -&gt; ONNX -&gt; TensorRT</li>
<li>Pytorch -&gt; ONNX -&gt; TVM</li>
<li>Pytorch -&gt; <a target="_blank" rel="noopener" href="https://github.com/longcw/pytorch2caffe">转换工具</a> -&gt; caffe</li>
<li>Pytorch -&gt; torchscript(C++版本Torch) [<strong>此方式</strong>]</li>
<li>pytorch-&gt; JIT -&gt; TensorRT</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://pytorch.org/cppdocs/api/library_root.html">https://pytorch.org/cppdocs/api/library_root.html</a></p>
<p><a target="_blank" rel="noopener" href="https://pytorch.org/tutorials/advanced/cpp_frontend.html">https://pytorch.org/tutorials/advanced/cpp_frontend.html</a></p>
<p>最近所里有一个 GUI 项目需要调用 PyTorch 的模型，虽然之前做过一些，但是大部分用的是 Python 接口，这次对实效性有要求，因此做一个 C++的接口，现在把一些配置事项做个记录。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="下载安装支持库"><a href="#下载安装支持库" class="headerlink" title="下载安装支持库"></a>下载安装支持库</h3><p>首先，需要下载安装<a target="_blank" rel="noopener" href="https://pytorch.org/get-started/locally/"><code>LibTorch</code>支持库</a>，推荐使用<a target="_blank" rel="noopener" href="https://i.loli.net/2020/10/17/IRexd6gaAzskvGZ.png"><img src="/2022/04/11/Sub_Language/DL_Train/Pytorch/inference_platform/IRexd6gaAzskvGZ.png" alt="LibPyTorch"></a>LibPyTorch</p>
<p>下载后直接解压</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.pytorch.org/libtorch/nightly/cpu/libtorch-shared-with-deps-latest.zip</span><br><span class="line">unzip libtorch-shared-with-deps-latest.zip</span><br></pre></td></tr></table></figure>

<h2 id="基于已训练的-Torch-模型"><a href="#基于已训练的-Torch-模型" class="headerlink" title="基于已训练的 Torch 模型"></a>基于已训练的 Torch 模型</h2><h3 id="追踪原始模型"><a href="#追踪原始模型" class="headerlink" title="追踪原始模型"></a>追踪原始模型</h3><p>需要注意的是，如果希望加载 PyTorch 库到 C++中，首先需要基于 JIT 库的 <a target="_blank" rel="noopener" href="https://pytorch.org/docs/master/jit.html#creating-torchscript-code">TorchScript</a> 对模型进行转化，这里以简单<code>resnet18</code>模型来作为示例，可以简单的使用<code>torchvision</code>中的模型库进行生成，接着我们生成一个简单的假数据，利用<code>torch.jit.trace</code>让 TorchScript 能够遍历一遍模型，便可完成追踪。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="comment"># 实例模型</span></span><br><span class="line">model = torchvision.models.resnet18()</span><br><span class="line"><span class="comment"># 假数据</span></span><br><span class="line">example = torch.rand(<span class="number">1</span>, <span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>)</span><br><span class="line"><span class="comment"># 使用JIT遍历模型，从而获得记录</span></span><br><span class="line">traced_script_module = torch.jit.trace(model, example)</span><br></pre></td></tr></table></figure>

<p>对于可能存在依赖于数据输入条件的情况，如以下模型：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyModule</span>(torch.nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, N, M</span>):</span><br><span class="line">        <span class="built_in">super</span>(MyModule, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.weight = torch.nn.Parameter(torch.rand(N, M))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, <span class="built_in">input</span></span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">input</span>.<span class="built_in">sum</span>() &gt; <span class="number">0</span>:</span><br><span class="line">          output = <span class="variable language_">self</span>.weight.mv(<span class="built_in">input</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">          output = <span class="variable language_">self</span>.weight + <span class="built_in">input</span></span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>

<p>数据的前向传播有赖于输入的值，那么可以调用<code>torch.jit.script</code>直接进行转换：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my_module = MyModule(10,20)</span><br><span class="line">traced_script_module2 = torch.jit.script(my_module)</span><br></pre></td></tr></table></figure>

<p>区别在于第二种方式实现时可以直接将正在训练的模型调用加载。 在获得上述的<code>traced_script_module</code>后，实际上这是一个序列化的 torch 张量字典，可以直接调用<code>save</code>方法完成保存:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 保存使用TorchScript遍历的模型</span></span><br><span class="line">traced_script_module.save(<span class="string">&quot;traced_resnet_model.pt&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="加载-Torch-模型"><a href="#加载-Torch-模型" class="headerlink" title="加载 Torch 模型"></a>加载 Torch 模型</h3><p>有了保存后的 pt 模型后，在 C++中的调用，即为和 LibTorch 库的交互，这里以官方的例子作说明</p>
<p>新建 C++项目, CMakeList 配置可以参考以下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required(VERSION <span class="number">3.16</span>)</span><br><span class="line">project(torchcpp)</span><br><span class="line"><span class="built_in">set</span>(Torch_DIR ./libtorch/share/cmake/Torch) <span class="comment">#设置Torch的执行位置</span></span><br><span class="line"></span><br><span class="line">find_package(Torch REQUIRED) <span class="comment"># 查找支持库</span></span><br><span class="line">add_executable(torchcpp main.cpp) <span class="comment"># 项目主入口</span></span><br><span class="line">target_link_libraries(torchcpp <span class="string">&quot;$&#123;TORCH_LIBRARIES&#125;&quot;</span>) <span class="comment"># 指出动态连接库</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>) <span class="comment"># C++标准</span></span><br></pre></td></tr></table></figure>

<p>对应简单加载 C++代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;torch/script.h&gt; // One-stop header.</span></span><br><span class="line"><span class="comment">#include &lt;iostream&gt;</span></span><br><span class="line"><span class="comment">#include &lt;memory&gt;</span></span><br><span class="line"></span><br><span class="line">at::Tensor baseModel(std::vector&lt;torch::jit::IValue&gt; inputs, torch::jit::script::Module module) &#123;</span><br><span class="line">    at::Tensor output = module.forward(inputs).toTensor();</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> main(<span class="built_in">int</span> argc, const char *argv[]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">2</span>) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;usage: example-app &lt;path-to-exported-script-module&gt;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    torch::jit::script::Module module;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        // 使用 torch::jit::load() 反序列化原有模型.</span><br><span class="line">        module = torch::jit::load(argv[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    catch (const c10::Error &amp;e) &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;error loading the model\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;model loads ok\n&quot;</span>;</span><br><span class="line">    //  生成假数据以测试</span><br><span class="line">    std::vector&lt;torch::jit::IValue&gt; inputs;</span><br><span class="line">    inputs.push_back(torch::ones(&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>&#125;));</span><br><span class="line">    at::Tensor output = baseModel(inputs, module);</span><br><span class="line">    std::cout &lt;&lt; output.<span class="built_in">slice</span>(<span class="number">1</span>, <span class="number">0</span>, <span class="number">5</span>) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同时我们新建一个 build 文件夹以保存编译时文件</p>
<p>至此项目大致结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">├── build</span><br><span class="line">├── CMakeLists.txt</span><br><span class="line">└── main.cpp</span><br></pre></td></tr></table></figure>

<p>进入 build 文件夹执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(base) ➜  cd build</span><br><span class="line">(base) ➜  cmake ..</span><br><span class="line">(base) ➜  cmake --build . --config Release</span><br></pre></td></tr></table></figure>

<p>可以获得类似输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">(base) ➜  build cmake ..</span><br><span class="line">-- The C compiler identification is GNU 9.3.0</span><br><span class="line">-- The CXX compiler identification is GNU 9.3.0</span><br><span class="line">-- Check for working C compiler: /usr/bin/cc</span><br><span class="line">-- Check for working C compiler: /usr/bin/cc -- works</span><br><span class="line">-- Detecting C compiler ABI info</span><br><span class="line">-- Detecting C compiler ABI info - done</span><br><span class="line">-- Detecting C compile features</span><br><span class="line">-- Detecting C compile features - done</span><br><span class="line">-- Check for working CXX compiler: /usr/bin/c++</span><br><span class="line">-- Check for working CXX compiler: /usr/bin/c++ -- works</span><br><span class="line">-- Detecting CXX compiler ABI info</span><br><span class="line">-- Detecting CXX compiler ABI info - done</span><br><span class="line">-- Detecting CXX compile features</span><br><span class="line">-- Detecting CXX compile features - done</span><br><span class="line">-- Looking for pthread.h</span><br><span class="line">-- Looking for pthread.h - found</span><br><span class="line">-- Performing Test CMAKE_HAVE_LIBC_PTHREAD</span><br><span class="line">-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Failed</span><br><span class="line">-- Looking for pthread_create in pthreads</span><br><span class="line">-- Looking for pthread_create in pthreads - not found</span><br><span class="line">-- Looking for pthread_create in pthread</span><br><span class="line">-- Looking for pthread_create in pthread - found</span><br><span class="line">-- Found Threads: TRUE</span><br><span class="line">-- Found CUDA: /usr/local/cuda (found version &quot;10.2&quot;)</span><br><span class="line">-- Caffe2: CUDA detected: 10.2</span><br><span class="line">-- Caffe2: CUDA nvcc is: /usr/local/cuda/bin/nvcc</span><br><span class="line">-- Caffe2: CUDA toolkit directory: /usr/local/cuda</span><br><span class="line">-- Caffe2: Header version is: 10.2</span><br><span class="line">-- Found CUDNN: /usr/local/cuda/lib64/libcudnn.so</span><br><span class="line">-- Found cuDNN: v8.0.4  (include: /usr/local/cuda/include, library: /usr/local/cuda/lib64/libcudnn.so)</span><br><span class="line">-- Autodetected CUDA architecture(s):  7.5</span><br><span class="line">-- Added CUDA NVCC flags for: -gencode;arch=compute_75,code=sm_75</span><br><span class="line">-- Found Torch: /media/hao/Data/Code/DL/torchcppsample/libtorch/lib/libtorch.so</span><br><span class="line">-- Configuring done</span><br><span class="line">-- Generating done</span><br><span class="line">-- Build files have been written to: /media/hao/Data/Code/DL/torchcppsample/build</span><br><span class="line">(base) ➜  build cmake --build . --config Release</span><br><span class="line">Scanning dependencies of target torchcpp</span><br><span class="line">[ 50%] Building CXX object CMakeFiles/torchcpp.dir/main.cpp.o</span><br><span class="line">[100%] Linking CXX executable torchcpp</span><br><span class="line">[100%] Built target torchcpp</span><br></pre></td></tr></table></figure>

<p>接着前往上级文件夹，执行编译得到的主程序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(base) ➜  cd ..</span><br><span class="line">(base) ➜  torchcppsample build/torchcpp Python/traced_resnet_model.pt</span><br><span class="line">model loads ok</span><br><span class="line"> 0.1439 -0.8914 -0.0475  0.2474  0.3108</span><br><span class="line">[ CPUFloatType&#123;1,5&#125; ]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用CLion等IDE可以更简单的编译管理，而不需要自行build。</p>
</blockquote>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>注意加载模型时，两者必须在同一设备(Device)中。</p>
<h2 id="基于-C-前端训练模型"><a href="#基于-C-前端训练模型" class="headerlink" title="基于 C++ 前端训练模型"></a>基于 C++ 前端训练模型</h2><p>实际上 C++前端提供了训练模型的接口，但是实施难度不低，相比 Python 训练完成后转 TypeScript 调用，这个方式稍显复杂。 官方提供的教程如下：<a target="_blank" rel="noopener" href="https://pytorch.org/tutorials/advanced/cpp_frontend.html">使用 PyTorch 的 C++前端</a>，后续再更新吧。</p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><p><a target="_blank" rel="noopener" href="https://pytorch.org/tutorials/advanced/cpp_export.html">Offical Doc  Pytorch cpp_export</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/66707105">zhuhu_C++ 如何调用Pytorch模型</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/carsonzhu/p/11197048.html">2019-07 Cnblog 使用C++调用并部署pytorch模型</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36481821/article/details/107504333">2020-07 CSDN Ubuntu下C++调用pytorch训练好模型–利用libtorch</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/geoffreyone/p/10827010.html">⭐2019-05 Cnblog 使用C++调用pytorch模型(Linux)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.waynehfut.com/2020/10/17/pytorchcpp/">⭐2020-10 使用 C++ 调用 PyTorch 模型</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/10/Course/AutomaticDrive/AutoDriver_04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/" class="post-title-link" itemprop="url">无人驾驶（4）动态环境感知与2D检测</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-10 12:00:00" itemprop="dateCreated datePublished" datetime="2022-04-10T12:00:00+00:00">2022-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Autopilot/" itemprop="url" rel="index"><span itemprop="name">Autopilot</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Autopilot/%E5%85%A5%E9%97%A8%E6%8F%90%E9%AB%98/" itemprop="url" rel="index"><span itemprop="name">入门提高</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="无人驾驶中的动态环境检测-2D检测"><a href="#无人驾驶中的动态环境检测-2D检测" class="headerlink" title="无人驾驶中的动态环境检测-2D检测"></a>无人驾驶中的动态环境检测-2D检测</h1><p>[TOC]</p>
<h2 id="2D检测"><a href="#2D检测" class="headerlink" title="2D检测"></a>2D检测</h2><p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220412180039632.png" alt="image-20220412180039632"></p>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/v2-7c925e17d56f866a8a48772408764872_r.jpg" alt="preview"></p>
<h3 id="IDea"><a href="#IDea" class="headerlink" title="IDea:"></a>IDea:</h3><ul>
<li>位置：先找到所有的ROI<ul>
<li>Sliding Window &#x2F; Slective Search &#x2F; … | <strong>CNN(RPN …)</strong></li>
</ul>
</li>
<li>类别：对每个ROI进行分类提取类别信息<ul>
<li>HOG&#x2F;DPM&#x2F;SIFT&#x2F;LBP&#x2F;… | <strong>CNN(conv pooling)</strong></li>
<li>SVM &#x2F; Adaboost &#x2F; … | <strong>CNN (softmax ….)</strong></li>
</ul>
</li>
<li>位置修正：Bounding Box Regression<ul>
<li>Linear Regresion &#x2F; … | <strong>CNN(regression …)</strong></li>
</ul>
</li>
</ul>
<h3 id="How-to-Generate-ROI"><a href="#How-to-Generate-ROI" class="headerlink" title="How to Generate ROI"></a>How to Generate ROI</h3><p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/v2-62f7f35e1dcacfb845d3dab24faac310_r.jpg" alt="preview"></p>
<h3 id="How-To-Classify-ROI"><a href="#How-To-Classify-ROI" class="headerlink" title="How To Classify ROI"></a>How To Classify ROI</h3><p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/v2-97b35fb3615df521e1e029e3178491ba_r.jpg" alt="preview"></p>
<h2 id="4-1-two-step-基于图片的检测方法"><a href="#4-1-two-step-基于图片的检测方法" class="headerlink" title="4.1 two-step  (基于图片的检测方法)"></a>4.1 two-step  (基于图片的检测方法)</h2><ul>
<li>RCNN, SPPnet, Fast-RCNN, Faster-RCNN</li>
</ul>
<h3 id="Befor-CNN"><a href="#Befor-CNN" class="headerlink" title="Befor CNN"></a>Befor CNN</h3><ul>
<li><p>位置：sliding window &#x2F; region proposal(候选框)</p>
<ul>
<li>手工特征 + 分类器</li>
<li>位置修正</li>
</ul>
</li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/v2-4ddbd3a444109c0fc7836c0a62b573ad_720w.jpg" alt="img"></p>
<h3 id="RCNN"><a href="#RCNN" class="headerlink" title="RCNN"></a>RCNN</h3><ul>
<li>位置：Selective Search 提取候选框 </li>
<li>类别：CNN提取特征 + SVM分类<ul>
<li>每个候选区域都要做一遍卷积，太多重复计算</li>
</ul>
</li>
<li>位置修正：Linear Regression</li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/v2-19d879caef80ceb7ddcc545e227f284e_720w.jpg" alt="img"></p>
<h3 id="SPPnet"><a href="#SPPnet" class="headerlink" title="SPPnet"></a>SPPnet</h3><ul>
<li>位置：Selective Search 提取候选框 </li>
<li>类别：CNN提取特征 + SVM分类<ul>
<li>共享卷积，大大降低计算量</li>
<li>SPP层，不同尺度的特征–&gt;固定特尺度特征（后接全连接层）<ul>
<li>把原始图片中的box区域mapping映射到CNN提取后的feature的一个box</li>
<li>通过金字塔池化，把原本不同大小的box，提取成固定大小的特征</li>
<li>输入到FC层</li>
</ul>
</li>
</ul>
</li>
<li>位置修正：Linear Regression</li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220417232415966.png" alt="image-20220417232415966"></p>
<h3 id="Fast-RCNN"><a href="#Fast-RCNN" class="headerlink" title="Fast-RCNN"></a>Fast-RCNN</h3><ul>
<li>位置：Selective Search 提取候选框 </li>
<li>类别：CNN特征提取 + <em><strong>CNN分类</strong></em><ul>
<li>分类和回归都使用CNN实现，两种损失可以反传以实现联动调参（半end-to-end）</li>
<li>SPP层—换成—&gt;ROI pooling: （可能损失精读）加速计算</li>
</ul>
</li>
<li>位置修正：<em><strong>CNN回归</strong></em></li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220417232604317.png" alt="image-20220417232604317"></p>
<h3 id="Faster-RCNN"><a href="#Faster-RCNN" class="headerlink" title="Faster-RCNN"></a>Faster-RCNN</h3><ul>
<li>位置：CNN提取候选框<ul>
<li>RPN：Region Proposal Net<ul>
<li>feature 点对应的原图感受野框处生成不同ration&#x2F;scale的anchor box</li>
<li>对anchor box (锚点框) 二分类 + 回归<ul>
<li>2k socre 是否有物体</li>
<li>4k coork 回归量，修正位置（$\delta{A}$）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>类别：CNN特征提取 + CNN分类</li>
<li>位置修正：CNN回归</li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220417233138483.png" alt="image-20220417233138483"></p>
<h2 id="4-2-one-step"><a href="#4-2-one-step" class="headerlink" title="4.2 one-step"></a>4.2 one-step</h2><ul>
<li>YOLO,</li>
<li>SSD</li>
<li>YOLOv2</li>
</ul>
<h3 id="YOLO"><a href="#YOLO" class="headerlink" title="YOLO"></a>YOLO</h3><ul>
<li>位置：<ul>
<li>Faster-RCNN</li>
<li>YOLO<ul>
<li>全图划分成7x7的网格，每个网格对应2个default box</li>
<li>没有候选框，直接对default box做全分类+回归（box中心坐标的x,y相对于对应的网格归一化到0-1之间，w,h用图像的width和height归一化到0-1之间）</li>
<li>FC1—-&gt;FC2{1470x1}–reshape-&gt;{7x7x30} ————{1x1x30}</li>
</ul>
</li>
</ul>
</li>
<li>类别：CNN提取特征 + CNN分类</li>
<li>优点：实时性</li>
<li>缺点：<ul>
<li>准确率不高（不如faster-rcnn）；定位精度差（anchor box不够丰富且只能回归修正一次）</li>
<li>小物体差：anchor和scale不够多样。</li>
<li>不规则物体差：anchor的ratio不够多样。</li>
</ul>
</li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220418014209305.png" alt="image-20220418014209305"></p>
<p>1x1x30的含义：</p>
<p>​    两个默认框的预测值</p>
<p>​    4 xywh (坐标预测)， 1， 4 xywh（坐标预测）， 1， 20（20个分类预测）</p>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220418021347698.png" alt="image-20220418021347698"></p>
<h3 id="SSD"><a href="#SSD" class="headerlink" title="SSD"></a>SSD</h3><ul>
<li>位置：<ul>
<li>借鉴RPN的anchor Box机制: feature点对应的原图感受野框处生成不同ratio&#x2F;scale的default box</li>
<li>没有候选框！直接对default box做全分类+回归</li>
</ul>
</li>
<li>类别：CNN提取特征 + CNN分类<ul>
<li>多感受野特征词输出：前面层感受野小适合小物件，后面层感受野大适合大物体。</li>
</ul>
</li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220418021934942.png" alt="image-20220418021934942"></p>
<h3 id="YOLOv2"><a href="#YOLOv2" class="headerlink" title="YOLOv2"></a>YOLOv2</h3><ul>
<li>更丰富的default box<ul>
<li>从数据集统计出default box(k-means)；随着k的增大，IOU也增大（高召回率）但是复杂度也在增加，最终选择k&#x3D;5</li>
</ul>
</li>
<li>更灵活的类别预测<ul>
<li>把预测类别的机制从空间位置（cell）中解耦，由default box同时预测类别和坐标，有效解决物体重叠。</li>
<li></li>
</ul>
</li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220418022547449.png" alt="image-20220418022547449"></p>
<h3 id="YOLOv3"><a href="#YOLOv3" class="headerlink" title="YOLOv3"></a>YOLOv3</h3><ul>
<li>更好的基础网络<ul>
<li>darknet-19 换成darknet-53</li>
</ul>
</li>
<li>考虑多尺寸<ul>
<li>多尺度</li>
<li>多感受野特征层输出</li>
<li>更多default box：K&#x3D;9，被3个输出平分3*(5+80)&#x3D;255; </li>
<li>3个box 5(x,y,w,h,confi), 80(coco class)</li>
<li></li>
</ul>
</li>
</ul>
<p><img src="/2022/04/10/Course/AutomaticDrive/AutoDriver_04/image-20220418023004836.png" alt="image-20220418023004836"></p>
<h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><p><a target="_blank" rel="noopener" href="https://github.com/andylei77/object-detector">https://github.com/andylei77/object-detector</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/04/Sub_Language/CPlus/Cplus_CallPythonDemo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/04/Sub_Language/CPlus/Cplus_CallPythonDemo/" class="post-title-link" itemprop="url">C++ python Tutorial</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-04 12:03:34" itemprop="dateCreated datePublished" datetime="2022-04-04T12:03:34+00:00">2022-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dev/" itemprop="url" rel="index"><span itemprop="name">dev</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dev/c/" itemprop="url" rel="index"><span itemprop="name">c++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h3 id="环境配置VS-Studio"><a href="#环境配置VS-Studio" class="headerlink" title="环境配置VS Studio"></a>环境配置VS Studio</h3><h4 id="c-cpp-properties-json"><a href="#c-cpp-properties-json" class="headerlink" title="c_cpp_properties.json"></a>c_cpp_properties.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;windows-gcc-x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;includePath&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/**&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;C:/Users/Simon/.conda/envs/torch_gpu/include/&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;C:/Users/Simon/.conda/envs/torch_gpu/Lib/site-packages/numpy/core/include&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;compilerPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;D:/Tools/Mingw/mingw64/bin/gcc.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cStandard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;default&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cppStandard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;c++11&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;intelliSenseMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;windows-gcc-x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;compilerArgs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="tasks-json"><a href="#tasks-json" class="headerlink" title="tasks.json"></a>tasks.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C/C++: g++编译前清理&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rm&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;$&#123;workspaceRoot&#125;/*.exe&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build c++Callpython&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;g++&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;-g&quot;</span><span class="punctuation">,</span> <span class="string">&quot;c++_python.cpp&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-I&quot;</span><span class="punctuation">,</span> <span class="string">&quot;C:/Users/Simon/.conda/envs/torch_gpu/include/&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-I&quot;</span><span class="punctuation">,</span> <span class="string">&quot;C:/Users/Simon/.conda/envs/torch_gpu/Lib/site-packages/numpy/core/include&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-L&quot;</span><span class="punctuation">,</span> <span class="string">&quot;C:/Users/Simon/.conda/envs/torch_gpu/libs/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;-o&quot;</span><span class="punctuation">,</span> <span class="string">&quot;c++_python.exe&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;problemMatcher&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;dependsOn&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;C/C++: g++编译前清理&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// g++ -g c++_python.cpp -L ./libs/* -o c++_python.exe</span></span><br><span class="line"><span class="comment">// -fdiagnostics-color=always</span></span><br></pre></td></tr></table></figure>

<h3 id="0-Test-Run"><a href="#0-Test-Run" class="headerlink" title="0. Test Run"></a>0. Test Run</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;numpy/arrayobject.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Python.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ref: https://wenku.baidu.com/view/01fab1346f175f0e7cd184254b35eefdc8d315cd.html</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">demo0</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Py_SetPythonHome</span>(<span class="string">L&quot;C:/Users/Simon/.conda/envs/torch_gpu&quot;</span>);</span><br><span class="line">    <span class="built_in">Py_Initialize</span>();</span><br><span class="line">    <span class="built_in">PyRun_SimpleString</span>(<span class="string">&quot;print(&#x27;hello&#x27;)&quot;</span>);</span><br><span class="line">    <span class="built_in">Py_Finalize</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-C-传参"><a href="#1-C-传参" class="headerlink" title="1. C++传参"></a>1. C++传参</h3><p>call python method, set parameter ,return value</p>
<p>常用的有两种方法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">使用 PyTuple_New 创建元组， PyTuple_SetItem 设置元组值</span><br><span class="line"></span><br><span class="line">PyObject* args = <span class="built_in">PyTuple_New</span>(<span class="number">3</span>);</span><br><span class="line">PyObject* arg1 = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;i&quot;</span>, <span class="number">100</span>); <span class="comment">// 整数参数</span></span><br><span class="line">PyObject* arg2 = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;f&quot;</span>, <span class="number">3.14</span>); <span class="comment">// 浮点数参数</span></span><br><span class="line">PyObject* arg3 = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;s&quot;</span>, <span class="string">&quot;hello&quot;</span>); <span class="comment">// 字符串参数</span></span><br><span class="line"><span class="built_in">PyTuple_SetItem</span>(args, <span class="number">0</span>, arg1);</span><br><span class="line"><span class="built_in">PyTuple_SetItem</span>(args, <span class="number">1</span>, arg2);</span><br><span class="line"><span class="built_in">PyTuple_SetItem</span>(args, <span class="number">2</span>, arg3);</span><br><span class="line"></span><br><span class="line"># 直接使用Py_BuildValue构造元组</span><br><span class="line"></span><br><span class="line">PyObject* args = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;(ifs)&quot;</span>, <span class="number">100</span>, <span class="number">3.14</span>, <span class="string">&quot;hello&quot;</span>);</span><br><span class="line">PyObject* args = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;()&quot;</span>); <span class="comment">// 无参函数</span></span><br><span class="line">原文链接：https:<span class="comment">//blog.csdn.net/tobacco5648/article/details/50890106</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/04/Sub_Language/CPlus/Cplus_CallPythonDemo/parameters_demo.png" alt="img"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">demo1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">Py_SetPythonHome</span>(<span class="string">L&quot;C:/Users/Simon/.conda/envs/torch_gpu&quot;</span>);</span><br><span class="line">    <span class="built_in">Py_Initialize</span>();</span><br><span class="line"></span><br><span class="line">    PyObject *<span class="keyword">module</span> = <span class="literal">NULL</span>;</span><br><span class="line">    PyObject *pFunc = <span class="literal">NULL</span>;</span><br><span class="line">    PyObject *pArg = <span class="literal">NULL</span>;</span><br><span class="line">    PyObject *value = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">// 导入文件</span></span><br><span class="line">    <span class="keyword">module</span> = <span class="built_in">PyImport_ImportModule</span>(<span class="string">&quot;pthonnx_ru&quot;</span>);</span><br><span class="line"></span><br><span class="line">    pFunc = <span class="built_in">PyObject_GetAttrString</span>(<span class="keyword">module</span>, <span class="string">&quot;demo1&quot;</span>); <span class="comment">// 找到函数地址</span></span><br><span class="line">    pArg = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;(S)&quot;</span>, <span class="string">&quot;my is c++ test&quot;</span>);</span><br><span class="line">    value = <span class="built_in">PyEval_CallObject</span>(pFunc, pArg); <span class="comment">// 调用函数</span></span><br><span class="line">    <span class="type">float</span> val;</span><br><span class="line">    <span class="built_in">PyArg_Parse</span>(value, <span class="string">&quot;f&quot;</span>, &amp;val);</span><br><span class="line">    <span class="comment">// PyArg_ParseTuple(value, &quot;f&quot;, &amp;val);</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--val1--&quot;</span> &lt;&lt; val &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    pFunc = <span class="built_in">PyObject_GetAttrString</span>(<span class="keyword">module</span>, <span class="string">&quot;Add&quot;</span>);</span><br><span class="line">    pArg = <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;i, i)&quot;</span>, <span class="number">21</span>, <span class="number">23</span>);</span><br><span class="line">    value = <span class="built_in">PyEval_CallObject</span>(pFunc, pArg);</span><br><span class="line">    <span class="built_in">PyArg_Parse</span>(value, <span class="string">&quot;f&quot;</span>, &amp;val);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--val2--&quot;</span> &lt;&lt; val &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">PyRun_SimpleString</span>(<span class="string">&quot;print(&#x27;hello&#x27;)&quot;</span>);</span><br><span class="line">    <span class="built_in">Py_Finalize</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-传递List参数"><a href="#2-传递List参数" class="headerlink" title="2.传递List参数"></a>2.传递List参数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">demo2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello World&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Py_SetPythonHome</span>(<span class="string">L&quot;C:/Users/Simon/.conda/envs/torch_gpu&quot;</span>);</span><br><span class="line">    <span class="built_in">Py_Initialize</span>();</span><br><span class="line"></span><br><span class="line">    PyObject *<span class="keyword">module</span> = <span class="literal">NULL</span>;</span><br><span class="line">    PyObject *pFunc = <span class="literal">NULL</span>;</span><br><span class="line">    PyObject *pArg = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">// 导入文件</span></span><br><span class="line">    <span class="keyword">module</span> = <span class="built_in">PyImport_ImportModule</span>(<span class="string">&quot;pthonnx_ru&quot;</span>);</span><br><span class="line">    <span class="comment">// 找到函数地址</span></span><br><span class="line">    pFunc = <span class="built_in">PyObject_GetAttrString</span>(<span class="keyword">module</span>, <span class="string">&quot;demo2&quot;</span>);</span><br><span class="line">    <span class="comment">// Set Parameter</span></span><br><span class="line">    PyObject *pyParams = <span class="built_in">PyList_New</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">PyList_Append</span>(pyParams, <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;i&quot;</span>, <span class="number">5</span>)); <span class="comment">// float</span></span><br><span class="line">    <span class="built_in">PyList_Append</span>(pyParams, <span class="built_in">Py_BuildValue</span>(<span class="string">&quot;i&quot;</span>, <span class="number">3</span>));</span><br><span class="line">    PyObject *args = <span class="built_in">PyTuple_New</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">PyTuple_SetItem</span>(args, <span class="number">0</span>, pyParams);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用函数</span></span><br><span class="line">    <span class="type">float</span> val;</span><br><span class="line">    PyObject *value = <span class="built_in">PyEval_CallObject</span>(pFunc, args);</span><br><span class="line">    <span class="built_in">PyArg_Parse</span>(value, <span class="string">&quot;f&quot;</span>, &amp;val);</span><br><span class="line">    <span class="comment">// PyArg_ParseTuple(value, &quot;f&quot;, &amp;val);</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--val--&quot;</span> &lt;&lt; val &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">PyRun_SimpleString</span>(<span class="string">&quot;print(&#x27;hello&#x27;)&quot;</span>);</span><br><span class="line">    <span class="built_in">Py_Finalize</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-python类操作，类属性，类成员函数-Todo"><a href="#3-python类操作，类属性，类成员函数-Todo" class="headerlink" title="3 python类操作，类属性，类成员函数 Todo"></a>3 python类操作，类属性，类成员函数 Todo</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">demo3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Hello World&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Py_SetPythonHome</span>(<span class="string">L&quot;C:/Users/Simon/.conda/envs/torch_gpu&quot;</span>);</span><br><span class="line">    <span class="built_in">Py_Initialize</span>();</span><br><span class="line"></span><br><span class="line">    PyObject *<span class="keyword">module</span> = <span class="literal">NULL</span>;</span><br><span class="line">    PyObject *pFunc = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">module</span> = <span class="built_in">PyImport_ImportModule</span>(<span class="string">&quot;pthonnx_ru&quot;</span>); <span class="comment">// 导入文件</span></span><br><span class="line">    pFunc = <span class="built_in">PyObject_GetAttrString</span>(<span class="keyword">module</span>, <span class="string">&quot;demo2&quot;</span>); <span class="comment">// 找到函数地址</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建参数</span></span><br><span class="line">    PyObject *pArgs = <span class="built_in">PyTuple_New</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// 设置函数参数的值</span></span><br><span class="line">    <span class="type">int</span> InParm = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">PyTuple_SetItem</span>(pArgs, <span class="number">0</span>, <span class="built_in">PyLong_FromLong</span>(InParm));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用函数</span></span><br><span class="line">    <span class="type">float</span> val;</span><br><span class="line">    PyObject *value = <span class="built_in">PyEval_CallObject</span>(pFunc, pArgs);</span><br><span class="line">    <span class="built_in">PyArg_Parse</span>(value, <span class="string">&quot;f&quot;</span>, &amp;val);</span><br><span class="line">    <span class="comment">// PyArg_ParseTuple(value, &quot;f&quot;, &amp;val);</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--val--&quot;</span> &lt;&lt; val &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Py_Finalize</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-传递c-数组转python的list"><a href="#4-传递c-数组转python的list" class="headerlink" title="4 传递c++数组转python的list"></a>4 传递c++数组转python的list</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">demo4</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">Py_SetPythonHome</span>(<span class="string">L&quot;C:/Users/Simon/.conda/envs/torch_gpu&quot;</span>);</span><br><span class="line">    <span class="built_in">Py_Initialize</span>();</span><br><span class="line">    <span class="comment">// #include &quot;numpy/arrayobject.h&quot;</span></span><br><span class="line">    <span class="comment">// api doc : https://numpy.org/doc/1.17/reference/c-api.array.html#importing-the-api</span></span><br><span class="line">    <span class="built_in">import_array</span>();</span><br><span class="line"></span><br><span class="line">    PyObject *<span class="keyword">module</span> = <span class="literal">NULL</span>;</span><br><span class="line">    PyObject *pFunc = <span class="literal">NULL</span>;</span><br><span class="line">    PyObject *pArgs = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">module</span> = <span class="built_in">PyImport_ImportModule</span>(<span class="string">&quot;pthonnx_ru&quot;</span>);</span><br><span class="line">    pFunc = <span class="built_in">PyObject_GetAttrString</span>(<span class="keyword">module</span>, <span class="string">&quot;demo4&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> buf[<span class="number">2</span>][<span class="number">3</span>];</span><br><span class="line">    buf[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    buf[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1.1230</span>;</span><br><span class="line">    buf[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">2.340</span>;</span><br><span class="line">    buf[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">4.540</span>;</span><br><span class="line">    buf[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">6.900</span>;</span><br><span class="line">    buf[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">8.090</span>;</span><br><span class="line"></span><br><span class="line">    pArgs = <span class="built_in">PyTuple_New</span>(<span class="number">1</span>);</span><br><span class="line">    npy_intp dims[<span class="number">2</span>] = &#123;<span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">// 定义list的shape</span></span><br><span class="line">    <span class="type">int</span> ND = <span class="number">2</span>; <span class="comment">// list 维度</span></span><br><span class="line">    PyObject * pPyArray = <span class="built_in">PyArray_SimpleNewFromData</span>(ND, dims, NPY_FLOAT, buf); <span class="comment">// list dim,shape, type, buffer</span></span><br><span class="line">    <span class="built_in">PyTuple_SetItem</span>(pArgs, <span class="number">0</span>, pPyArray); <span class="comment">// 变量转换</span></span><br><span class="line">    <span class="built_in">PyEval_CallObject</span>(pFunc, pArgs);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Py_Finalize</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/2/extending/embedding.html">https://docs.python.org/2/extending/embedding.html</a></p>
<p><a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/01fab1346f175f0e7cd184254b35eefdc8d315cd.html">https://wenku.baidu.com/view/01fab1346f175f0e7cd184254b35eefdc8d315cd.html</a></p>
<p><a target="_blank" rel="noopener" href="https://numpy.org/doc/1.17/reference/c-api.array.html">https://numpy.org/doc/1.17/reference/c-api.array.html</a></p>
<p><a target="_blank" rel="noopener" href="https://numpy.org/doc/1.17/reference/c-api.array.html#importing-the-api">https://numpy.org/doc/1.17/reference/c-api.array.html#importing-the-api</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/04/Course/AutomaticDrive/AutoDriver_03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/" class="post-title-link" itemprop="url">无人驾驶（3）感知基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-04 12:00:00" itemprop="dateCreated datePublished" datetime="2022-04-04T12:00:00+00:00">2022-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Autopilot/" itemprop="url" rel="index"><span itemprop="name">Autopilot</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Autopilot/%E5%85%A5%E9%97%A8%E6%8F%90%E9%AB%98/" itemprop="url" rel="index"><span itemprop="name">入门提高</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="无人驾驶感知基础–车道线检测"><a href="#无人驾驶感知基础–车道线检测" class="headerlink" title="无人驾驶感知基础–车道线检测"></a>无人驾驶感知基础–车道线检测</h1><p> [toc]</p>
<h2 id="3-1无人驾驶感知系统概述"><a href="#3-1无人驾驶感知系统概述" class="headerlink" title="3.1无人驾驶感知系统概述"></a>3.1无人驾驶感知系统概述</h2><p>Preception</p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-c50854cd258011559f25add79b3dfdbd_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-d6424c5f1a5f53a18e9fb8c72a6abca5_1440w.jpg" alt="img"></p>
<h3 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h3><ul>
<li>实战基于传统方法的车道线检测</li>
<li>图片分割算法综述</li>
<li>实战基于深度学习的图片分割算法综述</li>
</ul>
<h2 id="3-2-实战分割基于传统方法的车道线检测"><a href="#3-2-实战分割基于传统方法的车道线检测" class="headerlink" title="3.2 实战分割基于传统方法的车道线检测"></a>3.2 实战分割基于传统方法的车道线检测</h2><p>静态环境感知与分割算法</p>
<p><a target="_blank" rel="noopener" href="https://github.com/andylei77/lane-detector">https://github.com/andylei77/lane-detector</a></p>
<p>对比算法：</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/36847814">Zhihu算法集锦（8）|自动驾驶|车道检测实用算法</a></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 该算法利用了OpenCV库和Udacity自动驾驶汽车数据库的相关内容。</span></span><br><span class="line">摄像头校准，以移除镜头畸变（Lens distortion）的影响</span><br><span class="line">图像前处理，用于识别车道线</span><br><span class="line">道路视角变换（Perspective transform）</span><br><span class="line">车道线检测</span><br><span class="line">车辆定位和车道半径计算</span><br></pre></td></tr></table></figure>

<h3 id="3-2-2-canny边缘检测"><a href="#3-2-2-canny边缘检测" class="headerlink" title="3.2.2 canny边缘检测"></a>3.2.2 canny边缘检测</h3><p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/image-20220412102729106.png" alt="image-20220412102729106"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">do_canny</span>(<span class="params">frame</span>):</span><br><span class="line">    <span class="comment"># Converts frame to grayscale because we only need the luminance channel for detecting edges - less computationally expensive</span></span><br><span class="line">    gray = cv.cvtColor(frame, cv.COLOR_RGB2GRAY)</span><br><span class="line">    <span class="comment"># Applies a 5x5 gaussian blur with deviation of 0 to frame - not mandatory since Canny will do this for us</span></span><br><span class="line">    blur = cv.GaussianBlur(gray, (<span class="number">5</span>, <span class="number">5</span>), <span class="number">0</span>)</span><br><span class="line">    <span class="comment"># Applies Canny edge detector with minVal of 50 and maxVal of 150</span></span><br><span class="line">    canny = cv.Canny(blur, <span class="number">50</span>, <span class="number">150</span>)</span><br><span class="line">    <span class="keyword">return</span> canny</span><br></pre></td></tr></table></figure>

<h3 id="3-2-3-手动分割路面区域"><a href="#3-2-3-手动分割路面区域" class="headerlink" title="3.2.3 手动分割路面区域"></a>3.2.3 手动分割路面区域</h3><p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/image-20220412103304006.png" alt="image-20220412103304006"></p>
<p>CV坐标系</p>
<ul>
<li>polygones&#x3D;[] # 手动指定三角形的三个点</li>
<li>mask &#x3D; zeros_like() 生成mask</li>
<li>fillpoly(mask, polygones, 255) ;  poly 范围内填充255，区域外保留原始值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">do_segment</span>(<span class="params">frame</span>):</span><br><span class="line">    <span class="comment"># Since an image is a multi-directional array containing the relative intensities of each pixel in the image, we can use frame.shape to return a tuple: [number of rows, number of columns, number of channels] of the dimensions of the frame</span></span><br><span class="line">    <span class="comment"># frame.shape[0] give us the number of rows of pixels the frame has. Since height begins from 0 at the top, the y-coordinate of the bottom of the frame is its height</span></span><br><span class="line">    height = frame.shape[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># Creates a triangular polygon for the mask defined by three (x, y) coordinates</span></span><br><span class="line">    polygons = np.array([</span><br><span class="line">                            [(<span class="number">0</span>, height), (<span class="number">800</span>, height), (<span class="number">380</span>, <span class="number">290</span>)]</span><br><span class="line">                        ])</span><br><span class="line">    <span class="comment"># Creates an image filled with zero intensities with the same dimensions as the frame</span></span><br><span class="line">    mask = np.zeros_like(frame)</span><br><span class="line">    <span class="comment"># Allows the mask to be filled with values of 1 and the other areas to be filled with values of 0</span></span><br><span class="line">    cv.fillPoly(mask, polygons, <span class="number">255</span>)</span><br><span class="line">    <span class="comment"># A bitwise and operation between the mask and frame keeps only the triangular area of the frame</span></span><br><span class="line">    segment = cv.bitwise_and(frame, mask)</span><br><span class="line">    <span class="keyword">return</span> segment</span><br></pre></td></tr></table></figure>

<h3 id="3-2-4-霍夫变换得到车道线"><a href="#3-2-4-霍夫变换得到车道线" class="headerlink" title="3.2.4 霍夫变换得到车道线"></a>3.2.4 霍夫变换得到车道线</h3><ul>
<li><p>霍夫变换</p>
<ul>
<li>参数和变量互换</li>
</ul>
</li>
<li><p>图像中的一条线，变换到霍夫空间，就变成一个（霍夫空间的）点</p>
</li>
<li><p>图像中的一个点（有多条线穿过），对应霍夫空间的一条线；</p>
</li>
</ul>
<p>cartesian: 笛卡尔坐标系</p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/image-20220412103416004.png" alt="image-20220412103416004"></p>
<ul>
<li>将笛卡尔坐标系中一系列的可能的点（连接成线），投影到霍夫空间（应该是一个点）</li>
</ul>
<p>另一种霍夫空间（极坐标）</p>
<ul>
<li><strong>极坐标法表示直线</strong></li>
</ul>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/image-20220412103957969.png" alt="image-20220412103957969"></p>
<p>HoughLinesP函数在HoughLines的基础上末尾加了一个代表Probabilistic（概率）的P，表明它可以采用累计概率霍夫变换（PPHT）来找出二值图像中的直线。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hough = cv.HoughLinesP(segment, <span class="number">2</span>, np.pi / <span class="number">180</span>, <span class="number">100</span>, np.array([]), minLineLength = <span class="number">100</span>, maxLineGap = <span class="number">50</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-2-5-获取车道线并叠加到原始图像中"><a href="#3-2-5-获取车道线并叠加到原始图像中" class="headerlink" title="3.2.5 获取车道线并叠加到原始图像中"></a>3.2.5 获取车道线并叠加到原始图像中</h3><ul>
<li>综合所有线，求两条车道线的平均斜率和截距</li>
<li></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_lines</span>(<span class="params">frame, lines</span>):</span><br><span class="line">    <span class="keyword">return</span> [left_line, right_line]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_coordinates</span>(<span class="params">frame, parameters</span>):</span><br><span class="line">    slope, intercept = parameters</span><br><span class="line">    <span class="comment"># Sets initial y-coordinate as height from top down (bottom of the frame)</span></span><br><span class="line">    y1 = frame.shape[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># Sets final y-coordinate as 150 above the bottom of the frame</span></span><br><span class="line">    y2 = <span class="built_in">int</span>(y1 - <span class="number">150</span>)</span><br><span class="line">    <span class="comment"># Sets initial x-coordinate as (y1 - b) / m since y1 = mx1 + b</span></span><br><span class="line">    x1 = <span class="built_in">int</span>((y1 - intercept) / slope)</span><br><span class="line">    <span class="comment"># Sets final x-coordinate as (y2 - b) / m since y2 = mx2 + b</span></span><br><span class="line">    x2 = <span class="built_in">int</span>((y2 - intercept) / slope)</span><br><span class="line">    <span class="keyword">return</span> np.array([x1, y1, x2, y2])</span><br></pre></td></tr></table></figure>

<h2 id="3-3-实战基于深度学习的图片分割算法综述"><a href="#3-3-实战基于深度学习的图片分割算法综述" class="headerlink" title="3.3 实战基于深度学习的图片分割算法综述"></a>3.3 实战基于深度学习的图片分割算法综述</h2><h3 id="3-3-1-代表算法讲解"><a href="#3-3-1-代表算法讲解" class="headerlink" title="3.3.1 代表算法讲解"></a>3.3.1 代表算法讲解</h3><p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-abda096b28d5add16946a34794fcf5cb_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-898c3d3d9beed57c6cf3a951bc45e7ee_1440w.jpg" alt="img"></p>
<p>全连接</p>
<p>下采样上采样，池化</p>
<p>融合，上采样的和下采样平行的融合</p>
<p>语义地图，比如输入RGB3通道，最后输出是6个分类，那就是6张图</p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-ca4b24c6b8c091accfcaef92afcd816b_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-d9e8e150581363ff640da3ef7591161f_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-c722adb53921db62348f1676dc1dc20b_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-f4d8777a1710a773789b0baf2e4ec101_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-1f3fdd8ce00f9c4d968609aef3a215ab_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-b8f27cb192ad764a8ab4115ffcf2847a_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/v2-3d0dd3adbeda6d8f05aba624dc5ac6b6_1440w.jpg" alt="img"></p>
<h3 id="3-3-2-基于图片分割的车道线检测"><a href="#3-3-2-基于图片分割的车道线检测" class="headerlink" title="3.3.2 基于图片分割的车道线检测"></a>3.3.2 基于图片分割的车道线检测</h3><p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/image-20220412171351872.png" alt="image-20220412171351872"></p>
<p><img src="/2022/04/04/Course/AutomaticDrive/AutoDriver_03/image-20220412171257608.png" alt="image-20220412171257608"></p>
<ul>
<li>语义分割，二值分类，得到车道</li>
<li>分类车道-同向，—聚类方法  通向车道在n-dim聚类中，距离很近</li>
<li></li>
</ul>
<h3 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h3><p><a href="https://link.zhihu.com/?target=https://github.com/andylei77/lanenet-lane-detection">Github lanenet-lane-detection</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://github.com/andylei77/lanenet-lane-detection/blob/master/tools/test_lanenet.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_lanenet</span>(<span class="params">image_path, weights_path, use_gpu</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :param image_path:</span></span><br><span class="line"><span class="string">    :param weights_path:</span></span><br><span class="line"><span class="string">    :param use_gpu:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> ops.exists(image_path), <span class="string">&#x27;&#123;:s&#125; not exist&#x27;</span>.<span class="built_in">format</span>(image_path)</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&#x27;开始读取图像数据并进行预处理&#x27;</span>)</span><br><span class="line">    t_start = time.time()</span><br><span class="line">    image = cv2.imread(image_path, cv2.IMREAD_COLOR)</span><br><span class="line">    image_vis = image</span><br><span class="line">    image = cv2.resize(image, (<span class="number">512</span>, <span class="number">256</span>), interpolation=cv2.INTER_LINEAR)</span><br><span class="line">    image = image - VGG_MEAN</span><br><span class="line">    log.info(<span class="string">&#x27;图像读取完毕, 耗时: &#123;:.5f&#125;s&#x27;</span>.<span class="built_in">format</span>(time.time() - t_start))</span><br><span class="line"></span><br><span class="line">    input_tensor = tf.placeholder(dtype=tf.float32, shape=[<span class="number">1</span>, <span class="number">256</span>, <span class="number">512</span>, <span class="number">3</span>], name=<span class="string">&#x27;input_tensor&#x27;</span>)</span><br><span class="line">    phase_tensor = tf.constant(<span class="string">&#x27;test&#x27;</span>, tf.string)</span><br><span class="line"></span><br><span class="line">    net = lanenet_merge_model.LaneNet(phase=phase_tensor, net_flag=<span class="string">&#x27;vgg&#x27;</span>)</span><br><span class="line">    binary_seg_ret, instance_seg_ret = net.inference(input_tensor=input_tensor, name=<span class="string">&#x27;lanenet_model&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    cluster = lanenet_cluster.LaneNetCluster()</span><br><span class="line">    postprocessor = lanenet_postprocess.LaneNetPoseProcessor()</span><br><span class="line"></span><br><span class="line">    saver = tf.train.Saver()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Set sess configuration</span></span><br><span class="line">    <span class="keyword">if</span> use_gpu:</span><br><span class="line">        sess_config = tf.ConfigProto(device_count=&#123;<span class="string">&#x27;GPU&#x27;</span>: <span class="number">1</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        sess_config = tf.ConfigProto(device_count=&#123;<span class="string">&#x27;CPU&#x27;</span>: <span class="number">0</span>&#125;)</span><br><span class="line">    sess_config.gpu_options.per_process_gpu_memory_fraction = CFG.TEST.GPU_MEMORY_FRACTION</span><br><span class="line">    sess_config.gpu_options.allow_growth = CFG.TRAIN.TF_ALLOW_GROWTH</span><br><span class="line">    sess_config.gpu_options.allocator_type = <span class="string">&#x27;BFC&#x27;</span></span><br><span class="line"></span><br><span class="line">    sess = tf.Session(config=sess_config)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> sess.as_default():</span><br><span class="line"></span><br><span class="line">        saver.restore(sess=sess, save_path=weights_path)</span><br><span class="line"></span><br><span class="line">        t_start = time.time()</span><br><span class="line">        binary_seg_image, instance_seg_image = sess.run([binary_seg_ret, instance_seg_ret],</span><br><span class="line">                                                        feed_dict=&#123;input_tensor: [image]&#125;)</span><br><span class="line">        t_cost = time.time() - t_start</span><br><span class="line">        log.info(<span class="string">&#x27;单张图像车道线预测耗时: &#123;:.5f&#125;s&#x27;</span>.<span class="built_in">format</span>(t_cost))</span><br><span class="line"></span><br><span class="line">        binary_seg_image[<span class="number">0</span>] = postprocessor.postprocess(binary_seg_image[<span class="number">0</span>])</span><br><span class="line">        mask_image = cluster.get_lane_mask(binary_seg_ret=binary_seg_image[<span class="number">0</span>],</span><br><span class="line">                                           instance_seg_ret=instance_seg_image[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">            instance_seg_image[<span class="number">0</span>][:, :, i] = minmax_scale(instance_seg_image[<span class="number">0</span>][:, :, i])</span><br><span class="line">        embedding_image = np.array(instance_seg_image[<span class="number">0</span>], np.uint8)</span><br><span class="line"></span><br><span class="line">        plt.figure(<span class="string">&#x27;mask_image&#x27;</span>)</span><br><span class="line">        plt.imshow(mask_image[:, :, (<span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>)])</span><br><span class="line">        plt.figure(<span class="string">&#x27;src_image&#x27;</span>)</span><br><span class="line">        plt.imshow(image_vis[:, :, (<span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>)])</span><br><span class="line">        plt.figure(<span class="string">&#x27;instance_image&#x27;</span>)</span><br><span class="line">        plt.imshow(embedding_image[:, :, (<span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>)])</span><br><span class="line">        plt.figure(<span class="string">&#x27;binary_image&#x27;</span>)</span><br><span class="line">        plt.imshow(binary_seg_image[<span class="number">0</span>] * <span class="number">255</span>, cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">        plt.show()</span><br><span class="line"></span><br><span class="line">    sess.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span></span><br></pre></td></tr></table></figure>

<h1 id="相关算法汇总"><a href="#相关算法汇总" class="headerlink" title="相关算法汇总"></a>相关算法汇总</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/128518581">Zhihu 自动驾驶中的车道线检测算法汇总</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/01/Course/AutomaticDrive/AutoDriverBack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/" class="post-title-link" itemprop="url">无人驾驶（1）概览--背景介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-01 22:00:00" itemprop="dateCreated datePublished" datetime="2022-04-01T22:00:00+00:00">2022-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Autopilot/" itemprop="url" rel="index"><span itemprop="name">Autopilot</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h3 id="1-1-行业概述"><a href="#1-1-行业概述" class="headerlink" title="1.1 行业概述"></a>1.1 行业概述</h3><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-8e80921c913a7ab6b6f689803a3ad7da_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-abd8a521f6d0392a75a70ef39fa512d0_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-210125e2c634497452881d5987365f6d_r.jpg" alt="preview"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-ced414588934cc652b7ca0470016aa75_r.jpg" alt="preview"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-4b33411e367cee100554a3740ce8def8_r.jpg" alt="preview"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-b5b708b0c7bb80ecc43b88a876035adc_r.jpg" alt="preview"></p>
<h3 id="1-2-技术路径"><a href="#1-2-技术路径" class="headerlink" title="1.2 技术路径"></a>1.2 技术路径</h3><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-cc4e3385e92b62ac440cc74dff42b94a_r.jpg" alt="preview"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-ce55b177ef5cf16368cf0c7d5e9d9cd3_r.jpg" alt="preview"></p>
<h4 id="L2级别无人驾驶"><a href="#L2级别无人驾驶" class="headerlink" title="L2级别无人驾驶"></a>L2级别无人驾驶</h4><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-ddbee9f43a63fede67c72a6f792a6fa1_r.jpg" alt="preview"></p>
<h4 id="L3级别无人驾驶"><a href="#L3级别无人驾驶" class="headerlink" title="L3级别无人驾驶"></a>L3级别无人驾驶</h4><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-4bf38cf043dbbb03e609da048b89f384_r.jpg" alt="preview"></p>
<h4 id="L4级别无人驾驶"><a href="#L4级别无人驾驶" class="headerlink" title="L4级别无人驾驶"></a>L4级别无人驾驶</h4><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-4bf38cf043dbbb03e609da048b89f384_r_l4.jpg" alt="preview"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-35bf0644a19e570d32061a7dd4589214_r.jpg" alt="preview"></p>
<h4 id="V2X"><a href="#V2X" class="headerlink" title="V2X"></a>V2X</h4><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-9bf145bde7b53dc3367bcdac5c1f4606_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-b08d6bc56eb0ca2a9aabd3b5bcddccd8_r.jpg" alt="preview"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-2c864917c5ba04330db1172536703a57_r.jpg" alt="preview"></p>
<h3 id="1-3-技术概述"><a href="#1-3-技术概述" class="headerlink" title="1.3 技术概述"></a>1.3 技术概述</h3><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-8d93153c6eddf30a6837beb4cd5f7a05_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-aaa2191d4863097dab01741d0f9f037e_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-e6b6e7460619ed8174483f305b5f280c_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-61f7c00a512c9cd89546ccfac20a4779_1440w.jpg" alt="img"></p>
<h4 id="硬件概述"><a href="#硬件概述" class="headerlink" title="硬件概述"></a>硬件概述</h4><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-1e39f268b58e3824e0b10dd51ade791a_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-0c4e65c81695b0eeb2d54e33aefab7ca_1440w.jpg" alt="img"></p>
<h4 id="软件概述"><a href="#软件概述" class="headerlink" title="软件概述"></a>软件概述</h4><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-75db665275faaee7ceb4c4cc24b5b742_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-aff7ce5fd098b5ecdf3d8ed810a90a1a_1440w.jpg" alt="img"></p>
<h5 id="操作系统OS"><a href="#操作系统OS" class="headerlink" title="操作系统OS"></a>操作系统OS</h5><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-aff7ce5fd098b5ecdf3d8ed810a90a1a_1440w_OS.jpg" alt="img"></p>
<h5 id="HD-MAP"><a href="#HD-MAP" class="headerlink" title="HD MAP"></a>HD MAP</h5><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-ecd55467475e50edfc5fd67e0755fb94_1440w.jpg" alt="img"></p>
<h4 id="软件概述-1"><a href="#软件概述-1" class="headerlink" title="软件概述"></a>软件概述</h4><ul>
<li>定位</li>
<li>感知</li>
<li>决策</li>
<li>控制</li>
</ul>
<h5 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h5><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-792a14c1c9d213249481bbc0415697e4_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-791e404295f891fc10b866e7c42163c6_1440w.jpg" alt="img"></p>
<h5 id="感知"><a href="#感知" class="headerlink" title="感知"></a>感知</h5><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-9d4804f58284e17f06831554f6cf9d18_1440w.jpg" alt="img"></p>
<p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-17d7fbbdee4ff6800798e169af45ee50_1440w.jpg" alt="img"></p>
<h5 id="决策"><a href="#决策" class="headerlink" title="决策"></a>决策</h5><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-86a0fe88677e6714ec14172660431872_1440w.jpg" alt="img"></p>
<h5 id="控制"><a href="#控制" class="headerlink" title="控制"></a>控制</h5><p><img src="/2022/04/01/Course/AutomaticDrive/AutoDriverBack/v2-d7303ecf4196a1606b226f2394456873_1440w.jpg" alt="img"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2022/04/01/Paper/Paper-CV-5-Object-Tracking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/01/Paper/Paper-CV-5-Object-Tracking/" class="post-title-link" itemprop="url">Paper_CV_5 目标跟踪</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-01 15:40:19" itemprop="dateCreated datePublished" datetime="2022-04-01T15:40:19+00:00">2022-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CV/" itemprop="url" rel="index"><span itemprop="name">CV</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CV/BaseWork/" itemprop="url" rel="index"><span itemprop="name">BaseWork</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CV/BaseWork/Segmentation/" itemprop="url" rel="index"><span itemprop="name">Segmentation</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wind-chaser/p/11346880.html">转自–目标跟踪算法综述</a></p>
<h2 id="第一部分：目标跟踪速览"><a href="#第一部分：目标跟踪速览" class="headerlink" title="第一部分：目标跟踪速览"></a>第一部分：目标跟踪速览</h2><p>先跟几个SOTA的tracker混个脸熟，大概了解一下目标跟踪这个方向都有些什么。一切要从2013年的那个数据库说起。。如果你问别人近几年有什么比较niubility的跟踪算法，大部分人都会扔给你吴毅老师的论文，OTB50和OTB100(OTB50这里指OTB-2013，OTB100这里指OTB-2015，50和100分别代表视频数量，方便记忆)：</p>
<blockquote>
<p>Wu Y, Lim J, Yang M H. Online object tracking: A benchmark [C]&#x2F;&#x2F; CVPR, 2013.</p>
<p>Wu Y, Lim J, Yang M H. Object tracking benchmark [J]. TPAMI, 2015.</p>
</blockquote>
<p>顶会转顶刊的顶级待遇，在加上引用量1480+320多，影响力不言而喻，已经是做tracking必须跑的数据库了，测试代码和序列都可以下载：<a target="_blank" rel="noopener" href="http://t.cn/RYhz9Sd"> Visual Tracker Benchmark</a>，OTB50包括50个序列，都经过人工标注：</p>
<p>目标跟踪</p>
<ul>
<li>视觉和激光方向</li>
</ul>
<h3 id="SORT"><a href="#SORT" class="headerlink" title="SORT"></a>SORT</h3><p><a target="_blank" rel="noopener" href="https://github.com/abewley/sort">https://github.com/abewley/sort</a></p>
<h3 id="DeepSORT"><a href="#DeepSORT" class="headerlink" title="DeepSORT"></a>DeepSORT</h3><h3 id="ADAS"><a href="#ADAS" class="headerlink" title="ADAS"></a>ADAS</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/17/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/19/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Simon Shi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">322</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">142</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">269</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Simon Shi</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
