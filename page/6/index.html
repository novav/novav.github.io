<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"novav.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Simon Shi的小站">
<meta property="og:url" content="https://novav.github.io/page/6/index.html">
<meta property="og:site_name" content="Simon Shi的小站">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Simon Shi">
<meta property="article:tag" content="AI,Machine Learning, Deep Learning">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://novav.github.io/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Simon Shi的小站</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Simon Shi的小站</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">人工智能，机器学习， 强化学习，大模型，自动驾驶</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/06/25/AI_ROBOT/Gazebo_ROS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/25/AI_ROBOT/Gazebo_ROS/" class="post-title-link" itemprop="url">ROS通信，控制Gazebo-11机器人</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-06-25 21:00:00" itemprop="dateCreated datePublished" datetime="2024-06-25T21:00:00+00:00">2024-06-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Robot/" itemprop="url" rel="index"><span itemprop="name">Robot</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Robot/ROS/" itemprop="url" rel="index"><span itemprop="name">ROS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ROS（Robot Operating System，机器人操作系统）是一个为机器人软件开发提供支持的灵活框架。它为机器人软件开发者提供了一套广泛的工具和库，使得他们能够更容易地构建和运行机器人应用。</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/661888714"># 一小时实践入门 ROS—机器人操作系统</a></p>
<h2 id="学习计划"><a href="#学习计划" class="headerlink" title="学习计划"></a>学习计划</h2><p>学习ROS (Robot Operating System) 在一小时内是非常紧凑的，但你可以通过实践来尽快掌握基础。以下是一个基本的一小时学习计划，以项目实践为目标:</p>
<p>1. <strong>环境设置</strong></p>
<ul>
<li><p><strong>安装ROS</strong>：</p>
</li>
<li><p>用docker快速安装ROS的基本版本。</p>
</li>
<li><p>设置环境变量。</p>
</li>
</ul>
<p>2. <strong>基本概念</strong></p>
<ul>
<li><p><strong>节点 (Nodes)</strong>：</p>
</li>
<li><p>创建一个简单的节点。</p>
</li>
<li><p>运行节点，并观察输出。</p>
</li>
<li><p><strong>主题 (Topics)</strong>：</p>
</li>
<li><p>创建一个简单的主题发布者和订阅者。</p>
</li>
<li><p>发布和订阅消息。</p>
</li>
</ul>
<p>3. <strong>实践项目</strong></p>
<ul>
<li><p><strong>创建一个简单的机器人模拟</strong>：</p>
</li>
<li><p>选择一个简单的机器人模型，如一个两轮机器人。</p>
</li>
<li><p>在ROS中加载机器人模型。</p>
</li>
<li><p>使用Gazebo控制机器人移动并监控机器人的状态和位置。</p>
</li>
</ul>
<p>这个计划需要你在一个实际的ROS环境中操作。</p>
<h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><h3 id="docker快速安装ROS-Gazebo"><a href="#docker快速安装ROS-Gazebo" class="headerlink" title="docker快速安装ROS Gazebo"></a>docker快速安装ROS Gazebo</h3><ul>
<li><p>DockerDesktop安装</p>
</li>
<li><p><strong>Dockerfile编写（参照<a href="./2024/06/22/Gazebo/">Gazebo 上手 wsl</a>）编译成image</strong></p>
</li>
<li><p>Windows中安装和启动VcXsrv</p>
<ul>
<li>启动xLaunch</li>
</ul>
</li>
<li><p>运行Docker容器</p>
</li>
<li><p>创建项目工作空间</p>
<ul>
<li><pre><code class="language-shell">mkdir -p ~/catkin_ws/src
cd ~/catkin_ws/src
catkin_init_workspace
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```shell</span><br><span class="line">  cd ~/catkin_ws</span><br><span class="line">  catkin_make</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><p>ros_environment.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Source ROS setup script</span></span><br><span class="line">source /opt/ros/noetic/setup.bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Source workspace setup script</span></span><br><span class="line">source ~/catkin_ws/devel/setup.bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Set ROS Master URI</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Replace <span class="string">&#x27;localhost&#x27;</span> with your ROS Master<span class="string">&#x27;s IP if it&#x27;</span>s on a different machine</span></span><br><span class="line">export ROS_MASTER_URI=http://localhost:11311</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Set ROS Hostname</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Replace <span class="string">&#x27;localhost&#x27;</span> with this machine<span class="string">&#x27;s IP if this machine is not the ROS Master</span></span></span><br><span class="line">export ROS_HOSTNAME=localhost</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Set ROS IP</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Replace &#x27;</span>localhost<span class="string">&#x27; with this machine&#x27;</span>s IP</span></span><br><span class="line">export ROS_IP=localhost</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Set Gazebo Plugin Path</span></span><br><span class="line">export GAZEBO_PLUGIN_PATH=/opt/ros/noetic/lib:$GAZEBO_PLUGIN_PATH</span><br></pre></td></tr></table></figure>

<p>运行生效环境配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ros_environment.sh</span><br></pre></td></tr></table></figure>

<ul>
<li>通过 <code>source</code>命令，它加载了ROS和你的工作空间的设置脚本。</li>
<li>它设置了 <code>ROS_MASTER_URI</code>，<code>ROS_HOSTNAME</code>和 <code>ROS_IP</code>环境变量，以确保你的ROS节点可以正确地通信。</li>
</ul>
<p>每次启动新的终端或ROS容器时，都应执行 <code>source ros_environment.sh</code>命令以确保环境变量正确设置。为了简化这个过程，你可能想要将 <code>source ros_environment.sh</code>命令添加到你的 <code>.bashrc</code>文件中，这样它会在每次启动新终端时自动执行。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="创建一个简单节点"><a href="#创建一个简单节点" class="headerlink" title="创建一个简单节点"></a>创建一个简单节点</h3><p>1.<strong>创建一个新的ROS包</strong> 首先，在你的工作空间的 <code>src</code> 目录中创建一个新的ROS包。我们将此包命名为 <code>simple_node_package</code>，并依赖于 <code>roscpp</code> 和 <code>std_msgs</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/catkin_ws/src</span><br><span class="line">catkin_create_pkg simple_node_package roscpp std_msgs</span><br></pre></td></tr></table></figure>

<p>2.<strong>编写简单的ROS节点</strong> 现在，创建一个名为 simple_node.cpp 的文件，并填写以下代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 初始化ROS节点</span></span><br><span class="line">  ros::init(argc, argv, <span class="string">&quot;simple_node&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建节点句柄</span></span><br><span class="line">  ros::NodeHandle nh;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建一个发布者对象</span></span><br><span class="line">  ros::Publisher chatter_pub = nh.advertise&lt;std_msgs::String&gt;(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 设置循环频率</span></span><br><span class="line">  ros::Rate <span class="title function_">loop_rate</span><span class="params">(<span class="number">10</span>)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (ros::ok())</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// 创建一个消息对象</span></span><br><span class="line">    std_msgs::String msg;</span><br><span class="line">    msg.data = <span class="string">&quot;Hello, ROS!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 发布消息</span></span><br><span class="line">    chatter_pub.publish(msg);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理任何可用的回调函数</span></span><br><span class="line">    ros::spinOnce();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 按照设定的频率休眠</span></span><br><span class="line">    loop_rate.sleep();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后将其复制到 simple_node_package 包中src目录中。</p>
<p>3.<strong>修改CMakeLists.txt</strong> 为了编译你的节点，你需要修改 <code>simple_node_package</code> 包的 <code>CMakeLists.txt</code> 文件。把这两行代码加到文件的最后，</p>
<p>文件名：<code>CMakeLists.txt</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（原代码）</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(simple_node src/simple_node.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(simple_node <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure>

<p>4.构建编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws</span><br><span class="line">catkin_make</span><br></pre></td></tr></table></figure>

<p>5 RosCore运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roscore</span><br></pre></td></tr></table></figure>

<p>6 新节点运行（在新的终端中）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it &lt;container_name&gt; /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /data/ros_environment.sh</span><br><span class="line">rosrun simple_node_package simple_node</span><br></pre></td></tr></table></figure>

<h3 id="运行节点，观察输出"><a href="#运行节点，观察输出" class="headerlink" title="运行节点，观察输出"></a>运行节点，观察输出</h3><p>运行和观察ROS节点输出相对简单。在上一步中，你已经创建了一个名为 <code>simple_node</code>的节点，它发布”Hello, ROS!”消息到 <code>chatter</code>主题。现在我们将运行该节点并观察其输出。</p>
<p>1.<strong>观察输出</strong> 现在，我们和之前一样<code>docker exec -it &lt;container_name&gt; /bin/bash</code> 再打开第三个终端。</p>
<p>在第三个新的终端中，你可以使用 <code>rostopic</code>命令来监听 <code>chatter</code>主题并观察节点的输出：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source /data/ros_environment.sh</span><br><span class="line">rostopic echo /chatter  </span><br></pre></td></tr></table></figure>

<p>你应该看到每秒10条”Hello, ROS!”消息，如下所示：</p>
<p>略</p>
<p>2 <strong>查看节点和主题信息</strong> 你还可以使用 <code>rosnode</code>和 <code>rostopic</code>命令来获取有关运行中节点和主题的更多信息。</p>
<ul>
<li>查看运行中的节点列表：<code>rosnode list</code></li>
<li>查看特定节点的信息（例如 <code>simple_node</code>）： <code>rosnode info /simple_node</code></li>
<li>查看特定主题的信息（例如 <code>chatter</code>）：<code>rostopic info /chatter</code></li>
</ul>
<h3 id="创建一个简单的主题发布者和接收者"><a href="#创建一个简单的主题发布者和接收者" class="headerlink" title="创建一个简单的主题发布者和接收者"></a>创建一个简单的主题发布者和接收者</h3><p>在ROS中，节点可以通过发布和订阅主题来交换消息。下面我们将创建一个简单的主题发布者和订阅者。我们将继续使用之前创建的 <code>simple_node_package</code>包。</p>
<p>1.<strong>创建发布者</strong> 首先，我们创建一个名为 <code>publisher_node.cpp</code>的文件来发布消息到一个名为 <code>chatter</code>的主题。</p>
<p>文件名：<code>publisher_node.cpp</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line">  ros::init(argc, argv, <span class="string">&quot;publisher_node&quot;</span>);</span><br><span class="line">  ros::NodeHandle nh;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建了一个发布者对象，该对象可以发布消息到名为 chatter的主题。1000是队列大小，它确定了在订阅者能够处理之前可以缓冲的消息数量。</span></span><br><span class="line">  ros::Publisher chatter_pub = nh.advertise&lt;std_msgs::String&gt;(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">  ros::Rate <span class="title function_">loop_rate</span><span class="params">(<span class="number">10</span>)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (ros::ok())</span><br><span class="line">  &#123;</span><br><span class="line">    std_msgs::String msg;</span><br><span class="line">    msg.data = <span class="string">&quot;Hello, ROS!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    chatter_pub.publish(msg); / /发布到 chatter主题</span><br><span class="line"></span><br><span class="line">    ros::spinOnce();</span><br><span class="line">    loop_rate.sleep();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.<strong>创建订阅者</strong> 接下来，我们创建一个名为 <code>subscriber_node.cpp</code>的文件来订阅 <code>chatter</code>主题并打印接收到的消息。（文件的操作和前面的一样，不再赘述）</p>
<p>文件名：<code>subscriber_node.cpp</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">chatterCallback</span><span class="params">(<span class="type">const</span> std_msgs::String::ConstPtr&amp; msg)</span></span><br><span class="line">&#123;</span><br><span class="line">  ROS_INFO(<span class="string">&quot;I heard: [%s]&quot;</span>, msg-&gt;data.c_str());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line">  ros::init(argc, argv, <span class="string">&quot;subscriber_node&quot;</span>);</span><br><span class="line">  ros::NodeHandle nh;</span><br><span class="line">  <span class="comment">//订阅了名为 chatter的主题。1000是队列大小，它确定了可以在处理之前缓冲的消息数量。</span></span><br><span class="line">  ros::Subscriber sub = nh.subscribe(<span class="string">&quot;chatter&quot;</span>, <span class="number">1000</span>, chatterCallback);</span><br><span class="line"></span><br><span class="line">  ros::spin();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.<strong>更新CMakeLists.txt</strong> 现在，更新 <code>simple_node_package</code>包的 <code>CMakeLists.txt</code>文件以包含新的节点。</p>
<p>文件名：<code>CMakeLists.txt</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">（原来的代码）</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(publisher_node src/publisher_node.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(publisher_node <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(subscriber_node src/subscriber_node.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(subscriber_node <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure>

<p>4.<strong>构建工作空间</strong> 返回到你的工作空间的根目录，并运行 <code>catkin_make</code>来构建你的工作空间和新节点：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/catkin_ws</span><br><span class="line">catkin_make</span><br></pre></td></tr></table></figure>

<p>5.<strong>运行发布者和订阅者节点</strong> 确保你的ROS核心正在运行（前面说过的<code>roscore</code>），然后在两个不同的终端中分别运行发布者和订阅者节点：</p>
<p>终端一</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source ~/catkin_ws/devel/setup.bash</span><br><span class="line">rosrun simple_node_package publisher_node</span><br></pre></td></tr></table></figure>

<p>终端二</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source ~/catkin_ws/devel/setup.bash</span><br><span class="line">rosrun simple_node_package subscriber_node</span><br></pre></td></tr></table></figure>

<p>现在，你应该能在订阅者节点的终端中看到每秒10条”Hello, ROS!”消息，表明发布者和订阅者节点正在正确地交换消息。</p>
<h2 id="实践项目Robot-controller"><a href="#实践项目Robot-controller" class="headerlink" title="实践项目Robot controller"></a>实践项目Robot controller</h2><p>在ROS中，通常使用URDF（Unified Robot Description Format，统一机器人描述格式）或者xacro（XML Macros，XML宏）来描述机器人模型。在这一步中，我们将创建一个简单的两轮机器人模型。</p>
<h3 id="两轮ROBOT模型"><a href="#两轮ROBOT模型" class="headerlink" title="两轮ROBOT模型"></a>两轮ROBOT模型</h3><h4 id="1-创建ROS-pkg"><a href="#1-创建ROS-pkg" class="headerlink" title="1 创建ROS pkg"></a>1 创建ROS pkg</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws/src</span><br><span class="line">catkin_create_pkg your_robot_package roscpp rospy std_msgs sensor_msgs gazebo_ros gazebo_plugins</span><br></pre></td></tr></table></figure>

<h4 id="2-创建URDF文件"><a href="#2-创建URDF文件" class="headerlink" title="2 创建URDF文件"></a>2 创建URDF文件</h4><p>在新创建的 <code>your_robot_package</code>包中创建一个名为 <code>two_wheel_robot.urdf</code>的文件来描述你的两轮机器人。</p>
<p>将这个文件放到<code>~/catkin_ws/src/your_robot_package/urdf/two_wheel_robot.urdf</code></p>
<p>two_wheel_robot.urdf</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">robot</span> <span class="attr">name</span>=<span class="string">&quot;two_wheel_robot&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Base Link --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_link&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">length</span>=<span class="string">&quot;0.1&quot;</span> <span class="attr">radius</span>=<span class="string">&quot;0.2&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">length</span>=<span class="string">&quot;0.1&quot;</span> <span class="attr">radius</span>=<span class="string">&quot;0.2&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;0.1&quot;</span> <span class="attr">ixy</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ixz</span>=<span class="string">&quot;0&quot;</span> <span class="attr">iyy</span>=<span class="string">&quot;0.1&quot;</span> <span class="attr">iyz</span>=<span class="string">&quot;0&quot;</span> <span class="attr">izz</span>=<span class="string">&quot;0.1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Left Wheel --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;left_wheel_joint&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;left_wheel&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0.15 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;1.57079632679 0 0&quot;</span>/&gt;</span>  <span class="comment">&lt;!-- Rotate the wheel to be perpendicular to the ground --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 1&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;left_wheel&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">length</span>=<span class="string">&quot;0.05&quot;</span> <span class="attr">radius</span>=<span class="string">&quot;0.1&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">length</span>=<span class="string">&quot;0.05&quot;</span> <span class="attr">radius</span>=<span class="string">&quot;0.1&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;0.025&quot;</span> <span class="attr">ixy</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ixz</span>=<span class="string">&quot;0&quot;</span> <span class="attr">iyy</span>=<span class="string">&quot;0.025&quot;</span> <span class="attr">iyz</span>=<span class="string">&quot;0&quot;</span> <span class="attr">izz</span>=<span class="string">&quot;0.025&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Right Wheel --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">joint</span> <span class="attr">name</span>=<span class="string">&quot;right_wheel_joint&quot;</span> <span class="attr">type</span>=<span class="string">&quot;continuous&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span> <span class="attr">link</span>=<span class="string">&quot;base_link&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">link</span>=<span class="string">&quot;right_wheel&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">origin</span> <span class="attr">xyz</span>=<span class="string">&quot;0 -0.15 0&quot;</span> <span class="attr">rpy</span>=<span class="string">&quot;1.57079632679 0 0&quot;</span>/&gt;</span>  <span class="comment">&lt;!-- Rotate the wheel to be perpendicular to the ground --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">axis</span> <span class="attr">xyz</span>=<span class="string">&quot;0 0 1&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">joint</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;right_wheel&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">length</span>=<span class="string">&quot;0.05&quot;</span> <span class="attr">radius</span>=<span class="string">&quot;0.1&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collision</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cylinder</span> <span class="attr">length</span>=<span class="string">&quot;0.05&quot;</span> <span class="attr">radius</span>=<span class="string">&quot;0.1&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mass</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inertia</span> <span class="attr">ixx</span>=<span class="string">&quot;0.025&quot;</span> <span class="attr">ixy</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ixz</span>=<span class="string">&quot;0&quot;</span> <span class="attr">iyy</span>=<span class="string">&quot;0.025&quot;</span> <span class="attr">iyz</span>=<span class="string">&quot;0&quot;</span> <span class="attr">izz</span>=<span class="string">&quot;0.025&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">gazebo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">&quot;gazebo_ros_diff_drive&quot;</span> <span class="attr">filename</span>=<span class="string">&quot;libgazebo_ros_diff_drive.so&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">updateRate</span>&gt;</span>100.0<span class="tag">&lt;/<span class="name">updateRate</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">leftJoint</span>&gt;</span>left_wheel_joint<span class="tag">&lt;/<span class="name">leftJoint</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rightJoint</span>&gt;</span>right_wheel_joint<span class="tag">&lt;/<span class="name">rightJoint</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">wheelSeparation</span>&gt;</span>0.3<span class="tag">&lt;/<span class="name">wheelSeparation</span>&gt;</span> <span class="comment">&lt;!-- This should be the distance between your wheels --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">wheelDiameter</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">wheelDiameter</span>&gt;</span> <span class="comment">&lt;!-- This should be the diameter of your wheels --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">torque</span>&gt;</span>20<span class="tag">&lt;/<span class="name">torque</span>&gt;</span> <span class="comment">&lt;!-- You may need to adjust this value --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">commandTopic</span>&gt;</span>cmd_vel<span class="tag">&lt;/<span class="name">commandTopic</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">odometryTopic</span>&gt;</span>odom<span class="tag">&lt;/<span class="name">odometryTopic</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">odometryFrame</span>&gt;</span>odom<span class="tag">&lt;/<span class="name">odometryFrame</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">robotBaseFrame</span>&gt;</span>base_link<span class="tag">&lt;/<span class="name">robotBaseFrame</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">gazebo</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">robot</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这个URDF文件中，我们定义了一个简单的两轮机器人，它有一个基础链接（base_link）和两个连续关节，每个关节连接一个轮子。</p>
<h4 id="3-查看机器人模型"><a href="#3-查看机器人模型" class="headerlink" title="3 查看机器人模型"></a>3 查看机器人模型</h4><p>为了查看你的机器人模型，你可以使用 <code>urdf</code>包中的 <code>urdf_viewer</code>工具。</p>
<p>首先需要下载 <code>urdf_tutorial</code> ros包，解压放到<code>~/catkin_ws/src/urdf_tutorial</code>目录中。</p>
<p>然后执行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">catkin_make</span><br></pre></td></tr></table></figure>

<p>查看模型</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch urdf_tutorial display.launch model:=&#x27;$(find your_robot_package)/urdf/two_wheel_robot.urdf&#x27;</span><br></pre></td></tr></table></figure>

<p>这个命令会启动RViz，并加载你的两轮机器人模型。在RViz中，你应该能看到你的两轮机器人模型，并可以通过旋转和缩放来检查它的各个部分。</p>
<p>通过创建和查看URDF文件，你可以获得对ROS中机器人模型描述的基本理解，并可以开始为你的两轮机器人添加更多复杂的特性和组件。</p>
<p><img src="/2024/06/25/AI_ROBOT/Gazebo_ROS/2024-06-26-10-47-05-image.png"></p>
<h3 id="控制ROBOT移动"><a href="#控制ROBOT移动" class="headerlink" title="控制ROBOT移动"></a>控制ROBOT移动</h3><p>控制机器人移动通常涉及编写一个ROS节点，该节点发布到机器人的速度命令主题。对于简单的两轮机器人，通常会有一个名为 <code>cmd_vel</code>的主题，它接收 <code>geometry_msgs/Twist</code>类型的消息来控制机器人的线速度和角速度。</p>
<p>1.<strong>创建控制节点</strong> 创建一个新的文件名为 <code>robot_controller.cpp</code>的文件，在 <code>your_robot_package/src</code> 目录中。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;geometry_msgs/Twist.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line">    ros::init(argc, argv, <span class="string">&quot;robot_controller&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line"></span><br><span class="line">    ros::Publisher cmd_vel_pub = nh.advertise&lt;geometry_msgs::Twist&gt;(<span class="string">&quot;cmd_vel&quot;</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    ros::Rate <span class="title function_">loop_rate</span><span class="params">(<span class="number">10</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (ros::ok())</span><br><span class="line">    &#123;</span><br><span class="line">        geometry_msgs::Twist cmd_vel_msg;</span><br><span class="line">        cmd_vel_msg.linear.x = <span class="number">-0.5</span>;  <span class="comment">// 0.5 m/s forward</span></span><br><span class="line">        cmd_vel_msg.angular.z = <span class="number">0.1</span>; <span class="comment">// 0.1 rad/s rotation</span></span><br><span class="line"></span><br><span class="line">        cmd_vel_pub.publish(cmd_vel_msg);</span><br><span class="line"></span><br><span class="line">        ros::spinOnce();</span><br><span class="line">        loop_rate.sleep();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这段代码中，我们创建了一个名为 <code>robot_controller</code>的ROS节点，它发布 <code>geometry_msgs/Twist</code>消息到 <code>cmd_vel</code>主题，以控制机器人的线速度和角速度。</p>
<p>2.<strong>更新CMakeLists.txt</strong> 修改 <code>your_robot_package</code> 包的 <code>CMakeLists.txt</code>文件以包含新的控制节点。</p>
<p>文件名: <code>CMakeLists.txt</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（原代码）</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(robot_controller src/robot_controller.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(robot_controller <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure>

<p>3.<strong>构建你的工作空间</strong> 返回到你的工作空间的根目录，并运行 <code>catkin_make</code>来构建你的工作空间和新控制节点：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/catkin_ws</span><br><span class="line">catkin_make</span><br></pre></td></tr></table></figure>

<p>4.<strong>运行控制节点</strong> 在一个新的终端中，运行你的控制节点来发布速度命令：（需要提前运行<code>roscore</code>）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/data/ros_environment.sh</span><br><span class="line">rosrun your_robot_package robot_controller</span><br></pre></td></tr></table></figure>

<p>现在，你的控制节点应该在 <code>cmd_vel</code>主题上发布速度命令。</p>
<p>然后和上面一样，我们打开一个新的终端，然后查看 <code>cmd_vel</code>主题的消息:</p>
<p>新终端</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source ~/data/ros_environment.sh</span><br><span class="line">rostopic echo /cmd_vel</span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/25/AI_ROBOT/Gazebo_ROS/2024-06-26-10-49-56-image.png"></p>
<h3 id="Gazebo监控机器人的状况"><a href="#Gazebo监控机器人的状况" class="headerlink" title="Gazebo监控机器人的状况"></a>Gazebo监控机器人的状况</h3><p><strong>创建一个启动文件</strong> (<code>launch</code>文件) 来加载机器人模型和控制器。在该包中的<code>launch</code>文件夹（需新建）中创建一个文件名为<code>robot.launch</code>的文件，并将以下内容复制到该文件中:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Load the URDF into the ROS Parameter Server --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;robot_description&quot;</span> <span class="attr">textfile</span>=<span class="string">&quot;$(find your_robot_package)/urdf/two_wheel_robot.urdf&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Launch Gazebo with the robot model --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">&quot;$(find gazebo_ros)/launch/empty_world.launch&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;world_name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;worlds/empty.world&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;paused&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Spawn robot model --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;spawn_urdf&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;gazebo_ros&quot;</span> <span class="attr">type</span>=<span class="string">&quot;spawn_model&quot;</span> <span class="attr">args</span>=<span class="string">&quot;-param robot_description -urdf  -model two_wheel_robot&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Load the controller --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">name</span>=<span class="string">&quot;robot_controller&quot;</span> <span class="attr">pkg</span>=<span class="string">&quot;your_robot_package&quot;</span> <span class="attr">type</span>=<span class="string">&quot;robot_controller&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>编译你的ROS包</strong>:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws </span><br><span class="line">catkin_make</span><br></pre></td></tr></table></figure>

<p><strong>启动Gazebo和机器人控制器</strong>:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch your_robot_package robot.launch </span><br></pre></td></tr></table></figure>

<p>在执行上述步骤后，你应该能够在Gazebo中看到你的机器人模型，并能够通过ROS来控制它。在<code>robot_controller.cpp</code>中，你可以使用ROS的消息和服务来读取传感器数据、发送控制命令和与机器人交互。同时，你可以看到机器人在Gazebo中的实时模拟表现。</p>
<p>这只是一个基本的设置，具体的实现可能需要根据你的机器人模型和控制器代码进行调整。例如，你可能需要配置机器人的传感器和控制器，或者修改Gazebo和ROS的启动文件以适应你的特定需求。</p>
<p><img src="/2024/06/25/AI_ROBOT/Gazebo_ROS/6f6c8e8d833c79d0fee08ce744eae4247bf53609.gif"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/06/22/AI_ROBOT/Gazebo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/22/AI_ROBOT/Gazebo/" class="post-title-link" itemprop="url">Gazebo 上手 wsl</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-06-22 12:00:00" itemprop="dateCreated datePublished" datetime="2024-06-22T12:00:00+00:00">2024-06-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Robot/" itemprop="url" rel="index"><span itemprop="name">Robot</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Robot/Gazebo/" itemprop="url" rel="index"><span itemprop="name">Gazebo</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="学习计划"><a href="#学习计划" class="headerlink" title="学习计划"></a>学习计划</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/661306705"># 一小时实践入门Gazebo</a></p>
<p>在一小时内基本掌握Gazebo可能是很具挑战的，但可以通过以下步骤尽快上手，尤其是以项目实践为目的：</p>
<p><strong>环境搭建和安装</strong></p>
<ul>
<li>下载并安装Gazebo</li>
<li>设置基本的环境变量和配置</li>
</ul>
<p><strong>基本概念和界面熟悉</strong></p>
<ul>
<li>快速浏览Gazebo的基本概念，如模型、世界、插件等</li>
<li>熟悉Gazebo的用户界面和基本功能</li>
</ul>
<p><strong>载入和探索现有模型</strong></p>
<ul>
<li>从Gazebo的模型库中载入一些基本模型</li>
<li>熟悉模型的基本操作和属性设置</li>
</ul>
<p><strong>创建简单的场景</strong></p>
<ul>
<li>创建一个简单的Gazebo世界，包括地面、一些障碍物和一个机器人模型</li>
<li>保存和载入你创建的场景</li>
</ul>
<p><strong>运行基本的仿真</strong></p>
<ul>
<li>启动仿真，观察场景中的物理交互</li>
<li>使用基本的控制命令，如移动机器人等</li>
</ul>
<p>以上步骤可能需要适当的预先知识和快速的学习能力。为了确保在短时间内获得最好的学习效果，建议选择具有明确目标和范围的项目实践。在实践过程中，你可能会遇到一些问题，记得利用网络资源如社区论坛和Stack Overflow来寻找解决方案。通过快速实践和解决问题，你将能够在较短的时间内掌握Gazebo的基本应用。</p>
<h3 id="环境搭建-安装"><a href="#环境搭建-安装" class="headerlink" title="环境搭建 安装"></a>环境搭建 安装</h3><h4 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h4><ul>
<li>此处省略</li>
</ul>
<h4 id="创建Dockerfile"><a href="#创建Dockerfile" class="headerlink" title="创建Dockerfile"></a>创建Dockerfile</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用官方的ROS镜像作为基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> ros:noetic-ros-base</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加ROS源</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;deb http://packages.ros.org/ros/ubuntu focal main&quot;</span> &gt; /etc/apt/sources.list.d/ros1-latest.list</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入ROS的公钥</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-key adv --keyserver <span class="string">&#x27;hkp://keyserver.ubuntu.com:80&#x27;</span> --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新apt包列表</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 RViz 和其他 ROS 工具</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y \</span></span><br><span class="line"><span class="language-bash">    ros-noetic-rviz \</span></span><br><span class="line"><span class="language-bash">    ros-noetic-xacro \</span></span><br><span class="line"><span class="language-bash">    ros-noetic-joint-state-publisher-gui \</span></span><br><span class="line"><span class="language-bash">    ros-noetic-robot-state-publisher</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 Gazebo 11 和相关的开发包</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y \</span></span><br><span class="line"><span class="language-bash">    gazebo11 \</span></span><br><span class="line"><span class="language-bash">    libgazebo11-dev</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 Gazebo ROS 包</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y \</span></span><br><span class="line"><span class="language-bash">    ros-noetic-gazebo-ros-pkgs \</span></span><br><span class="line"><span class="language-bash">    ros-noetic-gazebo-ros-control</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置容器的主命令为bash终端</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;/bin/bash&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h4 id="创建并运行-Docker-容器"><a href="#创建并运行-Docker-容器" class="headerlink" title="创建并运行 Docker 容器:"></a>创建并运行 Docker 容器:</h4><p>在 <code>Dockerfile</code> 的同一目录中打开终端，运行以下命令以构建 Docker 映像:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t gazebo11:latest .</span><br></pre></td></tr></table></figure>

<p><img src="/2024/06/22/AI_ROBOT/Gazebo/2024-06-24-12-03-52-image.png"></p>
<h4 id="配置-X11-服务器"><a href="#配置-X11-服务器" class="headerlink" title="配置 X11 服务器:"></a>配置 X11 服务器:</h4><p>我使用 VcXsrv 来作为可视化服务器。</p>
<p>启动 X11 服务器，并允许来自所有网络的连接。</p>
<ol>
<li><strong>安装 VcXsrv</strong>：首先需要下载并安装 <a href="https://link.zhihu.com/?target=https://sourceforge.net/projects/vcxsrv/">VcXsrv</a>。安装过程中可能需要选择完整安装，并指定目标文件夹​<a href="https://link.zhihu.com/?target=https://scicomp.aalto.fi/triton/quickstart/installxonwindows.html%23:~:text=We%2520will%2520use%2520the%2520VcXsrv%252C,Multiple%2520Windows%2520and%2520click%2520Next">1</a>​。</li>
<li><strong>运行 XLaunch</strong>：通过运行 VcXsrv 中的 XLaunch 程序来启动 X 服务器。在显示设置中，选择“多窗口”选项，并点击下一步。在客户端启动中，检查“不启动客户端”选项，并点击下一步。在额外设置中，确保启用“禁用访问控制”，并点击下一步​<a href="https://link.zhihu.com/?target=https://dev-container.readthedocs.io/en/latest/faq/docker/setup_vcxsrv_x11_server_windows.html%23:~:text=Run%2520Xlaunch%2520which%2520gets%2520installed,is%2520enabled%252C%2520and%2520click%2520Next">3</a>​，直到完成。</li>
</ol>
<h4 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器:"></a>启动容器:</h4><p>一旦映像构建完成，运行以下命令以启动 Docker 容器，并连接到 X server:</p>
<p>我这里挂载了 <code>F:\DockerFile\gazebo</code> 目录，进行数据的保存和读取。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -v F:\DockerFile\gazebo:/data -it --name gazebo11-container -e DISPLAY=host.docker.internal:0 gazebo11:latest</span><br></pre></td></tr></table></figure>

<p>这时容器应该运行了。</p>
<p><strong>其他终端：</strong></p>
<p>现在，你可以通过 Docker desktop 中的 Exec 界面来执行其他命令。</p>
<p>或者通过 Docker 的 <code>exec</code> 命令附加一个新的终端到正在运行的容器：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it gazebo11-container /bin/bash</span><br></pre></td></tr></table></figure>

<p>这条命令会打开一个新的 Bash 终端，你可以在这个终端中执行任何你想要的命令，就像在一个常规的 Linux 系统中那样。</p>
<h4 id="启动gazebo："><a href="#启动gazebo：" class="headerlink" title="启动gazebo："></a>启动gazebo：</h4><p>执行 <code>gazebo &amp;</code></p>
<p>一旦你的 X11 服务器配置完成，你应该能够看到 Gazebo 的图形界面从 Docker 容器中显示出来。</p>
<p><img src="/2024/06/22/AI_ROBOT/Gazebo/2024-06-24-12-05-54-image.png"></p>
<p>这种方法应该能够让你在 Docker 容器中运行 Gazebo，同时在主机系统上显示其图形界面。请注意，可能还需要进行一些额外的配置和调整以确保所有功能都能正确运行，特别是如果你的网络环境比较复杂或有特殊的安全配置。</p>
<h3 id="基本概念和界面熟悉"><a href="#基本概念和界面熟悉" class="headerlink" title="基本概念和界面熟悉"></a>基本概念和界面熟悉</h3><h4 id="Gazebo的基本概念，如模型，世界，插件等"><a href="#Gazebo的基本概念，如模型，世界，插件等" class="headerlink" title="Gazebo的基本概念，如模型，世界，插件等"></a>Gazebo的基本概念，如模型，世界，插件等</h4><ul>
<li><p>模型</p>
</li>
<li><p>世界</p>
</li>
<li><p>插件</p>
</li>
<li><p>传感器：模拟真实世界传感器的虚拟设备，例如相机，雷达，激光雷达，它们可以感知仿真世界种的其它模型和环境</p>
</li>
<li><p>视觉和物理属性</p>
</li>
<li><p>通信接口</p>
</li>
</ul>
<h4 id="熟悉Gazebo的用户解码和基本功能"><a href="#熟悉Gazebo的用户解码和基本功能" class="headerlink" title="熟悉Gazebo的用户解码和基本功能"></a>熟悉Gazebo的用户解码和基本功能</h4><ul>
<li><p>主界面</p>
</li>
<li><p>工具栏</p>
</li>
<li><p>模型库</p>
</li>
<li><p>插件和控件</p>
</li>
<li><p>属性面板</p>
</li>
<li><p>主题和布局</p>
</li>
<li><p>日志和错误输出</p>
</li>
</ul>
<h3 id="模型载入"><a href="#模型载入" class="headerlink" title="模型载入"></a>模型载入</h3><ul>
<li><p>打开模型库</p>
</li>
<li><p>加载模型</p>
</li>
<li><p>保存世界</p>
</li>
</ul>
<h4 id="模型操作和属性设置"><a href="#模型操作和属性设置" class="headerlink" title="模型操作和属性设置"></a>模型操作和属性设置</h4><ul>
<li><p>选择模型</p>
</li>
<li><p>移动，旋转，缩放</p>
</li>
<li><p>打开属性面板</p>
</li>
<li><p>添加&#x2F;删除链接和关节</p>
</li>
<li><p>保存模型</p>
</li>
</ul>
<h3 id="创建场景"><a href="#创建场景" class="headerlink" title="创建场景"></a>创建场景</h3><p>simple_world.world</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sdf</span> <span class="attr">version</span>=<span class="string">&quot;1.6&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">world</span> <span class="attr">name</span>=<span class="string">&quot;simple_world&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Ground plane --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">uri</span>&gt;</span>model://ground_plane<span class="tag">&lt;/<span class="name">uri</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Obstacles --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">model</span> <span class="attr">name</span>=<span class="string">&quot;obstacle1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pose</span>&gt;</span>2 0 0.5 0 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">static</span>&gt;</span>true<span class="tag">&lt;/<span class="name">static</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;link&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span> <span class="attr">name</span>=<span class="string">&quot;collision&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">box</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">size</span>&gt;</span>1 1 1<span class="tag">&lt;/<span class="name">size</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">box</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span> <span class="attr">name</span>=<span class="string">&quot;visual&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">box</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">size</span>&gt;</span>1 1 1<span class="tag">&lt;/<span class="name">size</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">box</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">model</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">model</span> <span class="attr">name</span>=<span class="string">&quot;obstacle2&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pose</span>&gt;</span>-2 0 0.5 0 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">static</span>&gt;</span>true<span class="tag">&lt;/<span class="name">static</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;link&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collision</span> <span class="attr">name</span>=<span class="string">&quot;collision&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">box</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">size</span>&gt;</span>1 1 1<span class="tag">&lt;/<span class="name">size</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">box</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">visual</span> <span class="attr">name</span>=<span class="string">&quot;visual&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">box</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">size</span>&gt;</span>1 1 1<span class="tag">&lt;/<span class="name">size</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">box</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">model</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Simple Robot --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">model</span> <span class="attr">name</span>=<span class="string">&quot;simple_robot&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pose</span>&gt;</span>0 0 0.1 1.57079632679 0 0<span class="tag">&lt;/<span class="name">pose</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">name</span>=<span class="string">&quot;base_link&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collision</span> <span class="attr">name</span>=<span class="string">&quot;collision&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cylinder</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">radius</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">radius</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">length</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">length</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">cylinder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collision</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">visual</span> <span class="attr">name</span>=<span class="string">&quot;visual&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">geometry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cylinder</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">radius</span>&gt;</span>0.2<span class="tag">&lt;/<span class="name">radius</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">length</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">length</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">cylinder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">geometry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">visual</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">inertial</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mass</span>&gt;</span>10<span class="tag">&lt;/<span class="name">mass</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inertia</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ixx</span>&gt;</span>0.0175<span class="tag">&lt;/<span class="name">ixx</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">iyy</span>&gt;</span>0.0175<span class="tag">&lt;/<span class="name">iyy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">izz</span>&gt;</span>0.0175<span class="tag">&lt;/<span class="name">izz</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">inertia</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">inertial</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">name</span>=<span class="string">&quot;force_controller&quot;</span> <span class="attr">filename</span>=<span class="string">&quot;libgazebo_ros_force.so&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">updateRate</span>&gt;</span>100.0<span class="tag">&lt;/<span class="name">updateRate</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">robotNamespace</span>&gt;</span>/my_robot<span class="tag">&lt;/<span class="name">robotNamespace</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bodyName</span>&gt;</span>base_link<span class="tag">&lt;/<span class="name">bodyName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">topicName</span>&gt;</span>/force<span class="tag">&lt;/<span class="name">topicName</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">model</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">world</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sdf</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在这个 <code>simple_world.world</code> 文件中，我们创建了以下元素：</p>
<ol>
<li><strong>地面平面</strong> (<code>ground_plane</code>): 使用 <code>&lt;include&gt;</code> 标签从模型库中包含了一个基本的地面平面模型。</li>
<li><strong>障碍物</strong> (<code>obstacle1</code> 和 <code>obstacle2</code>): 创建了两个静态的箱形障碍物，并通过 <code>&lt;pose&gt;</code> 标签设置了它们的位置。</li>
<li><strong>简单的机器人</strong> (<code>simple_robot</code>): 创建了一个简单的机器人模型，该模型包含一个基本的圆柱形体。</li>
</ol>
<p>你可以通过将这个文件保存到你的系统中，然后使用 Gazebo 命令行工具打开它来查看和交互这个简单的世界：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gazebo /data/worlds/simple_world.world</span><br></pre></td></tr></table></figure>

<h3 id="运行基本的仿真"><a href="#运行基本的仿真" class="headerlink" title="运行基本的仿真"></a>运行基本的仿真</h3><h3 id="启动仿真，观察场景中的物理交互"><a href="#启动仿真，观察场景中的物理交互" class="headerlink" title="启动仿真，观察场景中的物理交互"></a>启动仿真，观察场景中的物理交互</h3><p>在 Gazebo 中启动仿真并观察场景中的物理交互是一个很直观的过程。你可以看到模型如何在受到物理规则（如重力、摩擦和碰撞）影响下运动和互动。以下是如何执行此操作的步骤：</p>
<ol>
<li><strong>启动 Gazebo</strong>: 首先，你需要启动 Gazebo 并加载你创建的世界。你可以通过命令行使用以下命令来做到这一点：<code>gazebo /path/to/your/my_scene.world</code> 其中 <code>/path/to/your/</code> 是你保存 <code>my_scene.world</code> 文件的路径。</li>
<li><strong>启动仿真</strong>: 在 Gazebo 的用户界面顶部，你会看到一个“播放”按钮（Play），点击它来启动仿真。现在，你应该能看到你的场景中的模型开始按照物理规则运动。例如，如果你的场景中有一个未固定的箱子，它应该会因为重力而掉到地上。</li>
<li><strong>观察物理交互</strong>: 观察你的场景中的模型如何相互交互以及如何与环境交互。例如，你可以看到碰撞效果，如模型之间的碰撞或模型与地面的碰撞。你也可以尝试移动模型，看看它们如何响应你的交互以及它们如何在物理环境中运动。</li>
<li><strong>调整仿真速度</strong> (可选): 如果需要，你可以调整仿真速度以更仔细地观察物理交互。在 Gazebo 用户界面的顶部，你会看到一个滑块，可以用它来调整仿真速度。</li>
<li><strong>暂停和重置仿真</strong> (可选): 你也可以暂停仿真或重置仿真以返回到初始状态。在 Gazebo 用户界面的顶部，你会找到“暂停”（Pause）和“重置”（Reset）按钮。</li>
</ol>
<p>通过上述步骤，你可以启动 Gazebo 仿真，观察并理解你的场景中的物理交互。这可以帮助你理解如何配置和调整你的模型以获得所需的仿真结果。</p>
<h3 id="※使用基本的控制命令，如移动机器人等"><a href="#※使用基本的控制命令，如移动机器人等" class="headerlink" title="※使用基本的控制命令，如移动机器人等"></a>※使用基本的控制命令，如移动机器人等</h3><p>在 Gazebo 中控制机器人通常需要编写和运行一些控制代码。一个常见的做法是使用 ROS (Robot Operating System) 与 Gazebo 协同工作，以发送控制命令并接收机器人的传感器数据。在这个例子中，我们将通过 ROS 使用简单的控制命令来移动机器人。</p>
<p>首先，确保你已经安装了 ROS 和 Gazebo，并且你的机器人模型已经配置为接受 ROS 控制命令。</p>
<p><strong>创建ROS工作空间:</strong> 在ROS容器中，你需要创建一个新的工作空间来存放你的ROS项目。首先，创建一个新的目录来作为你的工作空间：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/catkin_ws/src</span><br><span class="line">cd ~/catkin_ws/src</span><br><span class="line">catkin_init_workspace</span><br></pre></td></tr></table></figure>

<p>然后构建你的工作空间：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws</span><br><span class="line">catkin_make</span><br></pre></td></tr></table></figure>

<p>设置环境变量:</p>
<p>我将这个文件放到了之前加载的 <code>F:\DockerFile\gazebo</code> 中，然后在容器中在 <code>/data</code> 中可以找到该文件。</p>
<p>文件名：<code>ros_environment.sh</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Source ROS setup script</span></span><br><span class="line">source /opt/ros/noetic/setup.bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Source workspace setup script</span></span><br><span class="line">source ~/catkin_ws/devel/setup.bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Set ROS Master URI</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Replace <span class="string">&#x27;localhost&#x27;</span> with your ROS Master<span class="string">&#x27;s IP if it&#x27;</span>s on a different machine</span></span><br><span class="line">export ROS_MASTER_URI=http://localhost:11311</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Set ROS Hostname</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Replace <span class="string">&#x27;localhost&#x27;</span> with this machine<span class="string">&#x27;s IP if this machine is not the ROS Master</span></span></span><br><span class="line">export ROS_HOSTNAME=localhost</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Set ROS IP</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Replace &#x27;</span>localhost<span class="string">&#x27; with this machine&#x27;</span>s IP</span></span><br><span class="line">export ROS_IP=localhost</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Set Gazebo Plugin Path</span></span><br><span class="line">export GAZEBO_PLUGIN_PATH=/opt/ros/noetic/lib:$GAZEBO_PLUGIN_PATH</span><br></pre></td></tr></table></figure>

<ul>
<li>保存上述脚本到 <code>ros_environment.sh</code>文件。</li>
<li>通过以下命令使环境变量设置生效：<code>source /data/ros_environment.sh</code></li>
</ul>
<h4 id="创建-ROS-Package"><a href="#创建-ROS-Package" class="headerlink" title="创建 ROS Package:"></a><strong>创建 ROS Package</strong>:</h4><p>创建一个新的 ROS package 用于存放你的控制代码。在你的 catkin workspace 中，运行以下命令：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws/src</span><br><span class="line">catkin_create_pkg my_robot_controller rospy gazebo_ros gazebo_plugins std_msgs geometry_msgs</span><br></pre></td></tr></table></figure>

<h4 id="创建控制节点"><a href="#创建控制节点" class="headerlink" title="创建控制节点:"></a><strong>创建控制节点</strong>:</h4><p>在你的 <code>my_robot_controller</code> package 中创建一个新的 Python 文件，命名为 <code>robot_controller.py</code>。</p>
<p>文件名: <code>robot_controller.py</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/usr/bin/env python3</span></span><br><span class="line"></span><br><span class="line">import rospy</span><br><span class="line">from geometry_msgs.msg import Wrench</span><br><span class="line"></span><br><span class="line">def apply_force():</span><br><span class="line">    # Initialize the node</span><br><span class="line">    rospy.init_node(&#x27;force_applier&#x27;, anonymous=True)</span><br><span class="line"></span><br><span class="line">    # Create a publisher to send force commands</span><br><span class="line">    pub = rospy.Publisher(&#x27;/force&#x27;, Wrench, queue_size=10)</span><br><span class="line"></span><br><span class="line">    # Create a Wrench message to send force and torque commands</span><br><span class="line">    cmd = Wrench()</span><br><span class="line">    cmd.force.x = 0.0</span><br><span class="line">    cmd.force.y = 0.0</span><br><span class="line">    cmd.force.z = 0.0</span><br><span class="line">    cmd.torque.x = 0.0</span><br><span class="line">    cmd.torque.y = 0.0</span><br><span class="line">    cmd.torque.z = 0.6  # Apply a torque of 0.6 N*m about the z-axis</span><br><span class="line"></span><br><span class="line">    rate = rospy.Rate(10)  # 10 Hz</span><br><span class="line">    while not rospy.is_shutdown():</span><br><span class="line">        # Publish the command</span><br><span class="line">        pub.publish(cmd)</span><br><span class="line">        rate.sleep()</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    try:</span><br><span class="line">        apply_force()</span><br><span class="line">    except rospy.ROSInterruptException:</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure>

<h4 id="运行控制节点"><a href="#运行控制节点" class="headerlink" title="运行控制节点:"></a><strong>运行控制节点</strong>:</h4><p>在终端中，导航到你的 catkin workspace，并构建你的 package：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~/catkin_ws</span><br><span class="line">catkin_make</span><br><span class="line">source /data/ros_environment.sh</span><br></pre></td></tr></table></figure>

<p>现在运行你的控制节点来移动机器人：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun my_robot_controller robot_controller.py</span><br></pre></td></tr></table></figure>

<p>在这个例子中，<code>robot_controller.py</code> 脚本创建了一个 ROS 节点，该节点发布速度命令来移动机器人。<code>/my_robot/cmd_vel</code> 是你的机器人模型应该监听的话题，以接收速度命令。确保将此话题名称更改为与你的机器人模型匹配的话题名称。</p>
<p>然后打开一个新的终端，运行：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun my_robot_controller robot_controller.py</span><br></pre></td></tr></table></figure>

<p>然后就可以看到机器人转起来了：</p>
<h3 id="REF"><a href="#REF" class="headerlink" title="REF"></a>REF</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/590825660">win11+WSL2配置gazebo - 知乎 (zhihu.com)</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/06/20/AI_ROBOT/Tools_simulation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/20/AI_ROBOT/Tools_simulation/" class="post-title-link" itemprop="url">Summary of AI+ROBOT</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-06-20 12:00:00" itemprop="dateCreated datePublished" datetime="2024-06-20T12:00:00+00:00">2024-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:38" itemprop="dateModified" datetime="2025-08-06T08:16:38+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Robot/" itemprop="url" rel="index"><span itemprop="name">Robot</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="模拟"><a href="#模拟" class="headerlink" title="模拟"></a>模拟</h3><p>Gazebo，</p>
<p>Mujoco</p>
<p>Lsacc Sim</p>
<p>动力学仿真引擎——RaiSim</p>
<h4 id="Lsacc-Sim"><a href="#Lsacc-Sim" class="headerlink" title="Lsacc Sim"></a>Lsacc Sim</h4><blockquote>
<p>NVIDIA Omniverse™ Isaac Sim是NVIDIA Omniverse™平台的一款机器人仿真工具包。Isaac Sim具备构建虚拟机器人世界和实验的关键功能。它为研究人员和从业人员提供了创建健壮、物理精确仿真和合成数据集所需的工具和工作流程。Isaac Sim通过ROS&#x2F;ROS2支持导航和操控应用。它可以模拟RGB-D、Lidar和IMU等传感器的传感器数据，用于多种计算机视觉技术，如领域随机化、真值标签、分割和边界框。</p>
</blockquote>
<h3 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h3><h4 id="xiihoo小车"><a href="#xiihoo小车" class="headerlink" title="xiihoo小车"></a>xiihoo小车</h4><h4 id="Mick小车"><a href="#Mick小车" class="headerlink" title="Mick小车"></a>Mick小车</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/06/18/Sub_Language/TCP_API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/18/Sub_Language/TCP_API/" class="post-title-link" itemprop="url">网络编程 -- flask</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-06-18 12:00:00" itemprop="dateCreated datePublished" datetime="2024-06-18T12:00:00+00:00">2024-06-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Net/" itemprop="url" rel="index"><span itemprop="name">Net</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Net/flask/" itemprop="url" rel="index"><span itemprop="name">flask</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>demo.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, jsonify, Respons</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/hi&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_world</span>():</span><br><span class="line">    logger.info(<span class="string">&#x27;---hi Qiansi Tech SR&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Qiansi Tech SR&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># Rel Server [gunnicor run in 9020]</span></span><br><span class="line">    app.run(port=<span class="number">9021</span>) <span class="comment"># test in 9021</span></span><br></pre></td></tr></table></figure>

<p>client</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">request_demo</span>(<span class="params">test_on_server=<span class="literal">False</span></span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># url = &#x27;http://127.0.0.1:&#123;&#125;/cycle/hi&#x27;.format(args.port)</span></span><br><span class="line">        <span class="comment"># url = &#x27;http://cartoon.fuyuncc.com/cycle/hi&#x27;.format(args.port)</span></span><br><span class="line">        url = <span class="string">&#x27;http://cartoon.fuyuncc.com/srserver/hi&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> test_on_server:</span><br><span class="line">            url = <span class="string">&#x27;http://127.0.0.1:9021/hi&#x27;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;-url&#x27;</span>, url)</span><br><span class="line"></span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        <span class="built_in">print</span>(r)</span><br><span class="line">        <span class="built_in">print</span>(r.text)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/04/15/navi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/15/navi/" class="post-title-link" itemprop="url">Navigation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-04-15 12:00:00" itemprop="dateCreated datePublished" datetime="2024-04-15T12:00:00+00:00">2024-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>NAS(Private) OMV </p>
<hr>
<p>gitea <a target="_blank" rel="noopener" href="http://192.168.193.11:3000/">vpn access </a> (<a target="_blank" rel="noopener" href="http://192.168.1.14:3000/"> local </a>)</p>
<p>it-Tools <a target="_blank" rel="noopener" href="http://192.168.193.11:8380/"> vpn access </a>  (<a target="_blank" rel="noopener" href="http://192.168.1.14:8380/"> local </a>)</p>
<p>Stirling-PDF <a target="_blank" rel="noopener" href="http://192.168.193.11:8070/"> vpn access </a>   (<a target="_blank" rel="noopener" href="http://192.168.1.14:8070/"> local </a>)</p>
<p>Navidrome(Music) <a target="_blank" rel="noopener" href="http://192.168.193.11:4533/">vpn access</a>   (<a target="_blank" rel="noopener" href="http://192.168.1.14:4533/"> local </a>)</p>
<p><a target="_blank" rel="noopener" href="http://192.168.193.11:8096/">Emby Media</a></p>
<hr>
<p>NextClouf <a target="_blank" rel="noopener" href="http://192.168.193.11:2333/">http://192.168.193.11:2333</a></p>
<p><a target="_blank" rel="noopener" href="http://192.168.193.11:6080/">AriaNg Download Manager</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/04/12/NLP/Transformer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/12/NLP/Transformer/" class="post-title-link" itemprop="url">(NLP) Transformer</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-04-12 19:00:00" itemprop="dateCreated datePublished" datetime="2024-04-12T19:00:00+00:00">2024-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:39" itemprop="dateModified" datetime="2025-08-06T08:16:39+00:00">2025-08-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Transformer是一个利用注意力机制来提高模型训练速度的模型，因其适用于并行化计算以及本身模型的复杂程度使其在精度和性能上都要高于之前流行的循环神经网络。</p>
<p>标准的Transformer结构如下图所示，是一个<strong>编码器-解码器架构</strong>，其编码器和解码器均有一个编码层和若干相同的Transformer模块层堆叠组成。</p>
<p><img src="/2024/04/12/NLP/Transformer/2024-04-12-17-50-12-image.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/04/12/NLP/HuggingFace/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/12/NLP/HuggingFace/" class="post-title-link" itemprop="url">HuggingFace</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-04-12 18:00:09" itemprop="dateCreated datePublished" datetime="2024-04-12T18:00:09+00:00">2024-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:39" itemprop="dateModified" datetime="2025-08-06T08:16:39+00:00">2025-08-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="HuggingFace-transformers"><a href="#HuggingFace-transformers" class="headerlink" title="HuggingFace transformers"></a>HuggingFace transformers</h3><p>from transformers import AutoModelForCausalLM, AutoTokenizer  </p>
<p>from transformers.generation import GenerationConfig</p>
<h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><p>AutoModelForCausalLM 是一个自动模型加载器，主要用于自回归语言建模任务，如GPT系列模型。自回归意味着模型预测下一个词时仅依赖于它之前出现的词，这种特性常用于文本生成任务，比如聊天机器人、文章续写等。当你指定一个预训练模型的名称（如gpt2、gpt-neo、bert-gpt等），该类会自动加载对应的预训练模型及其适配的架构。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoModelForCausalLM</span><br><span class="line"></span><br><span class="line">model = AutoModelForCausalLM.from_pretrained(<span class="string">&#x27;model_name&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoTokenizer</span><br><span class="line"></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(<span class="string">&#x27;model_name&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例：将文本转化为模型可以接受的输入形式</span></span><br><span class="line">input_ids = tokenizer(<span class="string">&quot;Hello, how are you?&quot;</span>, return_tensors=<span class="string">&quot;pt&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="下载工具"><a href="#下载工具" class="headerlink" title="下载工具"></a>下载工具</h3><table>
<thead>
<tr>
<th>类别</th>
<th>方法</th>
<th>推荐程度</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody><tr>
<td>基于URL</td>
<td>浏览器网页下载</td>
<td>⭐⭐⭐</td>
<td>通用性好</td>
<td>手动麻烦&#x2F;无多线程</td>
</tr>
<tr>
<td></td>
<td>多线程下载器(hfd&#x2F;IDM等)</td>
<td>⭐⭐⭐⭐⭐</td>
<td>通用性好，鲁棒性好</td>
<td>手动麻烦</td>
</tr>
<tr>
<td>批量URL</td>
<td>ariaN+(python爬虫)</td>
<td>⭐⭐⭐⭐⭐⭐</td>
<td>简单（支持二级目录下载）</td>
<td>提前写好python脚本</td>
</tr>
<tr>
<td>CLI工具</td>
<td>git clone命令</td>
<td>⭐⭐</td>
<td>简单</td>
<td>无断点续传&#x2F;冗余文件&#x2F;无多线程</td>
</tr>
<tr>
<td>专用CLI工具</td>
<td>huggingface-cli+hf_transfer</td>
<td>⭐⭐⭐</td>
<td>官方下载工具链，带加速功能</td>
<td>容错性低</td>
</tr>
<tr>
<td></td>
<td>huggingface-cli</td>
<td>⭐⭐⭐⭐⭐</td>
<td>官方下载工具功能全</td>
<td>不支持多线程</td>
</tr>
<tr>
<td>Python方法</td>
<td>snapshot_download</td>
<td>⭐⭐⭐</td>
<td>官方支持，功能全</td>
<td>脚本复杂</td>
</tr>
<tr>
<td></td>
<td>from_pretrained</td>
<td>⭐</td>
<td>官方支持，简单</td>
<td>不方便存储，功能不全</td>
</tr>
<tr>
<td></td>
<td>hf_hub_download</td>
<td>⭐</td>
<td>官方支持</td>
<td>不支持全量下载&#x2F;无多线程</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/04/12/Tools/Tools_NAS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/12/Tools/Tools_NAS/" class="post-title-link" itemprop="url">Tools OMV (Nas Manager Software)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-04-12 13:00:00" itemprop="dateCreated datePublished" datetime="2024-04-12T13:00:00+00:00">2024-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tools/" itemprop="url" rel="index"><span itemprop="name">Tools</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Tools/NAS/" itemprop="url" rel="index"><span itemprop="name">NAS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="gitea"><a href="#gitea" class="headerlink" title="gitea"></a>gitea</h3><ul>
<li>gitlab 需要硬件条件更高</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.gitea.com/zh-cn/installation/install-with-docker">使用 Docker 安装 gitea</a></p>
<h3 id="NextCloud"><a href="#NextCloud" class="headerlink" title="NextCloud"></a>NextCloud</h3><ul>
<li>docker-compose安装</li>
</ul>
<h3 id="Emby"><a href="#Emby" class="headerlink" title="Emby"></a>Emby</h3><ul>
<li>docker安装</li>
</ul>
<h3 id="ES文件访问支持"><a href="#ES文件访问支持" class="headerlink" title="ES文件访问支持"></a>ES文件访问支持</h3><ul>
<li>文件安装</li>
</ul>
<h3 id="Music-Nivdirome"><a href="#Music-Nivdirome" class="headerlink" title="Music (Nivdirome)"></a>Music (Nivdirome)</h3><ul>
<li><h3 id="导航页"><a href="#导航页" class="headerlink" title="导航页"></a>导航页</h3></li>
</ul>
<p>OneNav （PHP + SQLite 3）</p>
<p>Flare</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/04/03/NLP/KnowledgeGraph/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/03/NLP/KnowledgeGraph/" class="post-title-link" itemprop="url">Knowledge Graph</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-04-03 12:00:00" itemprop="dateCreated datePublished" datetime="2024-04-03T12:00:00+00:00">2024-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:39" itemprop="dateModified" datetime="2025-08-06T08:16:39+00:00">2025-08-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Knowledge Graph</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/481982514">https://zhuanlan.zhihu.com/p/481982514</a></p>
<p><a target="_blank" rel="noopener" href="https://hub.baai.ac.cn/view/33646">12类知识图谱构建与应用开源工具总结:从开放知识库到知识抽取再到推理可视化-智源社区</a></p>
<p><a target="_blank" rel="noopener" href="https://observablehq.com/@d3/gallery">D3 gallery &#x2F; D3 | Observable</a></p>
<p><a target="_blank" rel="noopener" href="https://observablehq.com/@d3/radial-tree/2?intent=fork">Radial tidy tree &#x2F; D3 | Observable</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://novav.github.io/2024/04/02/NLP/vLLM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Simon Shi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Simon Shi的小站">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/04/02/NLP/vLLM/" class="post-title-link" itemprop="url">LLM 推理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-04-02 12:00:01" itemprop="dateCreated datePublished" datetime="2024-04-02T12:00:01+00:00">2024-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-06 08:16:40" itemprop="dateModified" datetime="2025-08-06T08:16:40+00:00">2025-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LLM/" itemprop="url" rel="index"><span itemprop="name">LLM</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LLM/vLLM/" itemprop="url" rel="index"><span itemprop="name">vLLM</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1、Flexgen"><a href="#1、Flexgen" class="headerlink" title="1、Flexgen"></a>1、Flexgen</h2><p><a target="_blank" rel="noopener" href="https://arxiv.org/abs/2303.06865">https://arxiv.org/abs/2303.06865</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/615327112">Flexgen LLM推理计算环节的量化分析</a></p>
<p>主要优化点为offload CPU 、CPU和GPU的并行计算、模型量化和多GPU并行</p>
<h2 id="2、DeepSpeed"><a href="#2、DeepSpeed" class="headerlink" title="2、DeepSpeed"></a>2、DeepSpeed</h2><p><a target="_blank" rel="noopener" href="https://github.com/microsoft/DeepSpeed/">GitHub - microsoft&#x2F;DeepSpeed: DeepSpeed is a deep learning optimization library that makes distributed training and inference easy, efficient, and effective.</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/microsoft/DeepSpeedExamples">GitHub - microsoft&#x2F;DeepSpeedExamples: Example models using DeepSpeed</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/629644249">DeepSpeed 通过系统优化加速大模型推理</a></p>
<p>针对现有问题：</p>
<ol>
<li>对大规模模型缺乏多 GPU 支持并满足延迟要求；</li>
<li>在小批量（small batch size）推理时，GPU 内核性能有限；</li>
<li>难以利用量化，既包括量化模型来减少模型大小，以及支持量化模型的高性能推理且无需专门硬件来减少延迟。</li>
</ol>
<p>提出解决方案：</p>
<ol>
<li>推理自适应并行性（<code>Inference-adapted parallelism</code>）：允许用户通过适应多 GPU 推理的最佳并行策略来有效地服务大型模型，同时考虑推理延迟和成本。</li>
<li>针对推理优化的 CUDA 内核（<code>Inference-optimized CUDA kernels</code>）：通过深度融合和新颖的内核调度充分利用 GPU 资源，从而提高每个 GPU 的效率。</li>
<li>有效的量化感知训练（<code>Effective quantize-aware training</code>）：支持量化后的模型推理，如 INT8 推理，模型量化可以节省内存（memory）和减少延迟（latency），同时不损害准确性。</li>
</ol>
<h4 id="运行代码"><a href="#运行代码" class="headerlink" title="运行代码"></a>运行代码</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> argparse <span class="keyword">import</span> ArgumentParser</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoModelForCausalLM, AutoTokenizer, AutoConfig</span><br><span class="line"><span class="keyword">import</span> deepspeed</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> utils <span class="keyword">import</span> DSPipeline</span><br><span class="line"></span><br><span class="line">inputs = [</span><br><span class="line">         <span class="string">&quot;DeepSpeed is a machine learning framework&quot;</span>,</span><br><span class="line">         <span class="string">&quot;He is working on&quot;</span>,</span><br><span class="line">         <span class="string">&quot;He has a&quot;</span>,</span><br><span class="line">         <span class="string">&quot;He got all&quot;</span>,</span><br><span class="line">         <span class="string">&quot;Everyone is happy and I can&quot;</span>,</span><br><span class="line">         <span class="string">&quot;The new movie that got Oscar this year&quot;</span>,</span><br><span class="line">         <span class="string">&quot;In the far far distance from our galaxy,&quot;</span>,</span><br><span class="line">         <span class="string">&quot;Peace is the only way&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">pipe = DSPipeline(model_name=args.name,</span><br><span class="line">                  dtype=torch.float16,</span><br><span class="line">                  is_meta=args.use_meta_tensor,</span><br><span class="line">                  device=args.local_rank,</span><br><span class="line">                  checkpoint_path=args.checkpoint_path)</span><br><span class="line"></span><br><span class="line">ds_kwargs = <span class="built_in">dict</span>()</span><br><span class="line"></span><br><span class="line">pipe.model = deepspeed.init_inference(pipe.model,</span><br><span class="line">                                dtype=torch.int8,</span><br><span class="line">                                mp_size=args.world_size,</span><br><span class="line">                                replace_with_kernel_inject=args.use_kernel,</span><br><span class="line">                                replace_method=args.replace_method,</span><br><span class="line">                                max_tokens=args.max_tokens,</span><br><span class="line">                                save_mp_checkpoint_path=args.save_mp_checkpoint_path,</span><br><span class="line">                                **ds_kwargs</span><br><span class="line">                                )</span><br><span class="line"></span><br><span class="line">torch.cuda.synchronize()</span><br><span class="line">outputs = pipe(inputs, num_tokens=args.max_new_tokens, do_sample=(<span class="keyword">not</span> args.greedy))</span><br><span class="line">torch.cuda.synchronize()</span><br></pre></td></tr></table></figure>

<h3 id="3、FasterTransformer"><a href="#3、FasterTransformer" class="headerlink" title="3、FasterTransformer"></a>3、FasterTransformer</h3><p><a href="https://link.zhihu.com/?target=https://github.com/NVIDIA/FasterTransformer">https://github.com/NVIDIA/FasterTransformer</a><br><a href="https://link.zhihu.com/?target=https://github.com/cameronfr/FasterTransformer">https://github.com/cameronfr/FasterTransformer</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/626008090">https://zhuanlan.zhihu.com/p/626008090</a>  </p>
<ol>
<li>为了减少kernel调用次数，将除了矩阵乘法的kernel都尽可能合并</li>
<li>针对大batch单独进行了kernel优化</li>
<li>支持选择最优的矩阵乘法</li>
<li>在使用FP16时使用half2类型，达到half两倍的访存带宽和计算吞吐</li>
<li>优化gelu、softmax、layernorm的实现以及选用rsqrt等</li>
</ol>
<p>FT框架是用C++&#x2F;CUDA编写的，依赖于高度优化的 cuBLAS、cuBLASLt 和 cuSPARSELt 库，这样可以在 GPU 上进行快速的 Transformer 推理。<br>调用较为繁琐，只跑通了LLaMA的C++版本demo，修改起来较为困难。</p>
<h2 id="4、exllama学习"><a href="#4、exllama学习" class="headerlink" title="4、exllama学习"></a>4、exllama学习</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/642852847">ZhiHu LLM推理1：exllama学习</a></p>
<p>通过Python&#x2F;C++&#x2F;CUDA 实现，与 4 位 GPTQ 权重一起使用，旨在在现代 GPU 上实现快速且内存高效。</p>
<h2 id="5、vLLM"><a href="#5、vLLM" class="headerlink" title="5、vLLM"></a>5、vLLM</h2><p><a href="https://link.zhihu.com/?target=https://github.com/vllm-project/vllm">https://github.com/vllm-project/vllm</a><br><a target="_blank" rel="noopener" href="https://vllm.ai/">https://vllm.ai/</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/643336063">LLM推理2：vLLM源码学习</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/W7GSN5tmIzXpWXiCSTvGBQ"># 从理论到实践，深入理解 FlashAttention</a></p>
<p>vLLM 是在加州大学伯克利分校开发，配备了PagedAttention的vLLM重新定义了 LLM 服务的最新技术水平：它的吞吐量比 HuggingFace Transformers 高出 24 倍，且无需更改任何模型架构</p>
<p>通过Python&#x2F;C++&#x2F;CUDA 实现。</p>
<h3 id="运行代码-1"><a href="#运行代码-1" class="headerlink" title="运行代码"></a>运行代码</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> vllm <span class="keyword">import</span> LLM, SamplingParams</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sample prompts.</span></span><br><span class="line">prompts = [</span><br><span class="line">    <span class="string">&quot;Hello, my name is&quot;</span>,</span><br><span class="line">    <span class="string">&quot;The president of the United States is&quot;</span>,</span><br><span class="line">    <span class="string">&quot;The capital of France is&quot;</span>,</span><br><span class="line">    <span class="string">&quot;The future of AI is&quot;</span>,</span><br><span class="line">]</span><br><span class="line"><span class="comment"># Create a sampling params object.</span></span><br><span class="line">sampling_params = SamplingParams(temperature=<span class="number">0.8</span>, top_p=<span class="number">0.95</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create an LLM.</span></span><br><span class="line">llm = LLM(model=<span class="string">&quot;facebook/opt-125m&quot;</span>)</span><br><span class="line"><span class="comment"># Generate texts from the prompts. The output is a list of RequestOutput objects</span></span><br><span class="line"><span class="comment"># that contain the prompt, generated text, and other information.</span></span><br><span class="line">outputs = llm.generate(prompts, sampling_params)</span><br><span class="line"><span class="comment"># Print the outputs.</span></span><br><span class="line"><span class="keyword">for</span> output <span class="keyword">in</span> outputs:</span><br><span class="line">    prompt = output.prompt</span><br><span class="line">    generated_text = output.outputs[<span class="number">0</span>].text</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Prompt: <span class="subst">&#123;prompt!r&#125;</span>, Generated text: <span class="subst">&#123;generated_text!r&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="6、llama-cpp-koboldcpp"><a href="#6、llama-cpp-koboldcpp" class="headerlink" title="6、llama.cpp&#x2F;koboldcpp"></a>6、llama.cpp&#x2F;koboldcpp</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/649052223">呵呵哒：LLM推理框架3：llama.cpp&#x2F;koboldcpp学习</a></p>
<p>基于 GGML 模型的推理框架，采用了纯 C&#x2F;C++代码，优势如下：</p>
<ul>
<li>无需任何额外依赖，相比 Python 代码对 PyTorch 等库的要求，C&#x2F;C++ 直接编译出<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22answer%22,%22sourceId%22:2987333822%7D">可执行文件</a>，跳过不同硬件的繁杂准备；</li>
<li>支持 Apple Silicon 芯片的 ARM NEON 加速，x86 平台则以 AVX2 替代；</li>
<li>具有 F16 和 F32 的混合精度；</li>
<li><strong>支持 4-bit 量化；</strong></li>
<li><strong>无需 GPU，可只用 CPU 运行；</strong></li>
</ul>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/657169287"> LLM推理框架总结</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/643336063">LLM推理2：vLLM源码学习</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Simon Shi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">322</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">142</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">269</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Simon Shi</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
